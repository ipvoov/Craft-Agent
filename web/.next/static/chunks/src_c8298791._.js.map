{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/deer/web/src/lib/utils.ts"],"sourcesContent":["// Copyright (c) 2025 Bytedance Ltd. and/or its affiliates\n// SPDX-License-Identifier: MIT\n\nimport { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n"],"names":[],"mappings":"AAAA,0DAA0D;AAC1D,+BAA+B;;;;AAE/B;AACA;;;AAEO,SAAS;IAAG,IAAA,IAAA,OAAA,UAAA,QAAA,AAAG,SAAH,UAAA,OAAA,OAAA,GAAA,OAAA,MAAA;QAAG,OAAH,QAAA,SAAA,CAAA,KAAuB;;IACxC,OAAO,CAAA,GAAA,4NAAA,CAAA,UAAO,AAAD,EAAE,CAAA,GAAA,yLAAA,CAAA,OAAI,AAAD,EAAE;AACtB","debugId":null}},
    {"offset": {"line": 31, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/deer/web/src/components/ui/button.tsx"],"sourcesContent":["import { Slot } from \"@radix-ui/react-slot\";\nimport { cva, type VariantProps } from \"class-variance-authority\";\nimport * as React from \"react\";\n\nimport { cn } from \"~/lib/utils\";\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60\",\n        outline:\n          \"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50\",\n        secondary:\n          \"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80\",\n        ghost:\n          \"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-9 px-4 py-2 has-[>svg]:px-3\",\n        sm: \"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5\",\n        lg: \"h-10 rounded-md px-6 has-[>svg]:px-4\",\n        icon: \"size-9\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  },\n);\n\nfunction Button({\n  className,\n  variant,\n  size,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"button\"> &\n  VariantProps<typeof buttonVariants> & {\n    asChild?: boolean;\n  }) {\n  const Comp = asChild ? Slot : \"button\";\n\n  return (\n    <Comp\n      data-slot=\"button\"\n      className={cn(\n        buttonVariants({ variant, size, className }),\n        \"cursor-pointer active:scale-105\",\n      )}\n      {...props}\n    />\n  );\n}\n\nexport { Button, buttonVariants };\n"],"names":[],"mappings":";;;;;AAAA;AACA;AAGA;;;;;AAEA,MAAM,iBAAiB,CAAA,GAAA,8OAAA,CAAA,MAAG,AAAD,EACvB,+bACA;IACE,UAAU;QACR,SAAS;YACP,SACE;YACF,aACE;YACF,SACE;YACF,WACE;YACF,OACE;YACF,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;QACR;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAGF,SAAS,OAAO,KASb;QATa,EACd,SAAS,EACT,OAAO,EACP,IAAI,EACJ,UAAU,KAAK,EACf,GAAG,OAIF,GATa;IAUd,MAAM,OAAO,UAAU,uSAAA,CAAA,OAAI,GAAG;IAE9B,qBACE,sYAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,eAAe;YAAE;YAAS;YAAM;QAAU,IAC1C;QAED,GAAG,KAAK;;;;;;AAGf;KAtBS","debugId":null}},
    {"offset": {"line": 95, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/deer/web/src/components/deer-flow/logo.tsx"],"sourcesContent":["// Copyright (c) 2025 Bytedance Ltd. and/or its affiliates\n// SPDX-License-Identifier: MIT\n\nimport Link from \"next/link\";\n\nexport function Logo() {\n  return (\n    <Link\n      className=\"opacity-70 transition-opacity duration-300 hover:opacity-100\"\n      href=\"/\"\n    >\n      ðŸ“º DeepCraft\n    </Link>\n  );\n}\n"],"names":[],"mappings":"AAAA,0DAA0D;AAC1D,+BAA+B;;;;;AAE/B;;;AAEO,SAAS;IACd,qBACE,sYAAC,wWAAA,CAAA,UAAI;QACH,WAAU;QACV,MAAK;kBACN;;;;;;AAIL;KATgB","debugId":null}},
    {"offset": {"line": 127, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/deer/web/src/components/ui/tooltip.tsx"],"sourcesContent":["// Copyright (c) 2025 Bytedance Ltd. and/or its affiliates\n// SPDX-License-Identifier: MIT\n\n\"use client\";\n\nimport * as React from \"react\";\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip\";\n\nimport { cn } from \"~/lib/utils\";\n\nfunction TooltipProvider({\n  delayDuration = 0,\n  ...props\n}: React.ComponentProps<typeof TooltipPrimitive.Provider>) {\n  return (\n    <TooltipPrimitive.Provider\n      data-slot=\"tooltip-provider\"\n      delayDuration={delayDuration}\n      {...props}\n    />\n  );\n}\n\nfunction Tooltip({\n  ...props\n}: React.ComponentProps<typeof TooltipPrimitive.Root>) {\n  return (\n    <TooltipProvider>\n      <TooltipPrimitive.Root data-slot=\"tooltip\" {...props} />\n    </TooltipProvider>\n  );\n}\n\nfunction TooltipTrigger({\n  ...props\n}: React.ComponentProps<typeof TooltipPrimitive.Trigger>) {\n  return <TooltipPrimitive.Trigger data-slot=\"tooltip-trigger\" {...props} />;\n}\n\nfunction TooltipContent({\n  className,\n  sideOffset = 0,\n  children,\n  ...props\n}: React.ComponentProps<typeof TooltipPrimitive.Content>) {\n  return (\n    <TooltipPrimitive.Portal>\n      <TooltipPrimitive.Content\n        data-slot=\"tooltip-content\"\n        sideOffset={sideOffset}\n        className={cn(\n          \"bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance\",\n          className,\n        )}\n        {...props}\n      >\n        {children}\n        <TooltipPrimitive.Arrow className=\"bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]\" />\n      </TooltipPrimitive.Content>\n    </TooltipPrimitive.Portal>\n  );\n}\n\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider };\n"],"names":[],"mappings":"AAAA,0DAA0D;AAC1D,+BAA+B;;;;;;;;AAK/B;AAEA;AALA;;;;AAOA,SAAS,gBAAgB,KAGgC;QAHhC,EACvB,gBAAgB,CAAC,EACjB,GAAG,OACoD,GAHhC;IAIvB,qBACE,sYAAC,uXAAA,CAAA,WAAyB;QACxB,aAAU;QACV,eAAe;QACd,GAAG,KAAK;;;;;;AAGf;KAXS;AAaT,SAAS,QAAQ,KAEoC;QAFpC,EACf,GAAG,OACgD,GAFpC;IAGf,qBACE,sYAAC;kBACC,cAAA,sYAAC,uXAAA,CAAA,OAAqB;YAAC,aAAU;YAAW,GAAG,KAAK;;;;;;;;;;;AAG1D;MARS;AAUT,SAAS,eAAe,KAEgC;QAFhC,EACtB,GAAG,OACmD,GAFhC;IAGtB,qBAAO,sYAAC,uXAAA,CAAA,UAAwB;QAAC,aAAU;QAAmB,GAAG,KAAK;;;;;;AACxE;MAJS;AAMT,SAAS,eAAe,KAKgC;QALhC,EACtB,SAAS,EACT,aAAa,CAAC,EACd,QAAQ,EACR,GAAG,OACmD,GALhC;IAMtB,qBACE,sYAAC,uXAAA,CAAA,SAAuB;kBACtB,cAAA,sYAAC,uXAAA,CAAA,UAAwB;YACvB,aAAU;YACV,YAAY;YACZ,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,0aACA;YAED,GAAG,KAAK;;gBAER;8BACD,sYAAC,uXAAA,CAAA,QAAsB;oBAAC,WAAU;;;;;;;;;;;;;;;;;AAI1C;MAtBS","debugId":null}},
    {"offset": {"line": 230, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/deer/web/src/components/deer-flow/tooltip.tsx"],"sourcesContent":["// Copyright (c) 2025 Bytedance Ltd. and/or its affiliates\n// SPDX-License-Identifier: MIT\n\nimport type { CSSProperties } from \"react\";\n\nimport {\n  Tooltip as ShadcnTooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"~/components/ui/tooltip\";\nimport { cn } from \"~/lib/utils\";\n\nexport function Tooltip({\n  className,\n  style,\n  children,\n  title,\n  open,\n  side,\n  sideOffset,\n  delayDuration = 750,\n}: {\n  className?: string;\n  style?: CSSProperties;\n  children: React.ReactNode;\n  title?: React.ReactNode;\n  open?: boolean;\n  side?: \"left\" | \"right\" | \"top\" | \"bottom\";\n  sideOffset?: number;\n  delayDuration?: number;\n}) {\n  return (\n    <TooltipProvider>\n      <ShadcnTooltip delayDuration={delayDuration} open={open}>\n        <TooltipTrigger asChild>{children}</TooltipTrigger>\n        <TooltipContent\n          className={cn(className)}\n          style={style}\n          side={side}\n          sideOffset={sideOffset}\n        >\n          {title}\n        </TooltipContent>\n      </ShadcnTooltip>\n    </TooltipProvider>\n  );\n}\n"],"names":[],"mappings":"AAAA,0DAA0D;AAC1D,+BAA+B;;;;;AAI/B;AAMA;;;;AAEO,SAAS,QAAQ,KAkBvB;QAlBuB,EACtB,SAAS,EACT,KAAK,EACL,QAAQ,EACR,KAAK,EACL,IAAI,EACJ,IAAI,EACJ,UAAU,EACV,gBAAgB,GAAG,EAUpB,GAlBuB;IAmBtB,qBACE,sYAAC,sIAAA,CAAA,kBAAe;kBACd,cAAA,sYAAC,sIAAA,CAAA,UAAa;YAAC,eAAe;YAAe,MAAM;;8BACjD,sYAAC,sIAAA,CAAA,iBAAc;oBAAC,OAAO;8BAAE;;;;;;8BACzB,sYAAC,sIAAA,CAAA,iBAAc;oBACb,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE;oBACd,OAAO;oBACP,MAAM;oBACN,YAAY;8BAEX;;;;;;;;;;;;;;;;;AAKX;KAlCgB","debugId":null}},
    {"offset": {"line": 291, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/deer/web/src/components/deer-flow/theme-toggle.tsx"],"sourcesContent":["// Copyright (c) 2025 Bytedance Ltd. and/or its affiliates\n// SPDX-License-Identifier: MIT\n\n\"use client\";\n\nimport { Monitor, Moon, Sun } from \"lucide-react\";\nimport { useTheme } from \"next-themes\";\n\nimport { Button } from \"~/components/ui/button\";\nimport { cn } from \"~/lib/utils\";\n\nimport { Tooltip } from \"./tooltip\";\n\nexport function ThemeToggle() {\n  const { resolvedTheme = \"dark\", setTheme } = useTheme();\n  const isDarkMode = resolvedTheme === \"dark\";\n\n  return (\n    <Tooltip title=\"Change theme\">\n      <Button\n        variant=\"ghost\"\n        size=\"icon\"\n        onClick={() => setTheme(isDarkMode ? \"light\" : \"dark\")}\n        aria-label=\"Toggle theme\"\n      >\n        <Sun className=\"h-[1.2rem] w-[1.2rem] scale-100 rotate-0 transition-all dark:scale-0 dark:-rotate-90\" />\n        <Moon className=\"absolute h-[1.2rem] w-[1.2rem] scale-0 rotate-90 transition-all dark:scale-100 dark:rotate-0\" />\n      </Button>\n    </Tooltip>\n  );\n}\n"],"names":[],"mappings":"AAAA,0DAA0D;AAC1D,+BAA+B;;;;;AAI/B;AAAA;AACA;AAEA;AAGA;;;AARA;;;;;AAUO,SAAS;;IACd,MAAM,EAAE,gBAAgB,MAAM,EAAE,QAAQ,EAAE,GAAG,CAAA,GAAA,2RAAA,CAAA,WAAQ,AAAD;IACpD,MAAM,aAAa,kBAAkB;IAErC,qBACE,sYAAC,gJAAA,CAAA,UAAO;QAAC,OAAM;kBACb,cAAA,sYAAC,qIAAA,CAAA,SAAM;YACL,SAAQ;YACR,MAAK;YACL,SAAS,IAAM,SAAS,aAAa,UAAU;YAC/C,cAAW;;8BAEX,sYAAC,uRAAA,CAAA,MAAG;oBAAC,WAAU;;;;;;8BACf,sYAAC,yRAAA,CAAA,OAAI;oBAAC,WAAU;;;;;;;;;;;;;;;;;AAIxB;GAjBgB;;QAC+B,2RAAA,CAAA,WAAQ;;;KADvC","debugId":null}},
    {"offset": {"line": 364, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/deer/web/src/components/ui/badge.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"~/lib/utils\"\n\nconst badgeVariants = cva(\n  \"inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90\",\n        secondary:\n          \"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90\",\n        destructive:\n          \"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60\",\n        outline:\n          \"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nfunction Badge({\n  className,\n  variant,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"span\"> &\n  VariantProps<typeof badgeVariants> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"span\"\n\n  return (\n    <Comp\n      data-slot=\"badge\"\n      className={cn(badgeVariants({ variant }), className)}\n      {...props}\n    />\n  )\n}\n\nexport { Badge, badgeVariants }\n"],"names":[],"mappings":";;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,gBAAgB,CAAA,GAAA,8OAAA,CAAA,MAAG,AAAD,EACtB,kZACA;IACE,UAAU;QACR,SAAS;YACP,SACE;YACF,WACE;YACF,aACE;YACF,SACE;QACJ;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAGF,SAAS,MAAM,KAM6C;QAN7C,EACb,SAAS,EACT,OAAO,EACP,UAAU,KAAK,EACf,GAAG,OAEuD,GAN7C;IAOb,MAAM,OAAO,UAAU,uSAAA,CAAA,OAAI,GAAG;IAE9B,qBACE,sYAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,cAAc;YAAE;QAAQ,IAAI;QACzC,GAAG,KAAK;;;;;;AAGf;KAhBS","debugId":null}},
    {"offset": {"line": 417, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/deer/web/src/components/ui/dialog.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { XIcon } from \"lucide-react\"\n\nimport { cn } from \"~/lib/utils\"\n\nfunction Dialog({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Root>) {\n  return <DialogPrimitive.Root data-slot=\"dialog\" {...props} />\n}\n\nfunction DialogTrigger({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Trigger>) {\n  return <DialogPrimitive.Trigger data-slot=\"dialog-trigger\" {...props} />\n}\n\nfunction DialogPortal({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Portal>) {\n  return <DialogPrimitive.Portal data-slot=\"dialog-portal\" {...props} />\n}\n\nfunction DialogClose({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Close>) {\n  return <DialogPrimitive.Close data-slot=\"dialog-close\" {...props} />\n}\n\nfunction DialogOverlay({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Overlay>) {\n  return (\n    <DialogPrimitive.Overlay\n      data-slot=\"dialog-overlay\"\n      className={cn(\n        \"data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction DialogContent({\n  className,\n  children,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Content>) {\n  return (\n    <DialogPortal data-slot=\"dialog-portal\">\n      <DialogOverlay />\n      <DialogPrimitive.Content\n        data-slot=\"dialog-content\"\n        className={cn(\n          \"bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg\",\n          className\n        )}\n        {...props}\n      >\n        {children}\n        <DialogPrimitive.Close className=\"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\">\n          <XIcon />\n          <span className=\"sr-only\">Close</span>\n        </DialogPrimitive.Close>\n      </DialogPrimitive.Content>\n    </DialogPortal>\n  )\n}\n\nfunction DialogHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"dialog-header\"\n      className={cn(\"flex flex-col gap-2 text-center sm:text-left\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction DialogFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"dialog-footer\"\n      className={cn(\n        \"flex flex-col-reverse gap-2 sm:flex-row sm:justify-end\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction DialogTitle({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Title>) {\n  return (\n    <DialogPrimitive.Title\n      data-slot=\"dialog-title\"\n      className={cn(\"text-lg leading-none font-semibold\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction DialogDescription({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Description>) {\n  return (\n    <DialogPrimitive.Description\n      data-slot=\"dialog-description\"\n      className={cn(\"text-muted-foreground text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Dialog,\n  DialogClose,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogOverlay,\n  DialogPortal,\n  DialogTitle,\n  DialogTrigger,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;AAGA;AACA;AAEA;AANA;;;;;AAQA,SAAS,OAAO,KAEoC;QAFpC,EACd,GAAG,OAC+C,GAFpC;IAGd,qBAAO,sYAAC,sXAAA,CAAA,OAAoB;QAAC,aAAU;QAAU,GAAG,KAAK;;;;;;AAC3D;KAJS;AAMT,SAAS,cAAc,KAEgC;QAFhC,EACrB,GAAG,OACkD,GAFhC;IAGrB,qBAAO,sYAAC,sXAAA,CAAA,UAAuB;QAAC,aAAU;QAAkB,GAAG,KAAK;;;;;;AACtE;MAJS;AAMT,SAAS,aAAa,KAEgC;QAFhC,EACpB,GAAG,OACiD,GAFhC;IAGpB,qBAAO,sYAAC,sXAAA,CAAA,SAAsB;QAAC,aAAU;QAAiB,GAAG,KAAK;;;;;;AACpE;MAJS;AAMT,SAAS,YAAY,KAEgC;QAFhC,EACnB,GAAG,OACgD,GAFhC;IAGnB,qBAAO,sYAAC,sXAAA,CAAA,QAAqB;QAAC,aAAU;QAAgB,GAAG,KAAK;;;;;;AAClE;MAJS;AAMT,SAAS,cAAc,KAGgC;QAHhC,EACrB,SAAS,EACT,GAAG,OACkD,GAHhC;IAIrB,qBACE,sYAAC,sXAAA,CAAA,UAAuB;QACtB,aAAU;QACV,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,0JACA;QAED,GAAG,KAAK;;;;;;AAGf;MAdS;AAgBT,SAAS,cAAc,KAIgC;QAJhC,EACrB,SAAS,EACT,QAAQ,EACR,GAAG,OACkD,GAJhC;IAKrB,qBACE,sYAAC;QAAa,aAAU;;0BACtB,sYAAC;;;;;0BACD,sYAAC,sXAAA,CAAA,UAAuB;gBACtB,aAAU;gBACV,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,+WACA;gBAED,GAAG,KAAK;;oBAER;kCACD,sYAAC,sXAAA,CAAA,QAAqB;wBAAC,WAAU;;0CAC/B,sYAAC,uRAAA,CAAA,QAAK;;;;;0CACN,sYAAC;gCAAK,WAAU;0CAAU;;;;;;;;;;;;;;;;;;;;;;;;AAKpC;MAxBS;AA0BT,SAAS,aAAa,KAAoD;QAApD,EAAE,SAAS,EAAE,GAAG,OAAoC,GAApD;IACpB,qBACE,sYAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,gDAAgD;QAC7D,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,aAAa,KAAoD;QAApD,EAAE,SAAS,EAAE,GAAG,OAAoC,GAApD;IACpB,qBACE,sYAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,0DACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,YAAY,KAGgC;QAHhC,EACnB,SAAS,EACT,GAAG,OACgD,GAHhC;IAInB,qBACE,sYAAC,sXAAA,CAAA,QAAqB;QACpB,aAAU;QACV,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,sCAAsC;QACnD,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,kBAAkB,KAGgC;QAHhC,EACzB,SAAS,EACT,GAAG,OACsD,GAHhC;IAIzB,qBACE,sYAAC,sXAAA,CAAA,cAA2B;QAC1B,aAAU;QACV,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;MAXS","debugId":null}},
    {"offset": {"line": 624, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/deer/web/src/components/ui/tabs.tsx"],"sourcesContent":["// Copyright (c) 2025 Bytedance Ltd. and/or its affiliates\n// SPDX-License-Identifier: MIT\n\n\"use client\"\n\nimport * as React from \"react\"\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\n\nimport { cn } from \"~/lib/utils\"\n\nfunction Tabs({\n  className,\n  ...props\n}: React.ComponentProps<typeof TabsPrimitive.Root>) {\n  return (\n    <TabsPrimitive.Root\n      data-slot=\"tabs\"\n      className={cn(\"flex flex-col gap-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction TabsList({\n  className,\n  ...props\n}: React.ComponentProps<typeof TabsPrimitive.List>) {\n  return (\n    <TabsPrimitive.List\n      data-slot=\"tabs-list\"\n      className={cn(\n        \"bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction TabsTrigger({\n  className,\n  ...props\n}: React.ComponentProps<typeof TabsPrimitive.Trigger>) {\n  return (\n    <TabsPrimitive.Trigger\n      data-slot=\"tabs-trigger\"\n      className={cn(\n        \"data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction TabsContent({\n  className,\n  ...props\n}: React.ComponentProps<typeof TabsPrimitive.Content>) {\n  return (\n    <TabsPrimitive.Content\n      data-slot=\"tabs-content\"\n      className={cn(\"flex-1 outline-none\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n"],"names":[],"mappings":"AAAA,0DAA0D;AAC1D,+BAA+B;;;;;;;;AAK/B;AAEA;AALA;;;;AAOA,SAAS,KAAK,KAGoC;QAHpC,EACZ,SAAS,EACT,GAAG,OAC6C,GAHpC;IAIZ,qBACE,sYAAC,uXAAA,CAAA,OAAkB;QACjB,aAAU;QACV,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,uBAAuB;QACpC,GAAG,KAAK;;;;;;AAGf;KAXS;AAaT,SAAS,SAAS,KAGgC;QAHhC,EAChB,SAAS,EACT,GAAG,OAC6C,GAHhC;IAIhB,qBACE,sYAAC,uXAAA,CAAA,OAAkB;QACjB,aAAU;QACV,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,uGACA;QAED,GAAG,KAAK;;;;;;AAGf;MAdS;AAgBT,SAAS,YAAY,KAGgC;QAHhC,EACnB,SAAS,EACT,GAAG,OACgD,GAHhC;IAInB,qBACE,sYAAC,uXAAA,CAAA,UAAqB;QACpB,aAAU;QACV,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,mqBACA;QAED,GAAG,KAAK;;;;;;AAGf;MAdS;AAgBT,SAAS,YAAY,KAGgC;QAHhC,EACnB,SAAS,EACT,GAAG,OACgD,GAHhC;IAInB,qBACE,sYAAC,uXAAA,CAAA,UAAqB;QACpB,aAAU;QACV,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,uBAAuB;QACpC,GAAG,KAAK;;;;;;AAGf;MAXS","debugId":null}},
    {"offset": {"line": 706, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/deer/web/src/env.js"],"sourcesContent":["// Copyright (c) 2025 Bytedance Ltd. and/or its affiliates\n// SPDX-License-Identifier: MIT\n\nimport { createEnv } from \"@t3-oss/env-nextjs\";\nimport { z } from \"zod\";\n\nexport const env = createEnv({\n  /**\n   * Specify your server-side environment variables schema here. This way you can ensure the app\n   * isn't built with invalid env vars.\n   */\n  server: {\n    NODE_ENV: z.enum([\"development\", \"test\", \"production\"]),\n    AMPLITUDE_API_KEY: z.string().optional(),\n    GITHUB_OAUTH_TOKEN: z.string().optional(),\n  },\n\n  /**\n   * Specify your client-side environment variables schema here. This way you can ensure the app\n   * isn't built with invalid env vars. To expose them to the client, prefix them with\n   * `NEXT_PUBLIC_`.\n   */\n  client: {\n    NEXT_PUBLIC_API_URL: z.string().optional(),\n    NEXT_PUBLIC_STATIC_WEBSITE_ONLY: z.boolean().optional(),\n    NEXT_PUBLIC_MAX_STREAM_BUFFER_SIZE: z.coerce.number().int().positive().optional(),\n  },\n\n  /**\n   * You can't destruct `process.env` as a regular object in the Next.js edge runtimes (e.g.\n   * middlewares) or client-side so we need to destruct manually.\n   */\n  runtimeEnv: {\n    NODE_ENV: process.env.NODE_ENV,\n    NEXT_PUBLIC_API_URL: process.env.NEXT_PUBLIC_API_URL,\n    NEXT_PUBLIC_STATIC_WEBSITE_ONLY:\n      process.env.NEXT_PUBLIC_STATIC_WEBSITE_ONLY === \"true\",\n    NEXT_PUBLIC_MAX_STREAM_BUFFER_SIZE: process.env.NEXT_PUBLIC_MAX_STREAM_BUFFER_SIZE,\n    AMPLITUDE_API_KEY: process.env.AMPLITUDE_API_KEY,\n    GITHUB_OAUTH_TOKEN: process.env.GITHUB_OAUTH_TOKEN,\n  },\n  /**\n   * Run `build` or `dev` with `SKIP_ENV_VALIDATION` to skip env validation. This is especially\n   * useful for Docker builds.\n   */\n  skipValidation: !!process.env.SKIP_ENV_VALIDATION,\n  /**\n   * Makes it so that empty strings are treated as undefined. `SOME_VAR: z.string()` and\n   * `SOME_VAR=''` will throw an error.\n   */\n  emptyStringAsUndefined: true,\n});\n"],"names":[],"mappings":"AAAA,0DAA0D;AAC1D,+BAA+B;;;;AAgCjB;AA9Bd;AACA;;;AAEO,MAAM,MAAM,CAAA,GAAA,wRAAA,CAAA,YAAS,AAAD,EAAE;IAC3B;;;GAGC,GACD,QAAQ;QACN,UAAU,wLAAA,CAAA,IAAC,CAAC,IAAI,CAAC;YAAC;YAAe;YAAQ;SAAa;QACtD,mBAAmB,wLAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ;QACtC,oBAAoB,wLAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ;IACzC;IAEA;;;;GAIC,GACD,QAAQ;QACN,qBAAqB,wLAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ;QACxC,iCAAiC,wLAAA,CAAA,IAAC,CAAC,OAAO,GAAG,QAAQ;QACrD,oCAAoC,wLAAA,CAAA,IAAC,CAAC,MAAM,CAAC,MAAM,GAAG,GAAG,GAAG,QAAQ,GAAG,QAAQ;IACjF;IAEA;;;GAGC,GACD,YAAY;QACV,QAAQ;QACR,mBAAmB;QACnB,iCACE,yWAAA,CAAA,UAAO,CAAC,GAAG,CAAC,+BAA+B,KAAK;QAClD,oCAAoC,yWAAA,CAAA,UAAO,CAAC,GAAG,CAAC,kCAAkC;QAClF,mBAAmB,yWAAA,CAAA,UAAO,CAAC,GAAG,CAAC,iBAAiB;QAChD,oBAAoB,yWAAA,CAAA,UAAO,CAAC,GAAG,CAAC,kBAAkB;IACpD;IACA;;;GAGC,GACD,gBAAgB,CAAC,CAAC,yWAAA,CAAA,UAAO,CAAC,GAAG,CAAC,mBAAmB;IACjD;;;GAGC,GACD,wBAAwB;AAC1B","debugId":null}},
    {"offset": {"line": 767, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/deer/web/src/core/replay/get-replay-id.ts"],"sourcesContent":["// Copyright (c) 2025 Bytedance Ltd. and/or its affiliates\n// SPDX-License-Identifier: MIT\n\nexport function extractReplayIdFromSearchParams(params: string) {\n  const urlParams = new URLSearchParams(params);\n  if (urlParams.has(\"replay\")) {\n    return urlParams.get(\"replay\");\n  }\n  return null;\n}\n"],"names":[],"mappings":"AAAA,0DAA0D;AAC1D,+BAA+B;;;;AAExB,SAAS,gCAAgC,MAAc;IAC5D,MAAM,YAAY,IAAI,gBAAgB;IACtC,IAAI,UAAU,GAAG,CAAC,WAAW;QAC3B,OAAO,UAAU,GAAG,CAAC;IACvB;IACA,OAAO;AACT","debugId":null}},
    {"offset": {"line": 788, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/deer/web/src/core/replay/hooks.ts"],"sourcesContent":["// Copyright (c) 2025 Bytedance Ltd. and/or its affiliates\n// SPDX-License-Identifier: MIT\n\nimport { useSearchParams } from \"next/navigation\";\nimport { useMemo } from \"react\";\n\nimport { env } from \"~/env\";\n\nimport { extractReplayIdFromSearchParams } from \"./get-replay-id\";\n\nexport function useReplay() {\n  const searchParams = useSearchParams();\n  const replayId = useMemo(\n    () => extractReplayIdFromSearchParams(searchParams.toString()),\n    [searchParams],\n  );\n  return {\n    isReplay: replayId != null || env.NEXT_PUBLIC_STATIC_WEBSITE_ONLY,\n    replayId,\n  };\n}\n"],"names":[],"mappings":"AAAA,0DAA0D;AAC1D,+BAA+B;;;;AAE/B;AACA;AAEA;AAEA;;;;;;AAEO,SAAS;;IACd,MAAM,eAAe,CAAA,GAAA,8UAAA,CAAA,kBAAe,AAAD;IACnC,MAAM,WAAW,CAAA,GAAA,sWAAA,CAAA,UAAO,AAAD;uCACrB,IAAM,CAAA,GAAA,+IAAA,CAAA,kCAA+B,AAAD,EAAE,aAAa,QAAQ;sCAC3D;QAAC;KAAa;IAEhB,OAAO;QACL,UAAU,YAAY,QAAQ,6GAAA,CAAA,MAAG,CAAC,+BAA+B;QACjE;IACF;AACF;GAVgB;;QACO,8UAAA,CAAA,kBAAe","debugId":null}},
    {"offset": {"line": 829, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/deer/web/src/core/replay/index.ts"],"sourcesContent":["// Copyright (c) 2025 Bytedance Ltd. and/or its affiliates\n// SPDX-License-Identifier: MIT\n\nexport * from \"./hooks\";\n"],"names":[],"mappings":"AAAA,0DAA0D;AAC1D,+BAA+B;;AAE/B","debugId":null}},
    {"offset": {"line": 850, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/deer/web/src/core/sse/fetch-stream.ts"],"sourcesContent":["// Copyright (c) 2025 Bytedance Ltd. and/or its affiliates\n// SPDX-License-Identifier: MIT\n\nimport { env } from \"~/env\";\n\nimport { type StreamEvent } from \"./StreamEvent\";\n\nexport async function* fetchStream(\n  url: string,\n  init: RequestInit,\n): AsyncIterable<StreamEvent> {\n  const response = await fetch(url, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      \"Cache-Control\": \"no-cache\",\n    },\n    ...init,\n  });\n  if (response.status !== 200) {\n    throw new Error(`Failed to fetch from ${url}: ${response.status}`);\n  }\n  // Read from response body, event by event. An event always ends with a '\\n\\n'.\n  const reader = response.body\n    ?.pipeThrough(new TextDecoderStream())\n    .getReader();\n  if (!reader) {\n    throw new Error(\"Response body is not readable\");\n  }\n\n  try {\n    let buffer = \"\";\n    // Use configurable buffer size from environment, default to 1MB (1048576 bytes)\n    const MAX_BUFFER_SIZE = env.NEXT_PUBLIC_MAX_STREAM_BUFFER_SIZE ?? (1024 * 1024);\n\n    while (true) {\n      const { done, value } = await reader.read();\n      if (done) {\n        // Handle remaining buffer data\n        if (buffer.trim()) {\n          const event = parseEvent(buffer.trim());\n          if (event) {\n            yield event;\n          }\n        }\n        break;\n      }\n\n      buffer += value;\n\n      // Check buffer size to avoid memory overflow\n      if (buffer.length > MAX_BUFFER_SIZE) {\n        throw new Error(\n          `Buffer overflow - received ${(buffer.length / 1024 / 1024).toFixed(2)}MB of data without proper event boundaries. ` +\n          `Max buffer size is ${(MAX_BUFFER_SIZE / 1024 / 1024).toFixed(2)}MB. ` +\n          `You can increase this by setting NEXT_PUBLIC_MAX_STREAM_BUFFER_SIZE environment variable.`\n        );\n      }\n\n      let newlineIndex;\n      while ((newlineIndex = buffer.indexOf(\"\\n\\n\")) !== -1) {\n        const chunk = buffer.slice(0, newlineIndex);\n        buffer = buffer.slice(newlineIndex + 2);\n\n        if (chunk.trim()) {\n          const event = parseEvent(chunk);\n          if (event) {\n            yield event;\n          }\n        }\n      }\n    }\n  } finally {\n    reader.releaseLock(); // Release the reader lock\n  }\n\n}\n\nfunction parseEvent(chunk: string) {\n  let resultEvent = \"message\";\n  let resultData: string | null = null;\n  for (const line of chunk.split(\"\\n\")) {\n    const pos = line.indexOf(\": \");\n    if (pos === -1) {\n      continue;\n    }\n    const key = line.slice(0, pos);\n    const value = line.slice(pos + 2);\n    if (key === \"event\") {\n      resultEvent = value;\n    } else if (key === \"data\") {\n      resultData = value;\n    }\n  }\n  if (resultEvent === \"message\" && resultData === null) {\n    return undefined;\n  }\n  return {\n    event: resultEvent,\n    data: resultData,\n  } as StreamEvent;\n}\n"],"names":[],"mappings":"AAAA,0DAA0D;AAC1D,+BAA+B;;;;AAE/B;;AAIO,gBAAgB,YACrB,GAAW,EACX,IAAiB;QAcF;IAZf,MAAM,WAAW,MAAM,MAAM,KAAK;QAChC,QAAQ;QACR,SAAS;YACP,gBAAgB;YAChB,iBAAiB;QACnB;QACA,GAAG,IAAI;IACT;IACA,IAAI,SAAS,MAAM,KAAK,KAAK;QAC3B,MAAM,IAAI,MAAM,AAAC,wBAA+B,OAAR,KAAI,MAAoB,OAAhB,SAAS,MAAM;IACjE;IACA,+EAA+E;IAC/E,MAAM,UAAS,iBAAA,SAAS,IAAI,cAAb,qCAAA,eACX,WAAW,CAAC,IAAI,qBACjB,SAAS;IACZ,IAAI,CAAC,QAAQ;QACX,MAAM,IAAI,MAAM;IAClB;IAEA,IAAI;QACF,IAAI,SAAS;YAEW;QADxB,gFAAgF;QAChF,MAAM,kBAAkB,CAAA,0CAAA,6GAAA,CAAA,MAAG,CAAC,kCAAkC,cAAtC,qDAAA,0CAA2C,OAAO;QAE1E,MAAO,KAAM;YACX,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,OAAO,IAAI;YACzC,IAAI,MAAM;gBACR,+BAA+B;gBAC/B,IAAI,OAAO,IAAI,IAAI;oBACjB,MAAM,QAAQ,WAAW,OAAO,IAAI;oBACpC,IAAI,OAAO;wBACT,MAAM;oBACR;gBACF;gBACA;YACF;YAEA,UAAU;YAEV,6CAA6C;YAC7C,IAAI,OAAO,MAAM,GAAG,iBAAiB;gBACnC,MAAM,IAAI,MACR,AAAC,8BAAsE,OAAzC,CAAC,OAAO,MAAM,GAAG,OAAO,IAAI,EAAE,OAAO,CAAC,IAAG,kDACvE,AAAC,sBAAgE,OAA3C,CAAC,kBAAkB,OAAO,IAAI,EAAE,OAAO,CAAC,IAAG,UAChE;YAEL;YAEA,IAAI;YACJ,MAAO,CAAC,eAAe,OAAO,OAAO,CAAC,OAAO,MAAM,CAAC,EAAG;gBACrD,MAAM,QAAQ,OAAO,KAAK,CAAC,GAAG;gBAC9B,SAAS,OAAO,KAAK,CAAC,eAAe;gBAErC,IAAI,MAAM,IAAI,IAAI;oBAChB,MAAM,QAAQ,WAAW;oBACzB,IAAI,OAAO;wBACT,MAAM;oBACR;gBACF;YACF;QACF;IACF,SAAU;QACR,OAAO,WAAW,IAAI,0BAA0B;IAClD;AAEF;AAEA,SAAS,WAAW,KAAa;IAC/B,IAAI,cAAc;IAClB,IAAI,aAA4B;IAChC,KAAK,MAAM,QAAQ,MAAM,KAAK,CAAC,MAAO;QACpC,MAAM,MAAM,KAAK,OAAO,CAAC;QACzB,IAAI,QAAQ,CAAC,GAAG;YACd;QACF;QACA,MAAM,MAAM,KAAK,KAAK,CAAC,GAAG;QAC1B,MAAM,QAAQ,KAAK,KAAK,CAAC,MAAM;QAC/B,IAAI,QAAQ,SAAS;YACnB,cAAc;QAChB,OAAO,IAAI,QAAQ,QAAQ;YACzB,aAAa;QACf;IACF;IACA,IAAI,gBAAgB,aAAa,eAAe,MAAM;QACpD,OAAO;IACT;IACA,OAAO;QACL,OAAO;QACP,MAAM;IACR;AACF","debugId":null}},
    {"offset": {"line": 946, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/deer/web/src/core/sse/StreamEvent.ts"],"sourcesContent":["// Copyright (c) 2025 Bytedance Ltd. and/or its affiliates\n// SPDX-License-Identifier: MIT\n\nexport interface StreamEvent {\n  event: string;\n  data: string;\n}\n"],"names":[],"mappings":"AAAA,0DAA0D;AAC1D,+BAA+B","debugId":null}},
    {"offset": {"line": 959, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/deer/web/src/core/sse/index.ts"],"sourcesContent":["// Copyright (c) 2025 Bytedance Ltd. and/or its affiliates\n// SPDX-License-Identifier: MIT\n\nexport * from \"./fetch-stream\";\nexport * from \"./StreamEvent\";\n"],"names":[],"mappings":"AAAA,0DAA0D;AAC1D,+BAA+B;;AAE/B;AACA","debugId":null}},
    {"offset": {"line": 983, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/deer/web/src/core/utils/time.ts"],"sourcesContent":["// Copyright (c) 2025 Bytedance Ltd. and/or its affiliates\n// SPDX-License-Identifier: MIT\n\nexport function sleep(ms: number) {\n  return new Promise((resolve) => setTimeout(resolve, ms));\n}\n"],"names":[],"mappings":"AAAA,0DAA0D;AAC1D,+BAA+B;;;;AAExB,SAAS,MAAM,EAAU;IAC9B,OAAO,IAAI,QAAQ,CAAC,UAAY,WAAW,SAAS;AACtD","debugId":null}},
    {"offset": {"line": 1000, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/deer/web/src/core/utils/json.ts"],"sourcesContent":["import { parse } from \"best-effort-json-parser\";\n\n/**\n * Extract valid JSON from content that may have extra tokens.\n * Finds the last closing brace/bracket that could be valid JSON.\n */\nfunction extractValidJSON(content: string): string {\n  let braceCount = 0;\n  let bracketCount = 0;\n  let inString = false;\n  let escapeNext = false;\n  let lastValidEnd = -1;\n\n  for (let i = 0; i < content.length; i++) {\n    const char = content[i];\n    \n    if (escapeNext) {\n      escapeNext = false;\n      continue;\n    }\n    \n    if (char === \"\\\\\") {\n      escapeNext = true;\n      continue;\n    }\n    \n    if (char === '\"') {\n      inString = !inString;\n      continue;\n    }\n    \n    if (inString) {\n      continue;\n    }\n    \n    if (char === \"{\") {\n      braceCount++;\n    } else if (char === \"}\") {\n      if (braceCount > 0) {\n        braceCount--;\n        if (braceCount === 0) {\n          lastValidEnd = i;\n        }\n      }\n    } else if (char === \"[\") {\n      bracketCount++;\n    } else if (char === \"]\") {\n      if (bracketCount > 0) {\n        bracketCount--;\n        if (bracketCount === 0) {\n          lastValidEnd = i;\n        }\n      }\n    }\n  }\n  \n  if (lastValidEnd > 0) {\n    return content.substring(0, lastValidEnd + 1);\n  }\n  \n  return content;\n}\n\nexport function parseJSON<T>(json: string | null | undefined, fallback: T) {\n  if (!json) {\n    return fallback;\n  }\n  try {\n    let raw = json\n      .trim()\n      .replace(/^```json\\s*/, \"\")\n      .replace(/^```js\\s*/, \"\")\n      .replace(/^```ts\\s*/, \"\")\n      .replace(/^```plaintext\\s*/, \"\")\n      .replace(/^```\\s*/, \"\")\n      .replace(/\\s*```$/, \"\");\n    \n    // First attempt: try to extract valid JSON to remove extra tokens\n    if (raw.startsWith(\"{\") || raw.startsWith(\"[\")) {\n      raw = extractValidJSON(raw);\n    }\n    \n    // Parse the cleaned content\n    return parse(raw) as T;\n  } catch {\n    // Fallback: try to extract meaningful content from malformed JSON\n    // This is a last-resort attempt to salvage partial data\n    return fallback;\n  }\n}\n"],"names":[],"mappings":";;;AAAA;;AAEA;;;CAGC,GACD,SAAS,iBAAiB,OAAe;IACvC,IAAI,aAAa;IACjB,IAAI,eAAe;IACnB,IAAI,WAAW;IACf,IAAI,aAAa;IACjB,IAAI,eAAe,CAAC;IAEpB,IAAK,IAAI,IAAI,GAAG,IAAI,QAAQ,MAAM,EAAE,IAAK;QACvC,MAAM,OAAO,OAAO,CAAC,EAAE;QAEvB,IAAI,YAAY;YACd,aAAa;YACb;QACF;QAEA,IAAI,SAAS,MAAM;YACjB,aAAa;YACb;QACF;QAEA,IAAI,SAAS,KAAK;YAChB,WAAW,CAAC;YACZ;QACF;QAEA,IAAI,UAAU;YACZ;QACF;QAEA,IAAI,SAAS,KAAK;YAChB;QACF,OAAO,IAAI,SAAS,KAAK;YACvB,IAAI,aAAa,GAAG;gBAClB;gBACA,IAAI,eAAe,GAAG;oBACpB,eAAe;gBACjB;YACF;QACF,OAAO,IAAI,SAAS,KAAK;YACvB;QACF,OAAO,IAAI,SAAS,KAAK;YACvB,IAAI,eAAe,GAAG;gBACpB;gBACA,IAAI,iBAAiB,GAAG;oBACtB,eAAe;gBACjB;YACF;QACF;IACF;IAEA,IAAI,eAAe,GAAG;QACpB,OAAO,QAAQ,SAAS,CAAC,GAAG,eAAe;IAC7C;IAEA,OAAO;AACT;AAEO,SAAS,UAAa,IAA+B,EAAE,QAAW;IACvE,IAAI,CAAC,MAAM;QACT,OAAO;IACT;IACA,IAAI;QACF,IAAI,MAAM,KACP,IAAI,GACJ,OAAO,CAAC,eAAe,IACvB,OAAO,CAAC,aAAa,IACrB,OAAO,CAAC,aAAa,IACrB,OAAO,CAAC,oBAAoB,IAC5B,OAAO,CAAC,WAAW,IACnB,OAAO,CAAC,WAAW;QAEtB,kEAAkE;QAClE,IAAI,IAAI,UAAU,CAAC,QAAQ,IAAI,UAAU,CAAC,MAAM;YAC9C,MAAM,iBAAiB;QACzB;QAEA,4BAA4B;QAC5B,OAAO,CAAA,GAAA,iPAAA,CAAA,QAAK,AAAD,EAAE;IACf,EAAE,UAAM;QACN,kEAAkE;QAClE,wDAAwD;QACxD,OAAO;IACT;AACF","debugId":null}},
    {"offset": {"line": 1083, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/deer/web/src/core/utils/deep-clone.ts"],"sourcesContent":["// Copyright (c) 2025 Bytedance Ltd. and/or its affiliates\n// SPDX-License-Identifier: MIT\n\nexport function deepClone<T>(value: T): T {\n  return JSON.parse(JSON.stringify(value));\n}\n"],"names":[],"mappings":"AAAA,0DAA0D;AAC1D,+BAA+B;;;;AAExB,SAAS,UAAa,KAAQ;IACnC,OAAO,KAAK,KAAK,CAAC,KAAK,SAAS,CAAC;AACnC","debugId":null}},
    {"offset": {"line": 1100, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/deer/web/src/core/utils/index.ts"],"sourcesContent":["// Copyright (c) 2025 Bytedance Ltd. and/or its affiliates\n// SPDX-License-Identifier: MIT\n\nexport * from \"./time\";\nexport * from \"./json\";\nexport * from \"./deep-clone\";\n"],"names":[],"mappings":"AAAA,0DAA0D;AAC1D,+BAA+B;;AAE/B;AACA;AACA","debugId":null}},
    {"offset": {"line": 1127, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/deer/web/src/core/api/resolve-service-url.ts"],"sourcesContent":["// Copyright (c) 2025 Bytedance Ltd. and/or its affiliates\n// SPDX-License-Identifier: MIT\n\nimport { env } from \"~/env\";\n\nexport function resolveServiceURL(path: string) {\n  let BASE_URL = env.NEXT_PUBLIC_API_URL ?? \"http://localhost:8001/api/\";\n  if (!BASE_URL.endsWith(\"/\")) {\n    BASE_URL += \"/\";\n  }\n  return new URL(path, BASE_URL).toString();\n}\n"],"names":[],"mappings":"AAAA,0DAA0D;AAC1D,+BAA+B;;;;AAE/B;;AAEO,SAAS,kBAAkB,IAAY;QAC7B;IAAf,IAAI,WAAW,CAAA,2BAAA,6GAAA,CAAA,MAAG,CAAC,mBAAmB,cAAvB,sCAAA,2BAA2B;IAC1C,IAAI,CAAC,SAAS,QAAQ,CAAC,MAAM;QAC3B,YAAY;IACd;IACA,OAAO,IAAI,IAAI,MAAM,UAAU,QAAQ;AACzC","debugId":null}},
    {"offset": {"line": 1151, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/deer/web/src/core/api/chat.ts"],"sourcesContent":["// Copyright (c) 2025 Bytedance Ltd. and/or its affiliates\n// SPDX-License-Identifier: MIT\n\nimport { env } from \"~/env\";\n\nimport type { MCPServerMetadata } from \"../mcp\";\nimport type { Resource } from \"../messages\";\nimport { extractReplayIdFromSearchParams } from \"../replay/get-replay-id\";\nimport { fetchStream } from \"../sse\";\nimport { sleep } from \"../utils\";\n\nimport { resolveServiceURL } from \"./resolve-service-url\";\nimport type { ChatEvent } from \"./types\";\n\nfunction getLocaleFromCookie(): string {\n  if (typeof document === \"undefined\") return \"en-US\";\n  \n  // Map frontend locale codes to backend locale format\n  // Frontend uses: \"en\", \"zh\"\n  // Backend expects: \"en-US\", \"zh-CN\"\n  const LOCALE_MAP = { \"en\": \"en-US\", \"zh\": \"zh-CN\" } as const;\n  \n  // Initialize to raw locale format (matches cookie format)\n  let rawLocale = \"en\";\n  \n  // Read from cookie\n  const cookies = document.cookie.split(\";\");\n  for (const cookie of cookies) {\n    const [name, value] = cookie.trim().split(\"=\");\n    if (name === \"NEXT_LOCALE\" && value) {\n      rawLocale = decodeURIComponent(value);\n      break;\n    }\n  }\n  \n  // Map raw locale to backend format, fallback to en-US if unmapped\n  return LOCALE_MAP[rawLocale as keyof typeof LOCALE_MAP] ?? \"en-US\";\n}\n\nexport async function* chatStream(\n  userMessage: string,\n  params: {\n    thread_id: string;\n    resources?: Array<Resource>;\n    auto_accepted_plan: boolean;\n    enable_clarification?: boolean;\n    max_clarification_rounds?: number;\n    max_plan_iterations: number;\n    max_step_num: number;\n    max_search_results?: number;\n    interrupt_feedback?: string;\n    enable_deep_thinking?: boolean;\n    enable_background_investigation: boolean;\n    report_style?: \"academic\" | \"popular_science\" | \"news\" | \"social_media\" | \"strategic_investment\";\n    mcp_settings?: {\n      servers: Record<\n        string,\n        MCPServerMetadata & {\n          enabled_tools: string[];\n          add_to_agents: string[];\n        }\n      >;\n    };\n  },\n  options: { abortSignal?: AbortSignal } = {},\n) {\n  if (\n    env.NEXT_PUBLIC_STATIC_WEBSITE_ONLY ||\n    location.search.includes(\"mock\") ||\n    location.search.includes(\"replay=\")\n  ) \n    return yield* chatReplayStream(userMessage, params, options);\n  \n  try{\n    const locale = getLocaleFromCookie();\n    const stream = fetchStream(resolveServiceURL(\"chat/stream\"), {\n      body: JSON.stringify({\n        messages: [{ role: \"user\", content: userMessage }],\n        locale,\n        ...params,\n      }),\n      signal: options.abortSignal,\n    });\n    \n    for await (const event of stream) {\n      yield {\n        type: event.event,\n        data: JSON.parse(event.data),\n      } as ChatEvent;\n    }\n  }catch(e){\n    console.error(e);\n  }\n}\n\nasync function* chatReplayStream(\n  userMessage: string,\n  params: {\n    thread_id: string;\n    auto_accepted_plan: boolean;\n    max_plan_iterations: number;\n    max_step_num: number;\n    max_search_results?: number;\n    interrupt_feedback?: string;\n  } = {\n    thread_id: \"__mock__\",\n    auto_accepted_plan: false,\n    max_plan_iterations: 3,\n    max_step_num: 1,\n    max_search_results: 3,\n    interrupt_feedback: undefined,\n  },\n  options: { abortSignal?: AbortSignal } = {},\n): AsyncIterable<ChatEvent> {\n  const urlParams = new URLSearchParams(window.location.search);\n  let replayFilePath = \"\";\n  if (urlParams.has(\"mock\")) {\n    if (urlParams.get(\"mock\")) {\n      replayFilePath = `/mock/${urlParams.get(\"mock\")!}.txt`;\n    } else {\n      if (params.interrupt_feedback === \"accepted\") {\n        replayFilePath = \"/mock/final-answer.txt\";\n      } else if (params.interrupt_feedback === \"edit_plan\") {\n        replayFilePath = \"/mock/re-plan.txt\";\n      } else {\n        replayFilePath = \"/mock/first-plan.txt\";\n      }\n    }\n    fastForwardReplaying = true;\n  } else {\n    const replayId = extractReplayIdFromSearchParams(window.location.search);\n    if (replayId) {\n      replayFilePath = `/replay/${replayId}.txt`;\n    } else {\n      // Fallback to a default replay\n      replayFilePath = `/replay/eiffel-tower-vs-tallest-building.txt`;\n    }\n  }\n  const text = await fetchReplay(replayFilePath, {\n    abortSignal: options.abortSignal,\n  });\n  const normalizedText = text.replace(/\\r\\n/g, \"\\n\");\n  const chunks = normalizedText.split(\"\\n\\n\");\n  for (const chunk of chunks) {\n    const [eventRaw, dataRaw] = chunk.split(\"\\n\") as [string, string];\n    const [, event] = eventRaw.split(\"event: \", 2) as [string, string];\n    const [, data] = dataRaw.split(\"data: \", 2) as [string, string];\n\n    try {\n      const chatEvent = {\n        type: event,\n        data: JSON.parse(data),\n      } as ChatEvent;\n      if (chatEvent.type === \"message_chunk\") {\n        if (!chatEvent.data.finish_reason) {\n          await sleepInReplay(50);\n        }\n      } else if (chatEvent.type === \"tool_call_result\") {\n        await sleepInReplay(500);\n      }\n      yield chatEvent;\n      if (chatEvent.type === \"tool_call_result\") {\n        await sleepInReplay(800);\n      } else if (chatEvent.type === \"message_chunk\") {\n        if (chatEvent.data.role === \"user\") {\n          await sleepInReplay(500);\n        }\n      }\n    } catch (e) {\n      console.error(e);\n    }\n  }\n}\n\nconst replayCache = new Map<string, string>();\nexport async function fetchReplay(\n  url: string,\n  options: { abortSignal?: AbortSignal } = {},\n) {\n  if (replayCache.has(url)) {\n    return replayCache.get(url)!;\n  }\n  const res = await fetch(url, {\n    signal: options.abortSignal,\n  });\n  if (!res.ok) {\n    throw new Error(`Failed to fetch replay: ${res.statusText}`);\n  }\n  const text = await res.text();\n  replayCache.set(url, text);\n  return text;\n}\n\nexport async function fetchReplayTitle() {\n  const res = chatReplayStream(\n    \"\",\n    {\n      thread_id: \"__mock__\",\n      auto_accepted_plan: false,\n      max_plan_iterations: 3,\n      max_step_num: 1,\n      max_search_results: 3,\n    },\n    {},\n  );\n  for await (const event of res) {\n    if (event.type === \"message_chunk\") {\n      return event.data.content;\n    }\n  }\n}\n\nexport async function sleepInReplay(ms: number) {\n  if (fastForwardReplaying) {\n    await sleep(0);\n  } else {\n    await sleep(ms);\n  }\n}\n\nlet fastForwardReplaying = false;\nexport function fastForwardReplay(value: boolean) {\n  fastForwardReplaying = value;\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1341, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/deer/web/src/core/api/mcp.ts"],"sourcesContent":["// Copyright (c) 2025 Bytedance Ltd. and/or its affiliates\n// SPDX-License-Identifier: MIT\n\nimport type { SimpleMCPServerMetadata } from \"../mcp\";\n\nimport { resolveServiceURL } from \"./resolve-service-url\";\n\nexport async function queryMCPServerMetadata(config: SimpleMCPServerMetadata, signal?: AbortSignal) {\n  const response = await fetch(resolveServiceURL(\"mcp/server/metadata\"), {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify(config),\n    signal,\n  });\n  if (!response.ok) {\n    throw new Error(`HTTP error! status: ${response.status}`);\n  }\n  return response.json();\n}\n"],"names":[],"mappings":"AAAA,0DAA0D;AAC1D,+BAA+B;;;;AAI/B;;AAEO,eAAe,uBAAuB,MAA+B,EAAE,MAAoB;IAChG,MAAM,WAAW,MAAM,MAAM,CAAA,GAAA,kJAAA,CAAA,oBAAiB,AAAD,EAAE,wBAAwB;QACrE,QAAQ;QACR,SAAS;YACP,gBAAgB;QAClB;QACA,MAAM,KAAK,SAAS,CAAC;QACrB;IACF;IACA,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,MAAM,IAAI,MAAM,AAAC,uBAAsC,OAAhB,SAAS,MAAM;IACxD;IACA,OAAO,SAAS,IAAI;AACtB","debugId":null}},
    {"offset": {"line": 1371, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/deer/web/src/core/api/podcast.ts"],"sourcesContent":["// Copyright (c) 2025 Bytedance Ltd. and/or its affiliates\n// SPDX-License-Identifier: MIT\n\nimport { resolveServiceURL } from \"./resolve-service-url\";\n\nexport async function generatePodcast(content: string) {\n  const response = await fetch(resolveServiceURL(\"podcast/generate\"), {\n    method: \"post\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify({ content }),\n  });\n  if (!response.ok) {\n    throw new Error(`HTTP error! status: ${response.status}`);\n  }\n  const arrayBuffer = await response.arrayBuffer();\n  const blob = new Blob([arrayBuffer], { type: \"audio/mp3\" });\n  const audioUrl = URL.createObjectURL(blob);\n  return audioUrl;\n}\n"],"names":[],"mappings":"AAAA,0DAA0D;AAC1D,+BAA+B;;;;AAE/B;;AAEO,eAAe,gBAAgB,OAAe;IACnD,MAAM,WAAW,MAAM,MAAM,CAAA,GAAA,kJAAA,CAAA,oBAAiB,AAAD,EAAE,qBAAqB;QAClE,QAAQ;QACR,SAAS;YACP,gBAAgB;QAClB;QACA,MAAM,KAAK,SAAS,CAAC;YAAE;QAAQ;IACjC;IACA,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,MAAM,IAAI,MAAM,AAAC,uBAAsC,OAAhB,SAAS,MAAM;IACxD;IACA,MAAM,cAAc,MAAM,SAAS,WAAW;IAC9C,MAAM,OAAO,IAAI,KAAK;QAAC;KAAY,EAAE;QAAE,MAAM;IAAY;IACzD,MAAM,WAAW,IAAI,eAAe,CAAC;IACrC,OAAO;AACT","debugId":null}},
    {"offset": {"line": 1409, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/deer/web/src/core/api/prompt-enhancer.ts"],"sourcesContent":["// Copyright (c) 2025 Bytedance Ltd. and/or its affiliates\n// SPDX-License-Identifier: MIT\n\nimport { resolveServiceURL } from \"./resolve-service-url\";\n\nexport interface EnhancePromptRequest {\n  prompt: string;\n  context?: string;\n  report_style?: string;\n}\n\nexport interface EnhancePromptResponse {\n  enhanced_prompt: string;\n}\n\nexport async function enhancePrompt(\n  request: EnhancePromptRequest,\n): Promise<string> {\n  const response = await fetch(resolveServiceURL(\"prompt/enhance\"), {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify(request),\n  });\n\n  if (!response.ok) {\n    throw new Error(`HTTP error! status: ${response.status}`);\n  }\n\n  const data = await response.json();\n  console.log(\"Raw API response:\", data); // Debug log\n\n  // The backend now returns the enhanced prompt directly in the result field\n  let enhancedPrompt = data.result;\n\n  // If the result is somehow still a JSON object, extract the enhanced_prompt\n  if (typeof enhancedPrompt === \"object\" && enhancedPrompt.enhanced_prompt) {\n    enhancedPrompt = enhancedPrompt.enhanced_prompt;\n  }\n\n  // If the result is a JSON string, try to parse it\n  if (typeof enhancedPrompt === \"string\") {\n    try {\n      const parsed = JSON.parse(enhancedPrompt);\n      if (parsed.enhanced_prompt) {\n        enhancedPrompt = parsed.enhanced_prompt;\n      }\n    } catch {\n      // If parsing fails, use the string as-is (which is what we want)\n      console.log(\"Using enhanced prompt as-is:\", enhancedPrompt);\n    }\n  }\n\n  // Fallback to original prompt if something went wrong\n  if (!enhancedPrompt || enhancedPrompt.trim() === \"\") {\n    console.warn(\"No enhanced prompt received, using original\");\n    enhancedPrompt = request.prompt;\n  }\n\n  return enhancedPrompt;\n}\n"],"names":[],"mappings":"AAAA,0DAA0D;AAC1D,+BAA+B;;;;AAE/B;;AAYO,eAAe,cACpB,OAA6B;IAE7B,MAAM,WAAW,MAAM,MAAM,CAAA,GAAA,kJAAA,CAAA,oBAAiB,AAAD,EAAE,mBAAmB;QAChE,QAAQ;QACR,SAAS;YACP,gBAAgB;QAClB;QACA,MAAM,KAAK,SAAS,CAAC;IACvB;IAEA,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,MAAM,IAAI,MAAM,AAAC,uBAAsC,OAAhB,SAAS,MAAM;IACxD;IAEA,MAAM,OAAO,MAAM,SAAS,IAAI;IAChC,QAAQ,GAAG,CAAC,qBAAqB,OAAO,YAAY;IAEpD,2EAA2E;IAC3E,IAAI,iBAAiB,KAAK,MAAM;IAEhC,4EAA4E;IAC5E,IAAI,OAAO,mBAAmB,YAAY,eAAe,eAAe,EAAE;QACxE,iBAAiB,eAAe,eAAe;IACjD;IAEA,kDAAkD;IAClD,IAAI,OAAO,mBAAmB,UAAU;QACtC,IAAI;YACF,MAAM,SAAS,KAAK,KAAK,CAAC;YAC1B,IAAI,OAAO,eAAe,EAAE;gBAC1B,iBAAiB,OAAO,eAAe;YACzC;QACF,EAAE,UAAM;YACN,iEAAiE;YACjE,QAAQ,GAAG,CAAC,gCAAgC;QAC9C;IACF;IAEA,sDAAsD;IACtD,IAAI,CAAC,kBAAkB,eAAe,IAAI,OAAO,IAAI;QACnD,QAAQ,IAAI,CAAC;QACb,iBAAiB,QAAQ,MAAM;IACjC;IAEA,OAAO;AACT","debugId":null}},
    {"offset": {"line": 1463, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/deer/web/src/core/api/types.ts"],"sourcesContent":["// Copyright (c) 2025 Bytedance Ltd. and/or its affiliates\n// SPDX-License-Identifier: MIT\n\nimport type { Option } from \"../messages\";\n\n// Tool Calls\n\nexport interface ToolCall {\n  type: \"tool_call\";\n  id: string;\n  name: string;\n  args: Record<string, unknown>;\n}\n\nexport interface ToolCallChunk {\n  type: \"tool_call_chunk\";\n  index: number;\n  id: string;\n  name: string;\n  args: string;\n}\n\n// Events\n\ninterface GenericEvent<T extends string, D extends object> {\n  type: T;\n  data: {\n    id: string;\n    thread_id: string;\n    agent: \"coordinator\" | \"planner\" | \"researcher\" | \"coder\" | \"reporter\";\n    role: \"user\" | \"assistant\" | \"tool\";\n    finish_reason?: \"stop\" | \"tool_calls\" | \"interrupt\";\n  } & D;\n}\n\nexport interface MessageChunkEvent\n  extends GenericEvent<\n    \"message_chunk\",\n    {\n      content?: string;\n      reasoning_content?: string;\n    }\n  > {}\n\nexport interface ToolCallsEvent\n  extends GenericEvent<\n    \"tool_calls\",\n    {\n      tool_calls: ToolCall[];\n      tool_call_chunks: ToolCallChunk[];\n    }\n  > {}\n\nexport interface ToolCallChunksEvent\n  extends GenericEvent<\n    \"tool_call_chunks\",\n    {\n      tool_call_chunks: ToolCallChunk[];\n    }\n  > {}\n\nexport interface ToolCallResultEvent\n  extends GenericEvent<\n    \"tool_call_result\",\n    {\n      tool_call_id: string;\n      content?: string;\n    }\n  > {}\n\nexport interface InterruptEvent\n  extends GenericEvent<\n    \"interrupt\",\n    {\n      options: Option[];\n    }\n  > {}\n\nexport type ChatEvent =\n  | MessageChunkEvent\n  | ToolCallsEvent\n  | ToolCallChunksEvent\n  | ToolCallResultEvent\n  | InterruptEvent;\n"],"names":[],"mappings":"AAAA,0DAA0D;AAC1D,+BAA+B","debugId":null}},
    {"offset": {"line": 1476, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/deer/web/src/core/api/index.ts"],"sourcesContent":["// Copyright (c) 2025 Bytedance Ltd. and/or its affiliates\n// SPDX-License-Identifier: MIT\n\nexport * from \"./chat\";\nexport * from \"./mcp\";\nexport * from \"./podcast\";\nexport * from \"./prompt-enhancer\";\nexport * from \"./types\";\n"],"names":[],"mappings":"AAAA,0DAA0D;AAC1D,+BAA+B;;AAE/B;AACA;AACA;AACA;AACA","debugId":null}},
    {"offset": {"line": 1509, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/deer/web/src/core/messages/types.ts"],"sourcesContent":["// Copyright (c) 2025 Bytedance Ltd. and/or its affiliates\n// SPDX-License-Identifier: MIT\n\nexport type MessageRole = \"user\" | \"assistant\" | \"tool\";\n\nexport interface Message {\n  id: string;\n  threadId: string;\n  agent?:\n    | \"coordinator\"\n    | \"planner\"\n    | \"researcher\"\n    | \"coder\"\n    | \"reporter\"\n    | \"podcast\";\n  role: MessageRole;\n  isStreaming?: boolean;\n  content: string;\n  contentChunks: string[];\n  reasoningContent?: string;\n  reasoningContentChunks?: string[];\n  toolCalls?: ToolCallRuntime[];\n  options?: Option[];\n  finishReason?: \"stop\" | \"interrupt\" | \"tool_calls\";\n  interruptFeedback?: string;\n  resources?: Array<Resource>;\n}\n\nexport interface Option {\n  text: string;\n  value: string;\n}\n\nexport interface ToolCallRuntime {\n  id: string;\n  name: string;\n  args: Record<string, unknown>;\n  argsChunks?: string[];\n  result?: string;\n}\n\nexport interface Resource {\n  uri: string;\n  title: string;\n}\n"],"names":[],"mappings":"AAAA,0DAA0D;AAC1D,+BAA+B","debugId":null}},
    {"offset": {"line": 1522, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/deer/web/src/core/messages/merge-message.ts"],"sourcesContent":["// Copyright (c) 2025 Bytedance Ltd. and/or its affiliates\n// SPDX-License-Identifier: MIT\n\nimport type {\n  ChatEvent,\n  InterruptEvent,\n  MessageChunkEvent,\n  ToolCallChunksEvent,\n  ToolCallResultEvent,\n  ToolCallsEvent,\n} from \"../api\";\nimport { deepClone } from \"../utils/deep-clone\";\n\nimport type { Message } from \"./types\";\n\nexport function mergeMessage(message: Message, event: ChatEvent) {\n  if (event.type === \"message_chunk\") {\n    mergeTextMessage(message, event);\n  } else if (event.type === \"tool_calls\" || event.type === \"tool_call_chunks\") {\n    mergeToolCallMessage(message, event);\n  } else if (event.type === \"tool_call_result\") {\n    mergeToolCallResultMessage(message, event);\n  } else if (event.type === \"interrupt\") {\n    mergeInterruptMessage(message, event);\n  }\n  if (event.data.finish_reason) {\n    message.finishReason = event.data.finish_reason;\n    message.isStreaming = false;\n    if (message.toolCalls) {\n      message.toolCalls.forEach((toolCall) => {\n        if (toolCall.argsChunks?.length) {\n          toolCall.args = JSON.parse(toolCall.argsChunks.join(\"\"));\n          delete toolCall.argsChunks;\n        }\n      });\n    }\n  }\n  return deepClone(message);\n}\n\nfunction mergeTextMessage(message: Message, event: MessageChunkEvent) {\n  if (event.data.content) {\n    message.content += event.data.content;\n    message.contentChunks.push(event.data.content);\n  }\n  if (event.data.reasoning_content) {\n    message.reasoningContent = (message.reasoningContent ?? \"\") + event.data.reasoning_content;\n    message.reasoningContentChunks = message.reasoningContentChunks ?? [];\n    message.reasoningContentChunks.push(event.data.reasoning_content);\n  }\n}\nfunction convertToolChunkArgs(args: string) {\n  // Convert escaped characters in args\n  if (!args) return \"\";\n  return args.replace(/&#91;/g, \"[\").replace(/&#93;/g, \"]\").replace(/&#123;/g, \"{\").replace(/&#125;/g, \"}\");\n}\nfunction mergeToolCallMessage(\n  message: Message,\n  event: ToolCallsEvent | ToolCallChunksEvent,\n) {\n  if (event.type === \"tool_calls\" && event.data.tool_calls[0]?.name) {\n    message.toolCalls = event.data.tool_calls.map((raw) => ({\n      id: raw.id,\n      name: raw.name,\n      args: raw.args,\n      result: undefined,\n    }));\n  }\n\n  message.toolCalls ??= [];\n  for (const chunk of event.data.tool_call_chunks) {\n    if (chunk.id) {\n      const toolCall = message.toolCalls.find(\n        (toolCall) => toolCall.id === chunk.id,\n      );\n      if (toolCall) {\n        toolCall.argsChunks = [convertToolChunkArgs(chunk.args)];\n      }\n    } else {\n      const streamingToolCall = message.toolCalls.find(\n        (toolCall) => toolCall.argsChunks?.length,\n      );\n      if (streamingToolCall) {\n        streamingToolCall.argsChunks!.push(convertToolChunkArgs(chunk.args));\n      }\n    }\n  }\n}\n\nfunction mergeToolCallResultMessage(\n  message: Message,\n  event: ToolCallResultEvent,\n) {\n  const toolCall = message.toolCalls?.find(\n    (toolCall) => toolCall.id === event.data.tool_call_id,\n  );\n  if (toolCall) {\n    toolCall.result = event.data.content;\n  }\n}\n\nfunction mergeInterruptMessage(message: Message, event: InterruptEvent) {\n  message.isStreaming = false;\n  message.options = event.data.options;\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1624, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/deer/web/src/core/messages/index.ts"],"sourcesContent":["// Copyright (c) 2025 Bytedance Ltd. and/or its affiliates\n// SPDX-License-Identifier: MIT\n\nexport * from \"./types\";\nexport * from \"./merge-message\";\n"],"names":[],"mappings":"AAAA,0DAA0D;AAC1D,+BAA+B;;AAE/B;AACA","debugId":null}},
    {"offset": {"line": 1648, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/deer/web/src/core/store/settings-store.ts"],"sourcesContent":["// Copyright (c) 2025 Bytedance Ltd. and/or its affiliates\n// SPDX-License-Identifier: MIT\n\nimport { create } from \"zustand\";\n\nimport type { MCPServerMetadata, SimpleMCPServerMetadata } from \"../mcp\";\n\nconst SETTINGS_KEY = \"deerflow.settings\";\n\nconst DEFAULT_SETTINGS: SettingsState = {\n  general: {\n    autoAcceptedPlan: false,\n    enableClarification: false,\n    maxClarificationRounds: 3,\n    enableDeepThinking: false,\n    enableBackgroundInvestigation: false,\n    maxPlanIterations: 1,\n    maxStepNum: 3,\n    maxSearchResults: 3,\n    reportStyle: \"academic\",\n  },\n  mcp: {\n    servers: [],\n  },\n};\n\nexport type SettingsState = {\n  general: {\n    autoAcceptedPlan: boolean;\n    enableClarification: boolean;\n    maxClarificationRounds: number;\n    enableDeepThinking: boolean;\n    enableBackgroundInvestigation: boolean;\n    maxPlanIterations: number;\n    maxStepNum: number;\n    maxSearchResults: number;\n    reportStyle: \"academic\" | \"popular_science\" | \"news\" | \"social_media\" | \"strategic_investment\";\n  };\n  mcp: {\n    servers: MCPServerMetadata[];\n  };\n};\n\nexport const useSettingsStore = create<SettingsState>(() => ({\n  ...DEFAULT_SETTINGS,\n}));\n\nexport const useSettings = (key: keyof SettingsState) => {\n  return useSettingsStore((state) => state[key]);\n};\n\nexport const changeSettings = (settings: SettingsState) => {\n  useSettingsStore.setState(settings);\n};\n\nexport const loadSettings = () => {\n  if (typeof window === \"undefined\") {\n    return;\n  }\n  const json = localStorage.getItem(SETTINGS_KEY);\n  if (json) {\n    const settings = JSON.parse(json);\n    for (const key in DEFAULT_SETTINGS.general) {\n      if (!(key in settings.general)) {\n        settings.general[key as keyof SettingsState[\"general\"]] =\n          DEFAULT_SETTINGS.general[key as keyof SettingsState[\"general\"]];\n      }\n    }\n\n    try {\n      useSettingsStore.setState(settings);\n    } catch (error) {\n      console.error(error);\n    }\n  }\n};\n\nexport const saveSettings = () => {\n  const latestSettings = useSettingsStore.getState();\n  const json = JSON.stringify(latestSettings);\n  localStorage.setItem(SETTINGS_KEY, json);\n};\n\nexport const getChatStreamSettings = () => {\n  let mcpSettings:\n    | {\n        servers: Record<\n          string,\n          MCPServerMetadata & {\n            enabled_tools: string[];\n            add_to_agents: string[];\n          }\n        >;\n      }\n    | undefined = undefined;\n  const { mcp, general } = useSettingsStore.getState();\n  const mcpServers = mcp.servers.filter((server) => server.enabled);\n  if (mcpServers.length > 0) {\n    mcpSettings = {\n      servers: mcpServers.reduce((acc, cur) => {\n        const { transport, env, headers } = cur;\n        let server: SimpleMCPServerMetadata;\n        if (transport === \"stdio\") {\n          server = {\n            name: cur.name,\n            transport,\n            env,\n            command: cur.command,\n            args: cur.args,\n          };\n        } else {\n          server = {\n            name: cur.name,\n            transport,\n            headers,\n            url: cur.url,\n          };\n        }\n        return {\n          ...acc,\n          [cur.name]: {\n            ...server,\n            enabled_tools: cur.tools.map((tool) => tool.name),\n            add_to_agents: [\"researcher\"],\n          },\n        };\n      }, {}),\n    };\n  }\n  return {\n    ...general,\n    mcpSettings,\n  };\n};\n\nexport function setReportStyle(\n  value: \"academic\" | \"popular_science\" | \"news\" | \"social_media\" | \"strategic_investment\",\n) {\n  useSettingsStore.setState((state) => ({\n    general: {\n      ...state.general,\n      reportStyle: value,\n    },\n  }));\n  saveSettings();\n}\n\nexport function setEnableDeepThinking(value: boolean) {\n  useSettingsStore.setState((state) => ({\n    general: {\n      ...state.general,\n      enableDeepThinking: value,\n    },\n  }));\n  saveSettings();\n}\n\nexport function setEnableBackgroundInvestigation(value: boolean) {\n  useSettingsStore.setState((state) => ({\n    general: {\n      ...state.general,\n      enableBackgroundInvestigation: value,\n    },\n  }));\n  saveSettings();\n}\n\nexport function setEnableClarification(value: boolean) {\n  useSettingsStore.setState((state) => ({\n    general: {\n      ...state.general,\n      enableClarification: value,\n    },\n  }));\n  saveSettings();\n}\nloadSettings();\n"],"names":[],"mappings":"AAAA,0DAA0D;AAC1D,+BAA+B;;;;;;;;;;;;;AAE/B;;;AAIA,MAAM,eAAe;AAErB,MAAM,mBAAkC;IACtC,SAAS;QACP,kBAAkB;QAClB,qBAAqB;QACrB,wBAAwB;QACxB,oBAAoB;QACpB,+BAA+B;QAC/B,mBAAmB;QACnB,YAAY;QACZ,kBAAkB;QAClB,aAAa;IACf;IACA,KAAK;QACH,SAAS,EAAE;IACb;AACF;AAmBO,MAAM,mBAAmB,CAAA,GAAA,qVAAA,CAAA,SAAM,AAAD,EAAiB,IAAM,CAAC;QAC3D,GAAG,gBAAgB;IACrB,CAAC;AAEM,MAAM,cAAc,CAAC;;IAC1B,OAAO;wCAAiB,CAAC,QAAU,KAAK,CAAC,IAAI;;AAC/C;GAFa;;QACJ;;;AAGF,MAAM,iBAAiB,CAAC;IAC7B,iBAAiB,QAAQ,CAAC;AAC5B;AAEO,MAAM,eAAe;IAC1B;;IAGA,MAAM,OAAO,aAAa,OAAO,CAAC;IAClC,IAAI,MAAM;QACR,MAAM,WAAW,KAAK,KAAK,CAAC;QAC5B,IAAK,MAAM,OAAO,iBAAiB,OAAO,CAAE;YAC1C,IAAI,CAAC,CAAC,OAAO,SAAS,OAAO,GAAG;gBAC9B,SAAS,OAAO,CAAC,IAAsC,GACrD,iBAAiB,OAAO,CAAC,IAAsC;YACnE;QACF;QAEA,IAAI;YACF,iBAAiB,QAAQ,CAAC;QAC5B,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC;QAChB;IACF;AACF;AAEO,MAAM,eAAe;IAC1B,MAAM,iBAAiB,iBAAiB,QAAQ;IAChD,MAAM,OAAO,KAAK,SAAS,CAAC;IAC5B,aAAa,OAAO,CAAC,cAAc;AACrC;AAEO,MAAM,wBAAwB;IACnC,IAAI,cAUY;IAChB,MAAM,EAAE,GAAG,EAAE,OAAO,EAAE,GAAG,iBAAiB,QAAQ;IAClD,MAAM,aAAa,IAAI,OAAO,CAAC,MAAM,CAAC,CAAC,SAAW,OAAO,OAAO;IAChE,IAAI,WAAW,MAAM,GAAG,GAAG;QACzB,cAAc;YACZ,SAAS,WAAW,MAAM,CAAC,CAAC,KAAK;gBAC/B,MAAM,EAAE,SAAS,EAAE,GAAG,EAAE,OAAO,EAAE,GAAG;gBACpC,IAAI;gBACJ,IAAI,cAAc,SAAS;oBACzB,SAAS;wBACP,MAAM,IAAI,IAAI;wBACd;wBACA;wBACA,SAAS,IAAI,OAAO;wBACpB,MAAM,IAAI,IAAI;oBAChB;gBACF,OAAO;oBACL,SAAS;wBACP,MAAM,IAAI,IAAI;wBACd;wBACA;wBACA,KAAK,IAAI,GAAG;oBACd;gBACF;gBACA,OAAO;oBACL,GAAG,GAAG;oBACN,CAAC,IAAI,IAAI,CAAC,EAAE;wBACV,GAAG,MAAM;wBACT,eAAe,IAAI,KAAK,CAAC,GAAG,CAAC,CAAC,OAAS,KAAK,IAAI;wBAChD,eAAe;4BAAC;yBAAa;oBAC/B;gBACF;YACF,GAAG,CAAC;QACN;IACF;IACA,OAAO;QACL,GAAG,OAAO;QACV;IACF;AACF;AAEO,SAAS,eACd,KAAwF;IAExF,iBAAiB,QAAQ,CAAC,CAAC,QAAU,CAAC;YACpC,SAAS;gBACP,GAAG,MAAM,OAAO;gBAChB,aAAa;YACf;QACF,CAAC;IACD;AACF;AAEO,SAAS,sBAAsB,KAAc;IAClD,iBAAiB,QAAQ,CAAC,CAAC,QAAU,CAAC;YACpC,SAAS;gBACP,GAAG,MAAM,OAAO;gBAChB,oBAAoB;YACtB;QACF,CAAC;IACD;AACF;AAEO,SAAS,iCAAiC,KAAc;IAC7D,iBAAiB,QAAQ,CAAC,CAAC,QAAU,CAAC;YACpC,SAAS;gBACP,GAAG,MAAM,OAAO;gBAChB,+BAA+B;YACjC;QACF,CAAC;IACD;AACF;AAEO,SAAS,uBAAuB,KAAc;IACnD,iBAAiB,QAAQ,CAAC,CAAC,QAAU,CAAC;YACpC,SAAS;gBACP,GAAG,MAAM,OAAO;gBAChB,qBAAqB;YACvB;QACF,CAAC;IACD;AACF;AACA","debugId":null}},
    {"offset": {"line": 1811, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/deer/web/src/core/store/store.ts"],"sourcesContent":["// Copyright (c) 2025 Bytedance Ltd. and/or its affiliates\n// SPDX-License-Identifier: MIT\n\nimport { nanoid } from \"nanoid\";\nimport { toast } from \"sonner\";\nimport { create } from \"zustand\";\nimport { useShallow } from \"zustand/react/shallow\";\n\nimport { chatStream, generatePodcast } from \"../api\";\nimport type { Message, Resource } from \"../messages\";\nimport { mergeMessage } from \"../messages\";\nimport { parseJSON } from \"../utils\";\n\nimport { getChatStreamSettings } from \"./settings-store\";\n\nconst THREAD_ID = nanoid();\n\nexport const useStore = create<{\n  responding: boolean;\n  threadId: string | undefined;\n  messageIds: string[];\n  messages: Map<string, Message>;\n  researchIds: string[];\n  researchPlanIds: Map<string, string>;\n  researchReportIds: Map<string, string>;\n  researchActivityIds: Map<string, string[]>;\n  ongoingResearchId: string | null;\n  openResearchId: string | null;\n\n  appendMessage: (message: Message) => void;\n  updateMessage: (message: Message) => void;\n  updateMessages: (messages: Message[]) => void;\n  openResearch: (researchId: string | null) => void;\n  closeResearch: () => void;\n  setOngoingResearch: (researchId: string | null) => void;\n  resetStore: () => void;\n}>((set) => ({\n  responding: false,\n  threadId: THREAD_ID,\n  messageIds: [],\n  messages: new Map<string, Message>(),\n  researchIds: [],\n  researchPlanIds: new Map<string, string>(),\n  researchReportIds: new Map<string, string>(),\n  researchActivityIds: new Map<string, string[]>(),\n  ongoingResearchId: null,\n  openResearchId: null,\n\n  resetStore() {\n    set({\n      responding: false,\n      threadId: nanoid(),\n      messageIds: [],\n      messages: new Map<string, Message>(),\n      researchIds: [],\n      researchPlanIds: new Map<string, string>(),\n      researchReportIds: new Map<string, string>(),\n      researchActivityIds: new Map<string, string[]>(),\n      ongoingResearchId: null,\n      openResearchId: null,\n    });\n  },\n\n  appendMessage(message: Message) {\n    set((state) => {\n      // Prevent duplicate message IDs in the array to avoid React key warnings\n      const newMessageIds = state.messageIds.includes(message.id)\n        ? state.messageIds\n        : [...state.messageIds, message.id];\n      return {\n        messageIds: newMessageIds,\n        messages: new Map(state.messages).set(message.id, message),\n      };\n    });\n  },\n  updateMessage(message: Message) {\n    set((state) => ({\n      messages: new Map(state.messages).set(message.id, message),\n    }));\n  },\n  updateMessages(messages: Message[]) {\n    set((state) => {\n      const newMessages = new Map(state.messages);\n      messages.forEach((m) => newMessages.set(m.id, m));\n      return { messages: newMessages };\n    });\n  },\n  openResearch(researchId: string | null) {\n    set({ openResearchId: researchId });\n  },\n  closeResearch() {\n    set({ openResearchId: null });\n  },\n  setOngoingResearch(researchId: string | null) {\n    set({ ongoingResearchId: researchId });\n  },\n}));\n\nexport async function sendMessage(\n  content?: string,\n  {\n    interruptFeedback,\n    resources,\n  }: {\n    interruptFeedback?: string;\n    resources?: Array<Resource>;\n  } = {},\n  options: { abortSignal?: AbortSignal } = {},\n) {\n  if (content != null) {\n    appendMessage({\n      id: nanoid(),\n      threadId: THREAD_ID,\n      role: \"user\",\n      content: content,\n      contentChunks: [content],\n      resources,\n    });\n  }\n\n  const settings = getChatStreamSettings();\n  const stream = chatStream(\n    content ?? \"[REPLAY]\",\n    {\n      thread_id: THREAD_ID,\n      interrupt_feedback: interruptFeedback,\n      resources,\n      auto_accepted_plan: settings.autoAcceptedPlan,\n      enable_clarification: settings.enableClarification ?? false,\n      max_clarification_rounds: settings.maxClarificationRounds ?? 3,\n      enable_deep_thinking: settings.enableDeepThinking ?? false,\n      enable_background_investigation:\n        settings.enableBackgroundInvestigation ?? true,\n      max_plan_iterations: settings.maxPlanIterations,\n      max_step_num: settings.maxStepNum,\n      max_search_results: settings.maxSearchResults,\n      report_style: settings.reportStyle,\n      mcp_settings: settings.mcpSettings,\n    },\n    options,\n  );\n\n  setResponding(true);\n  let messageId: string | undefined;\n  const pendingUpdates = new Map<string, Message>();\n  let updateTimer: NodeJS.Timeout | undefined;\n\n  const scheduleUpdate = () => {\n    if (updateTimer) clearTimeout(updateTimer);\n    updateTimer = setTimeout(() => {\n      // Batch update message status\n      if (pendingUpdates.size > 0) {\n        useStore.getState().updateMessages(Array.from(pendingUpdates.values()));\n        pendingUpdates.clear();\n      }\n    }, 16); // ~60fps\n  };\n\n  try {\n    for await (const event of stream) {\n      const { type, data } = event;\n      let message: Message | undefined;\n      \n      // Handle tool_call_result specially: use the message that contains the tool call\n      if (type === \"tool_call_result\") {\n        message = findMessageByToolCallId(data.tool_call_id);\n        if (message) {\n          // Use the found message's ID, not data.id\n          messageId = message.id;\n        } else {\n          // Shouldn't happen, but handle gracefully\n          if (process.env.NODE_ENV === \"development\") {\n            console.warn(`Tool call result without matching message: ${data.tool_call_id}`);\n          }\n          continue; // Skip this event\n        }\n      } else {\n        // For other event types, use data.id\n        messageId = data.id;\n        \n        if (!existsMessage(messageId)) {\n          message = {\n            id: messageId,\n            threadId: data.thread_id,\n            agent: data.agent,\n            role: data.role,\n            content: \"\",\n            contentChunks: [],\n            reasoningContent: \"\",\n            reasoningContentChunks: [],\n            isStreaming: true,\n            interruptFeedback,\n          };\n          appendMessage(message);\n        }\n      }\n      \n      message ??= getMessage(messageId);\n      if (message) {\n        message = mergeMessage(message, event);\n        // Collect pending messages for update, instead of updating immediately.\n        pendingUpdates.set(message.id, message);\n        scheduleUpdate();\n      }\n    }\n  } catch {\n    toast(\"An error occurred while generating the response. Please try again.\");\n    // Update message status.\n    // TODO: const isAborted = (error as Error).name === \"AbortError\";\n    if (messageId != null) {\n      const message = getMessage(messageId);\n      if (message?.isStreaming) {\n        message.isStreaming = false;\n        useStore.getState().updateMessage(message);\n      }\n    }\n    useStore.getState().setOngoingResearch(null);\n  } finally {\n    setResponding(false);\n    // Ensure all pending updates are processed.\n    if (updateTimer) clearTimeout(updateTimer);\n    if (pendingUpdates.size > 0) {\n      useStore.getState().updateMessages(Array.from(pendingUpdates.values()));\n    }\n\n  }\n}\n\nfunction setResponding(value: boolean) {\n  useStore.setState({ responding: value });\n}\n\nfunction existsMessage(id: string) {\n  return useStore.getState().messageIds.includes(id);\n}\n\nfunction getMessage(id: string) {\n  return useStore.getState().messages.get(id);\n}\n\nfunction findMessageByToolCallId(toolCallId: string) {\n  return Array.from(useStore.getState().messages.values())\n    .reverse()\n    .find((message) => {\n      if (message.toolCalls) {\n        return message.toolCalls.some((toolCall) => toolCall.id === toolCallId);\n      }\n      return false;\n    });\n}\n\nfunction appendMessage(message: Message) {\n  if (\n    message.agent === \"coder\" ||\n    message.agent === \"reporter\" ||\n    message.agent === \"researcher\"\n  ) {\n    if (!getOngoingResearchId()) {\n      const id = message.id;\n      appendResearch(id);\n      openResearch(id);\n    }\n    appendResearchActivity(message);\n  }\n  useStore.getState().appendMessage(message);\n}\n\nfunction updateMessage(message: Message) {\n  if (\n    getOngoingResearchId() &&\n    message.agent === \"reporter\" &&\n    !message.isStreaming\n  ) {\n    useStore.getState().setOngoingResearch(null);\n  }\n  useStore.getState().updateMessage(message);\n}\n\nfunction getOngoingResearchId() {\n  return useStore.getState().ongoingResearchId;\n}\n\nfunction appendResearch(researchId: string) {\n  let planMessage: Message | undefined;\n  const reversedMessageIds = [...useStore.getState().messageIds].reverse();\n  for (const messageId of reversedMessageIds) {\n    const message = getMessage(messageId);\n    if (message?.agent === \"planner\") {\n      planMessage = message;\n      break;\n    }\n  }\n  const messageIds = [researchId];\n  messageIds.unshift(planMessage!.id);\n  useStore.setState({\n    ongoingResearchId: researchId,\n    researchIds: [...useStore.getState().researchIds, researchId],\n    researchPlanIds: new Map(useStore.getState().researchPlanIds).set(\n      researchId,\n      planMessage!.id,\n    ),\n    researchActivityIds: new Map(useStore.getState().researchActivityIds).set(\n      researchId,\n      messageIds,\n    ),\n  });\n}\n\nfunction appendResearchActivity(message: Message) {\n  const researchId = getOngoingResearchId();\n  if (researchId) {\n    const researchActivityIds = useStore.getState().researchActivityIds;\n    const current = researchActivityIds.get(researchId)!;\n    if (!current.includes(message.id)) {\n      useStore.setState({\n        researchActivityIds: new Map(researchActivityIds).set(researchId, [\n          ...current,\n          message.id,\n        ]),\n      });\n    }\n    if (message.agent === \"reporter\") {\n      useStore.setState({\n        researchReportIds: new Map(useStore.getState().researchReportIds).set(\n          researchId,\n          message.id,\n        ),\n      });\n    }\n  }\n}\n\nexport function openResearch(researchId: string | null) {\n  useStore.getState().openResearch(researchId);\n}\n\nexport function closeResearch() {\n  useStore.getState().closeResearch();\n}\n\nexport async function listenToPodcast(researchId: string) {\n  const planMessageId = useStore.getState().researchPlanIds.get(researchId);\n  const reportMessageId = useStore.getState().researchReportIds.get(researchId);\n  if (planMessageId && reportMessageId) {\n    const planMessage = getMessage(planMessageId)!;\n    const title = parseJSON(planMessage.content, { title: \"Untitled\" }).title;\n    const reportMessage = getMessage(reportMessageId);\n    if (reportMessage?.content) {\n      appendMessage({\n        id: nanoid(),\n        threadId: THREAD_ID,\n        role: \"user\",\n        content: \"Please generate a podcast for the above research.\",\n        contentChunks: [],\n      });\n      const podCastMessageId = nanoid();\n      const podcastObject = { title, researchId };\n      const podcastMessage: Message = {\n        id: podCastMessageId,\n        threadId: THREAD_ID,\n        role: \"assistant\",\n        agent: \"podcast\",\n        content: JSON.stringify(podcastObject),\n        contentChunks: [],\n        reasoningContent: \"\",\n        reasoningContentChunks: [],\n        isStreaming: true,\n      };\n      appendMessage(podcastMessage);\n      // Generating podcast...\n      let audioUrl: string | undefined;\n      try {\n        audioUrl = await generatePodcast(reportMessage.content);\n      } catch (e) {\n        console.error(e);\n        useStore.setState((state) => ({\n          messages: new Map(useStore.getState().messages).set(\n            podCastMessageId,\n            {\n              ...state.messages.get(podCastMessageId)!,\n              content: JSON.stringify({\n                ...podcastObject,\n                error: e instanceof Error ? e.message : \"Unknown error\",\n              }),\n              isStreaming: false,\n            },\n          ),\n        }));\n        toast(\"An error occurred while generating podcast. Please try again.\");\n        return;\n      }\n      useStore.setState((state) => ({\n        messages: new Map(useStore.getState().messages).set(podCastMessageId, {\n          ...state.messages.get(podCastMessageId)!,\n          content: JSON.stringify({ ...podcastObject, audioUrl }),\n          isStreaming: false,\n        }),\n      }));\n    }\n  }\n}\n\nexport function useResearchMessage(researchId: string) {\n  return useStore(\n    useShallow((state) => {\n      const messageId = state.researchPlanIds.get(researchId);\n      return messageId ? state.messages.get(messageId) : undefined;\n    }),\n  );\n}\n\nexport function useMessage(messageId: string | null | undefined) {\n  return useStore(\n    useShallow((state) =>\n      messageId ? state.messages.get(messageId) : undefined,\n    ),\n  );\n}\n\nexport function useMessageIds() {\n  return useStore(useShallow((state) => state.messageIds));\n}\n\nexport function useRenderableMessageIds() {\n  return useStore(\n    useShallow((state) => {\n      // Filter to only messages that will actually render in MessageListView\n      // This prevents duplicate keys and React warnings when messages change state\n      return state.messageIds.filter((messageId) => {\n        const message = state.messages.get(messageId);\n        if (!message) return false;\n        \n        // Only include messages that match MessageListItem rendering conditions\n        // These are the same conditions checked in MessageListItem component\n        return (\n          message.role === \"user\" ||\n          message.agent === \"coordinator\" ||\n          message.agent === \"planner\" ||\n          message.agent === \"podcast\" ||\n          state.researchIds.includes(messageId) // startOfResearch condition\n        );\n      });\n    }),\n  );\n}\n\nexport function useLastInterruptMessage() {\n  return useStore(\n    useShallow((state) => {\n      if (state.messageIds.length >= 2) {\n        const lastMessage = state.messages.get(\n          state.messageIds[state.messageIds.length - 1]!,\n        );\n        return lastMessage?.finishReason === \"interrupt\" ? lastMessage : null;\n      }\n      return null;\n    }),\n  );\n}\n\nexport function useLastFeedbackMessageId() {\n  const waitingForFeedbackMessageId = useStore(\n    useShallow((state) => {\n      if (state.messageIds.length >= 2) {\n        const lastMessage = state.messages.get(\n          state.messageIds[state.messageIds.length - 1]!,\n        );\n        if (lastMessage && lastMessage.finishReason === \"interrupt\") {\n          return state.messageIds[state.messageIds.length - 2];\n        }\n      }\n      return null;\n    }),\n  );\n  return waitingForFeedbackMessageId;\n}\n\nexport function useToolCalls() {\n  return useStore(\n    useShallow((state) => {\n      return state.messageIds\n        ?.map((id) => getMessage(id)?.toolCalls)\n        .filter((toolCalls) => toolCalls != null)\n        .flat();\n    }),\n  );\n}\n"],"names":[],"mappings":"AAAA,0DAA0D;AAC1D,+BAA+B;;;;;;;;;;;;;;;AA0KjB;AAxKd;AACA;AACA;AACA;AAEA;AAAA;AAAA;AAEA;AAAA;AACA;AAAA;AAEA;;;;;;;;;;AAEA,MAAM,YAAY,CAAA,GAAA,gNAAA,CAAA,SAAM,AAAD;AAEhB,MAAM,WAAW,CAAA,GAAA,qVAAA,CAAA,SAAM,AAAD,EAmB1B,CAAC,MAAQ,CAAC;QACX,YAAY;QACZ,UAAU;QACV,YAAY,EAAE;QACd,UAAU,IAAI;QACd,aAAa,EAAE;QACf,iBAAiB,IAAI;QACrB,mBAAmB,IAAI;QACvB,qBAAqB,IAAI;QACzB,mBAAmB;QACnB,gBAAgB;QAEhB;YACE,IAAI;gBACF,YAAY;gBACZ,UAAU,CAAA,GAAA,gNAAA,CAAA,SAAM,AAAD;gBACf,YAAY,EAAE;gBACd,UAAU,IAAI;gBACd,aAAa,EAAE;gBACf,iBAAiB,IAAI;gBACrB,mBAAmB,IAAI;gBACvB,qBAAqB,IAAI;gBACzB,mBAAmB;gBACnB,gBAAgB;YAClB;QACF;QAEA,eAAc,OAAgB;YAC5B,IAAI,CAAC;gBACH,yEAAyE;gBACzE,MAAM,gBAAgB,MAAM,UAAU,CAAC,QAAQ,CAAC,QAAQ,EAAE,IACtD,MAAM,UAAU,GAChB;uBAAI,MAAM,UAAU;oBAAE,QAAQ,EAAE;iBAAC;gBACrC,OAAO;oBACL,YAAY;oBACZ,UAAU,IAAI,IAAI,MAAM,QAAQ,EAAE,GAAG,CAAC,QAAQ,EAAE,EAAE;gBACpD;YACF;QACF;QACA,eAAc,OAAgB;YAC5B,IAAI,CAAC,QAAU,CAAC;oBACd,UAAU,IAAI,IAAI,MAAM,QAAQ,EAAE,GAAG,CAAC,QAAQ,EAAE,EAAE;gBACpD,CAAC;QACH;QACA,gBAAe,QAAmB;YAChC,IAAI,CAAC;gBACH,MAAM,cAAc,IAAI,IAAI,MAAM,QAAQ;gBAC1C,SAAS,OAAO,CAAC,CAAC,IAAM,YAAY,GAAG,CAAC,EAAE,EAAE,EAAE;gBAC9C,OAAO;oBAAE,UAAU;gBAAY;YACjC;QACF;QACA,cAAa,UAAyB;YACpC,IAAI;gBAAE,gBAAgB;YAAW;QACnC;QACA;YACE,IAAI;gBAAE,gBAAgB;YAAK;QAC7B;QACA,oBAAmB,UAAyB;YAC1C,IAAI;gBAAE,mBAAmB;YAAW;QACtC;IACF,CAAC;AAEM,eAAe,YACpB,OAAgB;QAChB,EACE,iBAAiB,EACjB,SAAS,EAIV,GAND,iEAMI,CAAC,GACL,UAAA,iEAAyC,CAAC;IAE1C,IAAI,WAAW,MAAM;QACnB,cAAc;YACZ,IAAI,CAAA,GAAA,gNAAA,CAAA,SAAM,AAAD;YACT,UAAU;YACV,MAAM;YACN,SAAS;YACT,eAAe;gBAAC;aAAQ;YACxB;QACF;IACF;IAEA,MAAM,WAAW,CAAA,GAAA,4IAAA,CAAA,wBAAqB,AAAD;QAQX,+BACI,kCACJ,8BAEpB;IAXN,MAAM,SAAS,CAAA,GAAA,6HAAA,CAAA,aAAU,AAAD,EACtB,oBAAA,qBAAA,UAAW,YACX;QACE,WAAW;QACX,oBAAoB;QACpB;QACA,oBAAoB,SAAS,gBAAgB;QAC7C,sBAAsB,CAAA,gCAAA,SAAS,mBAAmB,cAA5B,2CAAA,gCAAgC;QACtD,0BAA0B,CAAA,mCAAA,SAAS,sBAAsB,cAA/B,8CAAA,mCAAmC;QAC7D,sBAAsB,CAAA,+BAAA,SAAS,kBAAkB,cAA3B,0CAAA,+BAA+B;QACrD,iCACE,CAAA,0CAAA,SAAS,6BAA6B,cAAtC,qDAAA,0CAA0C;QAC5C,qBAAqB,SAAS,iBAAiB;QAC/C,cAAc,SAAS,UAAU;QACjC,oBAAoB,SAAS,gBAAgB;QAC7C,cAAc,SAAS,WAAW;QAClC,cAAc,SAAS,WAAW;IACpC,GACA;IAGF,cAAc;IACd,IAAI;IACJ,MAAM,iBAAiB,IAAI;IAC3B,IAAI;IAEJ,MAAM,iBAAiB;QACrB,IAAI,aAAa,aAAa;QAC9B,cAAc,WAAW;YACvB,8BAA8B;YAC9B,IAAI,eAAe,IAAI,GAAG,GAAG;gBAC3B,SAAS,QAAQ,GAAG,cAAc,CAAC,MAAM,IAAI,CAAC,eAAe,MAAM;gBACnE,eAAe,KAAK;YACtB;QACF,GAAG,KAAK,SAAS;IACnB;IAEA,IAAI;QACF,WAAW,MAAM,SAAS,OAAQ;YAChC,MAAM,EAAE,IAAI,EAAE,IAAI,EAAE,GAAG;YACvB,IAAI;YAEJ,iFAAiF;YACjF,IAAI,SAAS,oBAAoB;gBAC/B,UAAU,wBAAwB,KAAK,YAAY;gBACnD,IAAI,SAAS;oBACX,0CAA0C;oBAC1C,YAAY,QAAQ,EAAE;gBACxB,OAAO;oBACL,0CAA0C;oBAC1C,wCAA4C;wBAC1C,QAAQ,IAAI,CAAC,AAAC,8CAA+D,OAAlB,KAAK,YAAY;oBAC9E;oBACA,UAAU,kBAAkB;gBAC9B;YACF,OAAO;gBACL,qCAAqC;gBACrC,YAAY,KAAK,EAAE;gBAEnB,IAAI,CAAC,cAAc,YAAY;oBAC7B,UAAU;wBACR,IAAI;wBACJ,UAAU,KAAK,SAAS;wBACxB,OAAO,KAAK,KAAK;wBACjB,MAAM,KAAK,IAAI;wBACf,SAAS;wBACT,eAAe,EAAE;wBACjB,kBAAkB;wBAClB,wBAAwB,EAAE;wBAC1B,aAAa;wBACb;oBACF;oBACA,cAAc;gBAChB;YACF;YAEA,oBAAA,qBAAA,UAAA,UAAY,WAAW;YACvB,IAAI,SAAS;gBACX,UAAU,CAAA,GAAA,8IAAA,CAAA,eAAY,AAAD,EAAE,SAAS;gBAChC,wEAAwE;gBACxE,eAAe,GAAG,CAAC,QAAQ,EAAE,EAAE;gBAC/B;YACF;QACF;IACF,EAAE,UAAM;QACN,CAAA,GAAA,2QAAA,CAAA,QAAK,AAAD,EAAE;QACN,yBAAyB;QACzB,kEAAkE;QAClE,IAAI,aAAa,MAAM;YACrB,MAAM,UAAU,WAAW;YAC3B,IAAI,oBAAA,8BAAA,QAAS,WAAW,EAAE;gBACxB,QAAQ,WAAW,GAAG;gBACtB,SAAS,QAAQ,GAAG,aAAa,CAAC;YACpC;QACF;QACA,SAAS,QAAQ,GAAG,kBAAkB,CAAC;IACzC,SAAU;QACR,cAAc;QACd,4CAA4C;QAC5C,IAAI,aAAa,aAAa;QAC9B,IAAI,eAAe,IAAI,GAAG,GAAG;YAC3B,SAAS,QAAQ,GAAG,cAAc,CAAC,MAAM,IAAI,CAAC,eAAe,MAAM;QACrE;IAEF;AACF;AAEA,SAAS,cAAc,KAAc;IACnC,SAAS,QAAQ,CAAC;QAAE,YAAY;IAAM;AACxC;AAEA,SAAS,cAAc,EAAU;IAC/B,OAAO,SAAS,QAAQ,GAAG,UAAU,CAAC,QAAQ,CAAC;AACjD;AAEA,SAAS,WAAW,EAAU;IAC5B,OAAO,SAAS,QAAQ,GAAG,QAAQ,CAAC,GAAG,CAAC;AAC1C;AAEA,SAAS,wBAAwB,UAAkB;IACjD,OAAO,MAAM,IAAI,CAAC,SAAS,QAAQ,GAAG,QAAQ,CAAC,MAAM,IAClD,OAAO,GACP,IAAI,CAAC,CAAC;QACL,IAAI,QAAQ,SAAS,EAAE;YACrB,OAAO,QAAQ,SAAS,CAAC,IAAI,CAAC,CAAC,WAAa,SAAS,EAAE,KAAK;QAC9D;QACA,OAAO;IACT;AACJ;AAEA,SAAS,cAAc,OAAgB;IACrC,IACE,QAAQ,KAAK,KAAK,WAClB,QAAQ,KAAK,KAAK,cAClB,QAAQ,KAAK,KAAK,cAClB;QACA,IAAI,CAAC,wBAAwB;YAC3B,MAAM,KAAK,QAAQ,EAAE;YACrB,eAAe;YACf,aAAa;QACf;QACA,uBAAuB;IACzB;IACA,SAAS,QAAQ,GAAG,aAAa,CAAC;AACpC;AAEA,SAAS,cAAc,OAAgB;IACrC,IACE,0BACA,QAAQ,KAAK,KAAK,cAClB,CAAC,QAAQ,WAAW,EACpB;QACA,SAAS,QAAQ,GAAG,kBAAkB,CAAC;IACzC;IACA,SAAS,QAAQ,GAAG,aAAa,CAAC;AACpC;AAEA,SAAS;IACP,OAAO,SAAS,QAAQ,GAAG,iBAAiB;AAC9C;AAEA,SAAS,eAAe,UAAkB;IACxC,IAAI;IACJ,MAAM,qBAAqB;WAAI,SAAS,QAAQ,GAAG,UAAU;KAAC,CAAC,OAAO;IACtE,KAAK,MAAM,aAAa,mBAAoB;QAC1C,MAAM,UAAU,WAAW;QAC3B,IAAI,CAAA,oBAAA,8BAAA,QAAS,KAAK,MAAK,WAAW;YAChC,cAAc;YACd;QACF;IACF;IACA,MAAM,aAAa;QAAC;KAAW;IAC/B,WAAW,OAAO,CAAC,YAAa,EAAE;IAClC,SAAS,QAAQ,CAAC;QAChB,mBAAmB;QACnB,aAAa;eAAI,SAAS,QAAQ,GAAG,WAAW;YAAE;SAAW;QAC7D,iBAAiB,IAAI,IAAI,SAAS,QAAQ,GAAG,eAAe,EAAE,GAAG,CAC/D,YACA,YAAa,EAAE;QAEjB,qBAAqB,IAAI,IAAI,SAAS,QAAQ,GAAG,mBAAmB,EAAE,GAAG,CACvE,YACA;IAEJ;AACF;AAEA,SAAS,uBAAuB,OAAgB;IAC9C,MAAM,aAAa;IACnB,IAAI,YAAY;QACd,MAAM,sBAAsB,SAAS,QAAQ,GAAG,mBAAmB;QACnE,MAAM,UAAU,oBAAoB,GAAG,CAAC;QACxC,IAAI,CAAC,QAAQ,QAAQ,CAAC,QAAQ,EAAE,GAAG;YACjC,SAAS,QAAQ,CAAC;gBAChB,qBAAqB,IAAI,IAAI,qBAAqB,GAAG,CAAC,YAAY;uBAC7D;oBACH,QAAQ,EAAE;iBACX;YACH;QACF;QACA,IAAI,QAAQ,KAAK,KAAK,YAAY;YAChC,SAAS,QAAQ,CAAC;gBAChB,mBAAmB,IAAI,IAAI,SAAS,QAAQ,GAAG,iBAAiB,EAAE,GAAG,CACnE,YACA,QAAQ,EAAE;YAEd;QACF;IACF;AACF;AAEO,SAAS,aAAa,UAAyB;IACpD,SAAS,QAAQ,GAAG,YAAY,CAAC;AACnC;AAEO,SAAS;IACd,SAAS,QAAQ,GAAG,aAAa;AACnC;AAEO,eAAe,gBAAgB,UAAkB;IACtD,MAAM,gBAAgB,SAAS,QAAQ,GAAG,eAAe,CAAC,GAAG,CAAC;IAC9D,MAAM,kBAAkB,SAAS,QAAQ,GAAG,iBAAiB,CAAC,GAAG,CAAC;IAClE,IAAI,iBAAiB,iBAAiB;QACpC,MAAM,cAAc,WAAW;QAC/B,MAAM,QAAQ,CAAA,GAAA,+HAAA,CAAA,YAAS,AAAD,EAAE,YAAY,OAAO,EAAE;YAAE,OAAO;QAAW,GAAG,KAAK;QACzE,MAAM,gBAAgB,WAAW;QACjC,IAAI,0BAAA,oCAAA,cAAe,OAAO,EAAE;YAC1B,cAAc;gBACZ,IAAI,CAAA,GAAA,gNAAA,CAAA,SAAM,AAAD;gBACT,UAAU;gBACV,MAAM;gBACN,SAAS;gBACT,eAAe,EAAE;YACnB;YACA,MAAM,mBAAmB,CAAA,GAAA,gNAAA,CAAA,SAAM,AAAD;YAC9B,MAAM,gBAAgB;gBAAE;gBAAO;YAAW;YAC1C,MAAM,iBAA0B;gBAC9B,IAAI;gBACJ,UAAU;gBACV,MAAM;gBACN,OAAO;gBACP,SAAS,KAAK,SAAS,CAAC;gBACxB,eAAe,EAAE;gBACjB,kBAAkB;gBAClB,wBAAwB,EAAE;gBAC1B,aAAa;YACf;YACA,cAAc;YACd,wBAAwB;YACxB,IAAI;YACJ,IAAI;gBACF,WAAW,MAAM,CAAA,GAAA,gIAAA,CAAA,kBAAe,AAAD,EAAE,cAAc,OAAO;YACxD,EAAE,OAAO,GAAG;gBACV,QAAQ,KAAK,CAAC;gBACd,SAAS,QAAQ,CAAC,CAAC,QAAU,CAAC;wBAC5B,UAAU,IAAI,IAAI,SAAS,QAAQ,GAAG,QAAQ,EAAE,GAAG,CACjD,kBACA;4BACE,GAAG,MAAM,QAAQ,CAAC,GAAG,CAAC,iBAAiB;4BACvC,SAAS,KAAK,SAAS,CAAC;gCACtB,GAAG,aAAa;gCAChB,OAAO,aAAa,QAAQ,EAAE,OAAO,GAAG;4BAC1C;4BACA,aAAa;wBACf;oBAEJ,CAAC;gBACD,CAAA,GAAA,2QAAA,CAAA,QAAK,AAAD,EAAE;gBACN;YACF;YACA,SAAS,QAAQ,CAAC,CAAC,QAAU,CAAC;oBAC5B,UAAU,IAAI,IAAI,SAAS,QAAQ,GAAG,QAAQ,EAAE,GAAG,CAAC,kBAAkB;wBACpE,GAAG,MAAM,QAAQ,CAAC,GAAG,CAAC,iBAAiB;wBACvC,SAAS,KAAK,SAAS,CAAC;4BAAE,GAAG,aAAa;4BAAE;wBAAS;wBACrD,aAAa;oBACf;gBACF,CAAC;QACH;IACF;AACF;AAEO,SAAS,mBAAmB,UAAkB;;IACnD,OAAO,SACL,CAAA,GAAA,gWAAA,CAAA,aAAU,AAAD;kDAAE,CAAC;YACV,MAAM,YAAY,MAAM,eAAe,CAAC,GAAG,CAAC;YAC5C,OAAO,YAAY,MAAM,QAAQ,CAAC,GAAG,CAAC,aAAa;QACrD;;AAEJ;GAPgB;;QACP;;;AAQF,SAAS,WAAW,SAAoC;;IAC7D,OAAO,SACL,CAAA,GAAA,gWAAA,CAAA,aAAU,AAAD;0CAAE,CAAC,QACV,YAAY,MAAM,QAAQ,CAAC,GAAG,CAAC,aAAa;;AAGlD;IANgB;;QACP;;;AAOF,SAAS;;IACd,OAAO,SAAS,CAAA,GAAA,gWAAA,CAAA,aAAU,AAAD;6CAAE,CAAC,QAAU,MAAM,UAAU;;AACxD;IAFgB;;QACP;;;AAGF,SAAS;;IACd,OAAO,SACL,CAAA,GAAA,gWAAA,CAAA,aAAU,AAAD;uDAAE,CAAC;YACV,uEAAuE;YACvE,6EAA6E;YAC7E,OAAO,MAAM,UAAU,CAAC,MAAM;+DAAC,CAAC;oBAC9B,MAAM,UAAU,MAAM,QAAQ,CAAC,GAAG,CAAC;oBACnC,IAAI,CAAC,SAAS,OAAO;oBAErB,wEAAwE;oBACxE,qEAAqE;oBACrE,OACE,QAAQ,IAAI,KAAK,UACjB,QAAQ,KAAK,KAAK,iBAClB,QAAQ,KAAK,KAAK,aAClB,QAAQ,KAAK,KAAK,aAClB,MAAM,WAAW,CAAC,QAAQ,CAAC,WAAW,4BAA4B;;gBAEtE;;QACF;;AAEJ;IArBgB;;QACP;;;AAsBF,SAAS;;IACd,OAAO,SACL,CAAA,GAAA,gWAAA,CAAA,aAAU,AAAD;uDAAE,CAAC;YACV,IAAI,MAAM,UAAU,CAAC,MAAM,IAAI,GAAG;gBAChC,MAAM,cAAc,MAAM,QAAQ,CAAC,GAAG,CACpC,MAAM,UAAU,CAAC,MAAM,UAAU,CAAC,MAAM,GAAG,EAAE;gBAE/C,OAAO,CAAA,wBAAA,kCAAA,YAAa,YAAY,MAAK,cAAc,cAAc;YACnE;YACA,OAAO;QACT;;AAEJ;IAZgB;;QACP;;;AAaF,SAAS;;IACd,MAAM,8BAA8B,SAClC,CAAA,GAAA,gWAAA,CAAA,aAAU,AAAD;0EAAE,CAAC;YACV,IAAI,MAAM,UAAU,CAAC,MAAM,IAAI,GAAG;gBAChC,MAAM,cAAc,MAAM,QAAQ,CAAC,GAAG,CACpC,MAAM,UAAU,CAAC,MAAM,UAAU,CAAC,MAAM,GAAG,EAAE;gBAE/C,IAAI,eAAe,YAAY,YAAY,KAAK,aAAa;oBAC3D,OAAO,MAAM,UAAU,CAAC,MAAM,UAAU,CAAC,MAAM,GAAG,EAAE;gBACtD;YACF;YACA,OAAO;QACT;;IAEF,OAAO;AACT;IAfgB;;QACsB;;;AAgB/B,SAAS;;IACd,OAAO,SACL,CAAA,GAAA,gWAAA,CAAA,aAAU,AAAD;4CAAE,CAAC;gBACH;YAAP,QAAO,oBAAA,MAAM,UAAU,cAAhB,wCAAA,kBACH,GAAG;oDAAC,CAAC;wBAAO;4BAAA,cAAA,WAAW,iBAAX,kCAAA,YAAgB,SAAS;;mDACtC,MAAM;oDAAC,CAAC,YAAc,aAAa;mDACnC,IAAI;QACT;;AAEJ;IATgB;;QACP","debugId":null}},
    {"offset": {"line": 2312, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/deer/web/src/core/store/index.ts"],"sourcesContent":["// Copyright (c) 2025 Bytedance Ltd. and/or its affiliates\n// SPDX-License-Identifier: MIT\n\nexport * from \"./store\";\nexport * from \"./settings-store\";\n"],"names":[],"mappings":"AAAA,0DAA0D;AAC1D,+BAA+B;;AAE/B;AACA","debugId":null}},
    {"offset": {"line": 2336, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/deer/web/src/components/ui/label.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\n\nimport { cn } from \"~/lib/utils\"\n\nfunction Label({\n  className,\n  ...props\n}: React.ComponentProps<typeof LabelPrimitive.Root>) {\n  return (\n    <LabelPrimitive.Root\n      data-slot=\"label\"\n      className={cn(\n        \"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Label }\n"],"names":[],"mappings":";;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,MAAM,KAGoC;QAHpC,EACb,SAAS,EACT,GAAG,OAC8C,GAHpC;IAIb,qBACE,sYAAC,wXAAA,CAAA,OAAmB;QAClB,aAAU;QACV,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,uNACA;QAED,GAAG,KAAK;;;;;;AAGf;KAdS","debugId":null}},
    {"offset": {"line": 2371, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/deer/web/src/components/ui/form.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport {\n  Controller,\n  FormProvider,\n  useFormContext,\n  useFormState,\n  type ControllerProps,\n  type FieldPath,\n  type FieldValues,\n} from \"react-hook-form\"\n\nimport { cn } from \"~/lib/utils\"\nimport { Label } from \"~/components/ui/label\"\n\nconst Form = FormProvider\n\ntype FormFieldContextValue<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>,\n> = {\n  name: TName\n}\n\nconst FormFieldContext = React.createContext<FormFieldContextValue>(\n  {} as FormFieldContextValue\n)\n\nconst FormField = <\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>,\n>({\n  ...props\n}: ControllerProps<TFieldValues, TName>) => {\n  return (\n    <FormFieldContext.Provider value={{ name: props.name }}>\n      <Controller {...props} />\n    </FormFieldContext.Provider>\n  )\n}\n\nconst useFormField = () => {\n  const fieldContext = React.useContext(FormFieldContext)\n  const itemContext = React.useContext(FormItemContext)\n  const { getFieldState } = useFormContext()\n  const formState = useFormState({ name: fieldContext.name })\n  const fieldState = getFieldState(fieldContext.name, formState)\n\n  if (!fieldContext) {\n    throw new Error(\"useFormField should be used within <FormField>\")\n  }\n\n  const { id } = itemContext\n\n  return {\n    id,\n    name: fieldContext.name,\n    formItemId: `${id}-form-item`,\n    formDescriptionId: `${id}-form-item-description`,\n    formMessageId: `${id}-form-item-message`,\n    ...fieldState,\n  }\n}\n\ntype FormItemContextValue = {\n  id: string\n}\n\nconst FormItemContext = React.createContext<FormItemContextValue>(\n  {} as FormItemContextValue\n)\n\nfunction FormItem({ className, ...props }: React.ComponentProps<\"div\">) {\n  const id = React.useId()\n\n  return (\n    <FormItemContext.Provider value={{ id }}>\n      <div\n        data-slot=\"form-item\"\n        className={cn(\"grid gap-2\", className)}\n        {...props}\n      />\n    </FormItemContext.Provider>\n  )\n}\n\nfunction FormLabel({\n  className,\n  ...props\n}: React.ComponentProps<typeof LabelPrimitive.Root>) {\n  const { error, formItemId } = useFormField()\n\n  return (\n    <Label\n      data-slot=\"form-label\"\n      data-error={!!error}\n      className={cn(\"data-[error=true]:text-destructive\", className)}\n      htmlFor={formItemId}\n      {...props}\n    />\n  )\n}\n\nfunction FormControl({ ...props }: React.ComponentProps<typeof Slot>) {\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()\n\n  return (\n    <Slot\n      data-slot=\"form-control\"\n      id={formItemId}\n      aria-describedby={\n        !error\n          ? `${formDescriptionId}`\n          : `${formDescriptionId} ${formMessageId}`\n      }\n      aria-invalid={!!error}\n      {...props}\n    />\n  )\n}\n\nfunction FormDescription({ className, ...props }: React.ComponentProps<\"p\">) {\n  const { formDescriptionId } = useFormField()\n\n  return (\n    <p\n      data-slot=\"form-description\"\n      id={formDescriptionId}\n      className={cn(\"text-muted-foreground text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction FormMessage({ className, ...props }: React.ComponentProps<\"p\">) {\n  const { error, formMessageId } = useFormField()\n  const body = error ? String(error?.message ?? \"\") : props.children\n\n  if (!body) {\n    return null\n  }\n\n  return (\n    <p\n      data-slot=\"form-message\"\n      id={formMessageId}\n      className={cn(\"text-destructive text-sm\", className)}\n      {...props}\n    >\n      {body}\n    </p>\n  )\n}\n\nexport {\n  useFormField,\n  Form,\n  FormItem,\n  FormLabel,\n  FormControl,\n  FormDescription,\n  FormMessage,\n  FormField,\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2580, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/deer/web/src/components/ui/input.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"~/lib/utils\"\n\nfunction Input({ className, type, ...props }: React.ComponentProps<\"input\">) {\n  return (\n    <input\n      type={type}\n      data-slot=\"input\"\n      className={cn(\n        \"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        \"focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]\",\n        \"aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Input }\n"],"names":[],"mappings":";;;;AAEA;;;AAEA,SAAS,MAAM,KAA4D;QAA5D,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAsC,GAA5D;IACb,qBACE,sYAAC;QACC,MAAM;QACN,aAAU;QACV,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,mcACA,iFACA,0GACA;QAED,GAAG,KAAK;;;;;;AAGf;KAdS","debugId":null}},
    {"offset": {"line": 2613, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/deer/web/src/components/ui/switch.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as SwitchPrimitive from \"@radix-ui/react-switch\"\n\nimport { cn } from \"~/lib/utils\"\n\nfunction Switch({\n  className,\n  ...props\n}: React.ComponentProps<typeof SwitchPrimitive.Root>) {\n  return (\n    <SwitchPrimitive.Root\n      data-slot=\"switch\"\n      className={cn(\n        \"peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    >\n      <SwitchPrimitive.Thumb\n        data-slot=\"switch-thumb\"\n        className={cn(\n          \"bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0\"\n        )}\n      />\n    </SwitchPrimitive.Root>\n  )\n}\n\nexport { Switch }\n"],"names":[],"mappings":";;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,OAAO,KAGoC;QAHpC,EACd,SAAS,EACT,GAAG,OAC+C,GAHpC;IAId,qBACE,sYAAC,yXAAA,CAAA,OAAoB;QACnB,aAAU;QACV,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,6WACA;QAED,GAAG,KAAK;kBAET,cAAA,sYAAC,yXAAA,CAAA,QAAqB;YACpB,aAAU;YACV,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV;;;;;;;;;;;AAKV;KArBS","debugId":null}},
    {"offset": {"line": 2656, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/deer/web/src/app/settings/tabs/general-tab.tsx"],"sourcesContent":["// Copyright (c) 2025 Bytedance Ltd. and/or its affiliates\n// SPDX-License-Identifier: MIT\n\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { Settings } from \"lucide-react\";\nimport { useTranslations } from \"next-intl\";\nimport { useEffect, useMemo } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { z } from \"zod\";\n\nimport {\n  Form,\n  FormControl,\n  FormDescription,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n} from \"~/components/ui/form\";\nimport { Input } from \"~/components/ui/input\";\nimport { Label } from \"~/components/ui/label\";\nimport { Switch } from \"~/components/ui/switch\";\nimport type { SettingsState } from \"~/core/store\";\n\nimport type { Tab } from \"./types\";\n\nconst generalFormSchema = z.object({\n  autoAcceptedPlan: z.boolean(),\n  enableClarification: z.boolean(),\n  maxClarificationRounds: z.number().min(1, {\n    message: \"Max clarification rounds must be at least 1.\",\n  }),\n  maxPlanIterations: z.number().min(1, {\n    message: \"Max plan iterations must be at least 1.\",\n  }),\n  maxStepNum: z.number().min(1, {\n    message: \"Max step number must be at least 1.\",\n  }),\n  maxSearchResults: z.number().min(1, {\n    message: \"Max search results must be at least 1.\",\n  }),\n  // Others\n  enableBackgroundInvestigation: z.boolean(),\n  enableDeepThinking: z.boolean(),\n  reportStyle: z.enum([\"academic\", \"popular_science\", \"news\", \"social_media\",\"strategic_investment\"]),\n});\n\nexport const GeneralTab: Tab = ({\n  settings,\n  onChange,\n}: {\n  settings: SettingsState;\n  onChange: (changes: Partial<SettingsState>) => void;\n}) => {\n  const t = useTranslations(\"settings.general\");\n  const generalSettings = useMemo(() => settings.general, [settings]);\n  const form = useForm<z.infer<typeof generalFormSchema>>({\n    resolver: zodResolver(generalFormSchema, undefined, undefined),\n    defaultValues: generalSettings,\n    mode: \"all\",\n    reValidateMode: \"onBlur\",\n  });\n\n  const currentSettings = form.watch();\n  useEffect(() => {\n    let hasChanges = false;\n    for (const key in currentSettings) {\n      if (\n        currentSettings[key as keyof typeof currentSettings] !==\n        settings.general[key as keyof SettingsState[\"general\"]]\n      ) {\n        hasChanges = true;\n        break;\n      }\n    }\n    if (hasChanges) {\n      onChange({ general: currentSettings });\n    }\n  }, [currentSettings, onChange, settings]);\n\n  return (\n    <div className=\"flex flex-col gap-4\">\n      <header>\n        <h1 className=\"text-lg font-medium\">{t(\"title\")}</h1>\n      </header>\n      <main>\n        <Form {...form}>\n          <form className=\"space-y-8\">\n            <FormField\n              control={form.control}\n              name=\"autoAcceptedPlan\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormControl>\n                    <div className=\"flex items-center gap-2\">\n                      <Switch\n                        id=\"autoAcceptedPlan\"\n                        checked={field.value}\n                        onCheckedChange={field.onChange}\n                      />\n                      <Label className=\"text-sm\" htmlFor=\"autoAcceptedPlan\">\n                        {t(\"autoAcceptPlan\")}\n                      </Label>\n                    </div>\n                  </FormControl>\n                </FormItem>\n              )}\n            />\n            <FormField\n              control={form.control}\n              name=\"enableClarification\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormControl>\n                    <div className=\"flex items-center gap-2\">\n                      <Switch\n                        id=\"enableClarification\"\n                        checked={field.value}\n                        onCheckedChange={field.onChange}\n                      />\n                      <Label className=\"text-sm\" htmlFor=\"enableClarification\">\n                        {t(\"enableClarification\")} {field.value ? \"(On)\" : \"(Off)\"}\n                      </Label>\n                    </div>\n                  </FormControl>\n                </FormItem>\n              )}\n            />\n            {form.watch(\"enableClarification\") && (\n              <FormField\n                control={form.control}\n                name=\"maxClarificationRounds\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>{t(\"maxClarificationRounds\")}</FormLabel>\n                    <FormControl>\n                      <Input\n                        className=\"w-60\"\n                        type=\"number\"\n                        defaultValue={field.value}\n                        min={1}\n                        onChange={(event) =>\n                          field.onChange(parseInt(event.target.value || \"1\"))\n                        }\n                      />\n                    </FormControl>\n                    <FormDescription>\n                      {t(\"maxClarificationRoundsDescription\")}\n                    </FormDescription>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n            )}\n            <FormField\n              control={form.control}\n              name=\"maxPlanIterations\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>{t(\"maxPlanIterations\")}</FormLabel>\n                  <FormControl>\n                    <Input\n                      className=\"w-60\"\n                      type=\"number\"\n                      defaultValue={field.value}\n                      min={1}\n                      onChange={(event) =>\n                        field.onChange(parseInt(event.target.value || \"0\"))\n                      }\n                    />\n                  </FormControl>\n                  <FormDescription>\n                    {t(\"maxPlanIterationsDescription\")}\n                  </FormDescription>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n            <FormField\n              control={form.control}\n              name=\"maxStepNum\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>{t(\"maxStepsOfPlan\")}</FormLabel>\n                  <FormControl>\n                    <Input\n                      className=\"w-60\"\n                      type=\"number\"\n                      defaultValue={field.value}\n                      min={1}\n                      onChange={(event) =>\n                        field.onChange(parseInt(event.target.value || \"0\"))\n                      }\n                    />\n                  </FormControl>\n                  <FormDescription>{t(\"maxStepsDescription\")}</FormDescription>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n            <FormField\n              control={form.control}\n              name=\"maxSearchResults\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>{t(\"maxSearchResults\")}</FormLabel>\n                  <FormControl>\n                    <Input\n                      className=\"w-60\"\n                      type=\"number\"\n                      defaultValue={field.value}\n                      min={1}\n                      onChange={(event) =>\n                        field.onChange(parseInt(event.target.value || \"0\"))\n                      }\n                    />\n                  </FormControl>\n                  <FormDescription>\n                    {t(\"maxSearchResultsDescription\")}\n                  </FormDescription>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n          </form>\n        </Form>\n      </main>\n    </div>\n  );\n};\nGeneralTab.displayName = \"General\";\nGeneralTab.icon = Settings;\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3136, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/deer/web/src/app/settings/tabs/index.tsx"],"sourcesContent":["// Copyright (c) 2025 Bytedance Ltd. and/or its affiliates\n// SPDX-License-Identifier: MIT\n\nimport { Settings, type LucideIcon } from \"lucide-react\";\n\nimport { GeneralTab } from \"./general-tab\";\n\nexport const SETTINGS_TABS = [GeneralTab].map((tab) => {\n  const name = tab.displayName ?? tab.name;\n  return {\n    ...tab,\n    id: name.replace(/Tab$/, \"\").toLocaleLowerCase(),\n    label: name.replace(/Tab$/, \"\"),\n    icon: (tab.icon ?? <Settings />) as LucideIcon,\n    component: tab,\n  };\n});\n"],"names":[],"mappings":"AAAA,0DAA0D;AAC1D,+BAA+B;;;;;AAE/B;AAEA;;;;AAEO,MAAM,gBAAgB;IAAC,oJAAA,CAAA,aAAU;CAAC,CAAC,GAAG,MAAC,CAAC;QAChC;IAAb,MAAM,OAAO,CAAA,mBAAA,IAAI,WAAW,cAAf,8BAAA,mBAAmB,IAAI,IAAI;QAK/B;IAJT,OAAO;QACL,GAAG,GAAG;QACN,IAAI,KAAK,OAAO,CAAC,QAAQ,IAAI,iBAAiB;QAC9C,OAAO,KAAK,OAAO,CAAC,QAAQ;QAC5B,MAAO,CAAA,YAAA,IAAI,IAAI,cAAR,uBAAA,0BAAY,sYAAC,iSAAA,CAAA,WAAQ;;;;;QAC5B,WAAW;IACb;AACF","debugId":null}},
    {"offset": {"line": 3178, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/deer/web/src/app/settings/dialogs/settings-dialog.tsx"],"sourcesContent":["// Copyright (c) 2025 Bytedance Ltd. and/or its affiliates\n// SPDX-License-Identifier: MIT\n\nimport { Settings } from \"lucide-react\";\nimport { useTranslations } from 'next-intl';\nimport { useCallback, useEffect, useMemo, useState } from \"react\";\n\nimport { Tooltip } from \"~/components/deer-flow/tooltip\";\nimport { Badge } from \"~/components/ui/badge\";\nimport { Button } from \"~/components/ui/button\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n  DialogTrigger,\n} from \"~/components/ui/dialog\";\nimport { Tabs, TabsContent } from \"~/components/ui/tabs\";\nimport { useReplay } from \"~/core/replay\";\nimport {\n  type SettingsState,\n  changeSettings,\n  saveSettings,\n  useSettingsStore,\n} from \"~/core/store\";\nimport { cn } from \"~/lib/utils\";\n\nimport { SETTINGS_TABS } from \"../tabs\";\n\nexport function SettingsDialog() {\n  const t = useTranslations('settings');\n  const tCommon = useTranslations('common');\n  const { isReplay } = useReplay();\n  const [activeTabId, setActiveTabId] = useState(SETTINGS_TABS[0]!.id);\n  const [open, setOpen] = useState(false);\n  const [settings, setSettings] = useState(useSettingsStore.getState());\n  const [changes, setChanges] = useState<Partial<SettingsState>>({});\n\n  const handleTabChange = useCallback(\n    (newChanges: Partial<SettingsState>) => {\n      setTimeout(() => {\n        if (open) {\n          setChanges((prev) => ({\n            ...prev,\n            ...newChanges,\n          }));\n        }\n      }, 0);\n    },\n    [open],\n  );\n\n  const handleSave = useCallback(() => {\n    if (Object.keys(changes).length > 0) {\n      const newSettings: SettingsState = {\n        ...settings,\n        ...changes,\n      };\n      setSettings(newSettings);\n      setChanges({});\n      changeSettings(newSettings);\n      saveSettings();\n    }\n    setOpen(false);\n  }, [settings, changes]);\n\n  const handleOpen = useCallback(() => {\n    setSettings(useSettingsStore.getState());\n  }, []);\n\n  const handleClose = useCallback(() => {\n    setChanges({});\n  }, []);\n\n  useEffect(() => {\n    if (open) {\n      handleOpen();\n    } else {\n      handleClose();\n    }\n  }, [open, handleOpen, handleClose]);\n\n  const mergedSettings = useMemo<SettingsState>(() => {\n    return {\n      ...settings,\n      ...changes,\n    };\n  }, [settings, changes]);\n\n  if (isReplay) {\n    return null;\n  }\n\n  return (\n    <Dialog open={open} onOpenChange={setOpen}>\n      <Tooltip title={tCommon('settings')}>\n        <DialogTrigger asChild>\n          <Button variant=\"ghost\" size=\"icon\">\n            <Settings />\n          </Button>\n        </DialogTrigger>\n      </Tooltip>\n      <DialogContent className=\"sm:max-w-[850px]\">\n        <DialogHeader>\n          <DialogTitle>{t('title')}</DialogTitle>\n          <DialogDescription>\n            {t('description')}\n          </DialogDescription>\n        </DialogHeader>\n        <Tabs value={activeTabId}>\n          <div className=\"flex h-120 w-full overflow-auto border-y\">\n            <ul className=\"flex w-50 shrink-0 border-r p-1\">\n              <div className=\"size-full\">\n                {SETTINGS_TABS.map((tab) => (\n                  <li\n                    key={tab.id}\n                    className={cn(\n                      \"hover:accent-foreground hover:bg-accent mb-1 flex h-8 w-full cursor-pointer items-center gap-1.5 rounded px-2\",\n                      activeTabId === tab.id &&\n                        \"!bg-primary !text-primary-foreground\",\n                    )}\n                    onClick={() => setActiveTabId(tab.id)}\n                  >\n                    <tab.icon size={16} />\n                    <span>{tab.label}</span>\n                    {tab.badge && (\n                      <Badge\n                        variant=\"outline\"\n                        className={cn(\n                          \"border-muted-foreground text-muted-foreground ml-auto px-1 py-0 text-xs\",\n                          activeTabId === tab.id &&\n                            \"border-primary-foreground text-primary-foreground\",\n                        )}\n                      >\n                        {tab.badge}\n                      </Badge>\n                    )}\n                  </li>\n                ))}\n              </div>\n            </ul>\n            <div className=\"min-w-0 flex-grow\">\n              <div\n                id=\"settings-content-scrollable\"\n                className=\"size-full overflow-auto p-4\"\n              >\n                {SETTINGS_TABS.map((tab) => (\n                  <TabsContent key={tab.id} value={tab.id}>\n                    <tab.component\n                      settings={mergedSettings}\n                      onChange={handleTabChange}\n                    />\n                  </TabsContent>\n                ))}\n              </div>\n            </div>\n          </div>\n        </Tabs>\n        <DialogFooter>\n          <Button variant=\"outline\" onClick={() => setOpen(false)}>\n            {tCommon('cancel')}\n          </Button>\n          <Button className=\"w-24\" type=\"submit\" onClick={handleSave}>\n            {tCommon('save')}\n          </Button>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3502, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/deer/web/src/app/web-dev/page.tsx"],"sourcesContent":["// Copyright (c) 2025 Bytedance Ltd. and/or its affiliates\n// SPDX-License-Identifier: MIT\n\n\"use client\";\n\nimport { GithubOutlined } from \"@ant-design/icons\";\nimport dynamic from \"next/dynamic\";\nimport Link from \"next/link\";\nimport { useTranslations } from \"next-intl\";\nimport { Suspense } from \"react\";\n\nimport { Button } from \"~/components/ui/button\";\nimport { cn } from \"~/lib/utils\";\n\nimport { Logo } from \"../../components/deer-flow/logo\";\nimport { ThemeToggle } from \"../../components/deer-flow/theme-toggle\";\nimport { Tooltip } from \"../../components/deer-flow/tooltip\";\n// Adjusted path: from web-dev to settings is ../settings\nimport { SettingsDialog } from \"../settings/dialogs/settings-dialog\";\n\n// Import the local Main component\nconst Main = dynamic(() => import(\"./main\"), {\n  ssr: false,\n  loading: () => (\n    <div className=\"flex h-full w-full items-center justify-center\">\n      Loading DeerFlow...\n    </div>\n  ),\n});\n\nexport default function HomePage() {\n  const t = useTranslations(\"chat.page\");\n\n  return (\n    <div\n      className={cn(\n        \"flex h-screen w-screen justify-center overscroll-none\",\n      )}\n    >\n      <header className=\"fixed top-0 left-0 flex h-12 w-full items-center justify-between px-4\">\n        <Logo />\n        <div className=\"flex items-center\">\n          <Tooltip title={t(\"starOnGitHub\")}>\n            <Button variant=\"ghost\" size=\"icon\" asChild>\n              <Link\n                href=\"https://github.com/bytedance/deer-flow\"\n                target=\"_blank\"\n              >\n                <GithubOutlined />\n              </Link>\n            </Button>\n          </Tooltip>\n          <ThemeToggle />\n          <Suspense>\n            <SettingsDialog />\n          </Suspense>\n        </div>\n      </header>\n      <Main />\n    </div>\n  );\n}\n"],"names":[],"mappings":"AAAA,0DAA0D;AAC1D,+BAA+B;;;;;AAI/B;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA,yDAAyD;AACzD;;;;AAfA;;;;;;;;;;;;AAiBA,kCAAkC;AAClC,MAAM,OAAO,CAAA,GAAA,2WAAA,CAAA,UAAO,AAAD,EAAE;;;;;;IACnB,KAAK;IACL,SAAS,kBACP,sYAAC;YAAI,WAAU;sBAAiD;;;;;;;KAH9D;AASS,SAAS;;IACtB,MAAM,IAAI,CAAA,GAAA,8ZAAA,CAAA,kBAAe,AAAD,EAAE;IAE1B,qBACE,sYAAC;QACC,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV;;0BAGF,sYAAC;gBAAO,WAAU;;kCAChB,sYAAC,6IAAA,CAAA,OAAI;;;;;kCACL,sYAAC;wBAAI,WAAU;;0CACb,sYAAC,gJAAA,CAAA,UAAO;gCAAC,OAAO,EAAE;0CAChB,cAAA,sYAAC,qIAAA,CAAA,SAAM;oCAAC,SAAQ;oCAAQ,MAAK;oCAAO,OAAO;8CACzC,cAAA,sYAAC,wWAAA,CAAA,UAAI;wCACH,MAAK;wCACL,QAAO;kDAEP,cAAA,sYAAC,2WAAA,CAAA,iBAAc;;;;;;;;;;;;;;;;;;;;0CAIrB,sYAAC,wJAAA,CAAA,cAAW;;;;;0CACZ,sYAAC,sWAAA,CAAA,WAAQ;0CACP,cAAA,sYAAC,2JAAA,CAAA,iBAAc;;;;;;;;;;;;;;;;;;;;;;0BAIrB,sYAAC;;;;;;;;;;;AAGP;GA/BwB;;QACZ,8ZAAA,CAAA,kBAAe;;;MADH","debugId":null}}]
}