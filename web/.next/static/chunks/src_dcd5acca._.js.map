{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/components/deer-flow/rainbow-text.module.css [app-client] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"animated\": \"rainbow-text-module__D-e5SG__animated\",\n  \"textShine\": \"rainbow-text-module__D-e5SG__textShine\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA"}},
    {"offset": {"line": 14, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/deer/web/src/components/deer-flow/rainbow-text.tsx"],"sourcesContent":["// Copyright (c) 2025 Bytedance Ltd. and/or its affiliates\n// SPDX-License-Identifier: MIT\n\nimport { cn } from \"~/lib/utils\";\n\nimport styles from \"./rainbow-text.module.css\";\n\nexport function RainbowText({\n  animated,\n  className,\n  children,\n}: {\n  animated?: boolean;\n  className?: string;\n  children?: React.ReactNode;\n}) {\n  return (\n    <span className={cn(animated && styles.animated, className)}>\n      {children}\n    </span>\n  );\n}\n"],"names":[],"mappings":"AAAA,0DAA0D;AAC1D,+BAA+B;;;;;AAE/B;AAEA;;;;AAEO,SAAS,YAAY,KAQ3B;QAR2B,EAC1B,QAAQ,EACR,SAAS,EACT,QAAQ,EAKT,GAR2B;IAS1B,qBACE,sYAAC;QAAK,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,YAAY,mKAAA,CAAA,UAAM,CAAC,QAAQ,EAAE;kBAC9C;;;;;;AAGP;KAdgB","debugId":null}},
    {"offset": {"line": 48, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/deer/web/src/components/ui/card.tsx"],"sourcesContent":["// Copyright (c) 2025 Bytedance Ltd. and/or its affiliates\n// SPDX-License-Identifier: MIT\n\nimport * as React from \"react\"\n\nimport { cn } from \"~/lib/utils\"\n\nfunction Card({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card\"\n      className={cn(\n        \"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-header\"\n      className={cn(\n        \"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardTitle({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-title\"\n      className={cn(\"leading-none font-semibold\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardDescription({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-description\"\n      className={cn(\"text-muted-foreground text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardAction({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-action\"\n      className={cn(\n        \"col-start-2 row-span-2 row-start-1 self-start justify-self-end\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-content\"\n      className={cn(\"px-6\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-footer\"\n      className={cn(\"flex items-center px-6 [.border-t]:pt-6\", className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardAction,\n  CardDescription,\n  CardContent,\n}\n"],"names":[],"mappings":"AAAA,0DAA0D;AAC1D,+BAA+B;;;;;;;;;;;AAI/B;;;AAEA,SAAS,KAAK,KAAoD;QAApD,EAAE,SAAS,EAAE,GAAG,OAAoC,GAApD;IACZ,qBACE,sYAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,qFACA;QAED,GAAG,KAAK;;;;;;AAGf;KAXS;AAaT,SAAS,WAAW,KAAoD;QAApD,EAAE,SAAS,EAAE,GAAG,OAAoC,GAApD;IAClB,qBACE,sYAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,8JACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,UAAU,KAAoD;QAApD,EAAE,SAAS,EAAE,GAAG,OAAoC,GAApD;IACjB,qBACE,sYAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,gBAAgB,KAAoD;QAApD,EAAE,SAAS,EAAE,GAAG,OAAoC,GAApD;IACvB,qBACE,sYAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,WAAW,KAAoD;QAApD,EAAE,SAAS,EAAE,GAAG,OAAoC,GAApD;IAClB,qBACE,sYAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,kEACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,YAAY,KAAoD;QAApD,EAAE,SAAS,EAAE,GAAG,OAAoC,GAApD;IACnB,qBACE,sYAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,QAAQ;QACrB,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,WAAW,KAAoD;QAApD,EAAE,SAAS,EAAE,GAAG,OAAoC,GAApD;IAClB,qBACE,sYAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,2CAA2C;QACxD,GAAG,KAAK;;;;;;AAGf;MARS","debugId":null}},
    {"offset": {"line": 172, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/deer/web/src/core/api/hooks.ts"],"sourcesContent":["// Copyright (c) 2025 Bytedance Ltd. and/or its affiliates\n// SPDX-License-Identifier: MIT\n\nimport { useEffect, useRef, useState } from \"react\";\n\nimport { env } from \"~/env\";\n\nimport type { DeerFlowConfig } from \"../config\";\nimport { useReplay } from \"../replay\";\n\nimport { fetchReplayTitle } from \"./chat\";\nimport { resolveServiceURL } from \"./resolve-service-url\";\n\nexport function useReplayMetadata() {\n  const { isReplay } = useReplay();\n  const [title, setTitle] = useState<string | null>(null);\n  const isLoading = useRef(false);\n  const [error, setError] = useState<boolean>(false);\n  useEffect(() => {\n    if (!isReplay) {\n      return;\n    }\n    if (title || isLoading.current) {\n      return;\n    }\n    isLoading.current = true;\n    fetchReplayTitle()\n      .then((title) => {\n        setError(false);\n        setTitle(title ?? null);\n        if (title) {\n          document.title = `${title} - DeepCraft`;\n        }\n      })\n      .catch(() => {\n        setError(true);\n        setTitle(\"Error: the replay is not available.\");\n        document.title = \"DeepCraft\";\n      })\n      .finally(() => {\n        isLoading.current = false;\n      });\n  }, [isLoading, isReplay, title]);\n  return { title, isLoading, hasError: error };\n}\n\nconst DEFAULT_CONFIG: DeerFlowConfig = {\n  rag: { provider: \"\" },\n  models: { basic: [], reasoning: [] },\n};\n\nlet configCache: DeerFlowConfig | null = null;\nlet configPromise: Promise<DeerFlowConfig> | null = null;\n\nexport function useConfig(): {\n  config: DeerFlowConfig;\n  loading: boolean;\n} {\n  const [loading, setLoading] = useState(true);\n  const [config, setConfig] = useState<DeerFlowConfig>(DEFAULT_CONFIG);\n\n  useEffect(() => {\n    if (env.NEXT_PUBLIC_STATIC_WEBSITE_ONLY) {\n      setLoading(false);\n      return;\n    }\n\n    const fetchConfigWithRetry = async (): Promise<DeerFlowConfig> => {\n      const maxRetries = 2;\n      let lastError: Error | null = null;\n\n      for (let attempt = 0; attempt <= maxRetries; attempt++) {\n        try {\n          const res = await fetch(resolveServiceURL(\"./config\"), {\n            signal: AbortSignal.timeout(5000), // 5 second timeout\n          });\n\n          if (!res.ok) {\n            throw new Error(`HTTP ${res.status}: ${res.statusText}`);\n          }\n\n          const configData: DeerFlowConfig = await res.json();\n          return configData; // Success, exit retry loop\n        } catch (err) {\n          lastError = err instanceof Error ? err : new Error(String(err));\n\n          // Log attempt details\n          if (attempt === 0) {\n            const apiUrl = resolveServiceURL(\"./config\");\n            console.warn(\n              `[Config] Failed to fetch from ${apiUrl}: ${lastError.message}`,\n            );\n          }\n\n          // Wait before retrying (exponential backoff: 100ms, 500ms)\n          if (attempt < maxRetries) {\n            const delay = Math.pow(2, attempt) * 100;\n            await new Promise((resolve) => setTimeout(resolve, delay));\n          }\n        }\n      }\n\n      // All retries failed, use default config\n      console.warn(\n        `[Config] Using default config after ${maxRetries + 1} attempts. Last error: ${lastError?.message ?? \"Unknown\"}`,\n      );\n      return DEFAULT_CONFIG;\n    };\n\n    const loadConfig = async () => {\n      try {\n        if (!configPromise) {\n          configPromise = fetchConfigWithRetry().then((cfg) => {\n            configCache = cfg;\n            return cfg;\n          });\n        }\n\n        const cfg = await configPromise;\n        setConfig(cfg);\n      } catch (error) {\n        console.warn(\n          \"[Config] Using default config because fetch failed in hook:\",\n          error,\n        );\n        setConfig(DEFAULT_CONFIG);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    if (configCache) {\n      setConfig(configCache);\n      setLoading(false);\n      return;\n    }\n\n    void loadConfig();\n  }, []);\n\n  return { config, loading };\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 342, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/deer/web/src/components/deer-flow/icons/detective.tsx"],"sourcesContent":["export function Detective({ className }: { className?: string }) {\n  return (\n    <svg\n      className={className}\n      version=\"1.1\"\n      width=\"800px\"\n      height=\"800px\"\n      viewBox=\"0 0 512 512\"\n    >\n      <g fill=\"currentcolor\">\n        <path\n          d=\"M392.692,257.322c-1.172-8.125-2.488-16.98-3.807-25.984c-5.856-39.012-12.59-81.688-14.86-87.832\n\t\tc-4.318-11.715-18.371-44.723-68.217-25.984c-15.738,5.926-18.812,11.93-41.648,8.93c-17.273-2.27-28.326-15.59-52.336-24.668\n\t\tc-49.844-18.883-71.584,11.711-75.902,23.422c-2.27,6.148-9.004,67.121-14.86,106.133c-1.39,8.86-2.633,17.566-3.804,25.621\n\t\tc37.256,7.535,84.174,12.879,138.705,12.879C309.541,269.837,355.801,264.716,392.692,257.322z\"\n        />\n        <path\n          d=\"M443.707,306.509c-8.051-2.196-16.834-4.246-26.057-6.148c-1.83-0.805-3.66-1.535-5.49-2.27h-0.072\n\t\tc-46.918,10.394-102.254,15.664-156.125,15.664c-53.652,0-108.768-5.27-155.541-15.516c-1.316,0.512-2.707,1.098-4.098,1.684\n\t\tc-8.858,1.828-17.348,3.73-25.106,5.781l-0.148,0.074C27.008,317.49,0,333.372,0,350.939c0,36.012,114.549,65.289,256.035,65.289\n\t\tc141.34,0,255.965-29.278,255.965-65.289C512,333.74,486.016,318.22,443.707,306.509z\"\n        />\n      </g>\n    </svg>\n  );\n}\n"],"names":[],"mappings":";;;;;AAAO,SAAS,UAAU,KAAqC;QAArC,EAAE,SAAS,EAA0B,GAArC;IACxB,qBACE,sYAAC;QACC,WAAW;QACX,SAAQ;QACR,OAAM;QACN,QAAO;QACP,SAAQ;kBAER,cAAA,sYAAC;YAAE,MAAK;;8BACN,sYAAC;oBACC,GAAE;;;;;;8BAKJ,sYAAC;oBACC,GAAE;;;;;;;;;;;;;;;;;AAQZ;KAzBgB","debugId":null}},
    {"offset": {"line": 396, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/deer/web/src/components/deer-flow/resource-mentions.tsx"],"sourcesContent":["// Copyright (c) 2025 Bytedance Ltd. and/or its affiliates\n// SPDX-License-Identifier: MIT\n\nimport { useTranslations } from \"next-intl\";\nimport { forwardRef, useEffect, useImperativeHandle, useState } from \"react\";\nimport type { Resource } from \"~/core/messages\";\nimport { cn } from \"~/lib/utils\";\n\nexport interface ResourceMentionsProps {\n  items: Array<Resource>;\n  command: (item: { id: string; label: string }) => void;\n}\n\nexport const ResourceMentions = forwardRef<\n  { onKeyDown: (args: { event: KeyboardEvent }) => boolean },\n  ResourceMentionsProps\n>((props, ref) => {\n  const t = useTranslations(\"common\")\n  const [selectedIndex, setSelectedIndex] = useState(0);\n\n  const selectItem = (index: number) => {\n    const item = props.items[index];\n\n    if (item) {\n      props.command({ id: item.uri, label: item.title });\n    }\n  };\n\n  const upHandler = () => {\n    setSelectedIndex(\n      (selectedIndex + props.items.length - 1) % props.items.length,\n    );\n  };\n\n  const downHandler = () => {\n    setSelectedIndex((selectedIndex + 1) % props.items.length);\n  };\n\n  const enterHandler = () => {\n    selectItem(selectedIndex);\n  };\n\n  useEffect(() => setSelectedIndex(0), [props.items]);\n\n  useImperativeHandle(ref, () => ({\n    onKeyDown: ({ event }) => {\n      if (event.key === \"ArrowUp\") {\n        upHandler();\n        return true;\n      }\n\n      if (event.key === \"ArrowDown\") {\n        downHandler();\n        return true;\n      }\n\n      if (event.key === \"Enter\") {\n        enterHandler();\n        return true;\n      }\n\n      return false;\n    },\n  }));\n\n  return (\n    <div className=\"bg-card border-var(--border) relative flex flex-col gap-1 overflow-auto rounded-md border p-2 shadow\">\n      {props.items.length ? (\n        props.items.map((item, index) => (\n          <button\n            className={cn(\n              \"focus-visible:ring-ring hover:bg-accent hover:text-accent-foreground inline-flex h-9 w-full items-center justify-start gap-2 rounded-md px-4 py-2 text-sm whitespace-nowrap transition-colors focus-visible:ring-1 focus-visible:outline-none disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n              selectedIndex === index &&\n                \"bg-secondary text-secondary-foreground\",\n            )}\n            key={index}\n            onClick={() => selectItem(index)}\n          >\n            {item.title}\n          </button>\n        ))\n      ) : (\n        <div className=\"items-center justify-center text-gray-500\">\n          {t(\"noResult\")}\n        </div>\n      )}\n    </div>\n  );\n});\n"],"names":[],"mappings":"AAAA,0DAA0D;AAC1D,+BAA+B;;;;;AAE/B;AACA;AAEA;;;;;;AAOO,MAAM,iCAAmB,GAAA,CAAA,GAAA,sWAAA,CAAA,aAAU,AAAD,UAGvC,CAAC,OAAO;;IACR,MAAM,IAAI,CAAA,GAAA,8ZAAA,CAAA,kBAAe,AAAD,EAAE;IAC1B,MAAM,CAAC,eAAe,iBAAiB,GAAG,CAAA,GAAA,sWAAA,CAAA,WAAQ,AAAD,EAAE;IAEnD,MAAM,aAAa,CAAC;QAClB,MAAM,OAAO,MAAM,KAAK,CAAC,MAAM;QAE/B,IAAI,MAAM;YACR,MAAM,OAAO,CAAC;gBAAE,IAAI,KAAK,GAAG;gBAAE,OAAO,KAAK,KAAK;YAAC;QAClD;IACF;IAEA,MAAM,YAAY;QAChB,iBACE,CAAC,gBAAgB,MAAM,KAAK,CAAC,MAAM,GAAG,CAAC,IAAI,MAAM,KAAK,CAAC,MAAM;IAEjE;IAEA,MAAM,cAAc;QAClB,iBAAiB,CAAC,gBAAgB,CAAC,IAAI,MAAM,KAAK,CAAC,MAAM;IAC3D;IAEA,MAAM,eAAe;QACnB,WAAW;IACb;IAEA,CAAA,GAAA,sWAAA,CAAA,YAAS,AAAD;sCAAE,IAAM,iBAAiB;qCAAI;QAAC,MAAM,KAAK;KAAC;IAElD,CAAA,GAAA,sWAAA,CAAA,sBAAmB,AAAD,EAAE;gDAAK,IAAM,CAAC;gBAC9B,SAAS;4DAAE;4BAAC,EAAE,KAAK,EAAE;wBACnB,IAAI,MAAM,GAAG,KAAK,WAAW;4BAC3B;4BACA,OAAO;wBACT;wBAEA,IAAI,MAAM,GAAG,KAAK,aAAa;4BAC7B;4BACA,OAAO;wBACT;wBAEA,IAAI,MAAM,GAAG,KAAK,SAAS;4BACzB;4BACA,OAAO;wBACT;wBAEA,OAAO;oBACT;;YACF,CAAC;;IAED,qBACE,sYAAC;QAAI,WAAU;kBACZ,MAAM,KAAK,CAAC,MAAM,GACjB,MAAM,KAAK,CAAC,GAAG,CAAC,CAAC,MAAM,sBACrB,sYAAC;gBACC,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,8VACA,kBAAkB,SAChB;gBAGJ,SAAS,IAAM,WAAW;0BAEzB,KAAK,KAAK;eAHN;;;;0EAOT,sYAAC;YAAI,WAAU;sBACZ,EAAE;;;;;;;;;;;AAKb;;QAvEY,8ZAAA,CAAA,kBAAe;;;;QAAf,8ZAAA,CAAA,kBAAe","debugId":null}},
    {"offset": {"line": 504, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/deer/web/src/components/deer-flow/resource-suggestion.tsx"],"sourcesContent":["// Copyright (c) 2025 Bytedance Ltd. and/or its affiliates\n// SPDX-License-Identifier: MIT\n\nimport type { MentionOptions } from \"@tiptap/extension-mention\";\nimport { ReactRenderer } from \"@tiptap/react\";\nimport {\n  ResourceMentions,\n  type ResourceMentionsProps,\n} from \"./resource-mentions\";\nimport type { Instance, Props } from \"tippy.js\";\nimport tippy from \"tippy.js\";\nimport { resolveServiceURL } from \"~/core/api/resolve-service-url\";\nimport type { Resource } from \"~/core/messages\";\n\nexport const resourceSuggestion: MentionOptions[\"suggestion\"] = {\n  items: ({ query }) => {\n    return fetch(resolveServiceURL(`rag/resources?query=${query}`), {\n      method: \"GET\",\n    })\n      .then((res) => res.json())\n      .then((res) => {\n        return res.resources as Array<Resource>;\n      })\n      .catch((err) => {\n        return [];\n      });\n  },\n\n  render: () => {\n    let reactRenderer: ReactRenderer<\n      { onKeyDown: (args: { event: KeyboardEvent }) => boolean },\n      ResourceMentionsProps\n    >;\n    let popup: Instance<Props>[] | null = null;\n\n    return {\n      onStart: (props) => {\n        reactRenderer = new ReactRenderer(ResourceMentions, {\n          props,\n          editor: props.editor,\n        });\n\n        const clientRect = props.clientRect || (() => {\n          const selection = props.editor.state.selection;\n          const coords = props.editor.view.coordsAtPos(selection.from);\n          return {\n            top: coords.top,\n            left: coords.left,\n            right: coords.right,\n            bottom: coords.bottom,\n            width: 0,\n            height: 0,\n          };\n        });\n\n        popup = tippy(\"body\", {\n          getReferenceClientRect: clientRect as any,\n          appendTo: () => document.body,\n          content: reactRenderer.element,\n          showOnCreate: true,\n          interactive: true,\n          trigger: \"manual\",\n          placement: \"top-start\",\n        });\n      },\n\n      onUpdate(props) {\n        if (reactRenderer) {\n          reactRenderer.updateProps(props);\n        }\n\n        if (popup?.[0] && !popup[0].state.isDestroyed) {\n          const clientRect = props.clientRect || (() => {\n            const selection = props.editor.state.selection;\n            const coords = props.editor.view.coordsAtPos(selection.from);\n            return {\n              top: coords.top,\n              left: coords.left,\n              right: coords.right,\n              bottom: coords.bottom,\n              width: 0,\n              height: 0,\n            };\n          });\n          \n          popup[0].setProps({\n            getReferenceClientRect: clientRect as any,\n          });\n        }\n      },\n\n      onKeyDown(props) {\n        if (props.event.key === \"Escape\") {\n          popup?.[0]?.hide();\n\n          return true;\n        }\n\n        return reactRenderer.ref?.onKeyDown(props) ?? false;\n      },\n\n      onExit() {\n        popup?.[0]?.destroy();\n        reactRenderer.destroy();\n      },\n    };\n  },\n};\n"],"names":[],"mappings":"AAAA,0DAA0D;AAC1D,+BAA+B;;;;AAG/B;AACA;AAKA;AACA;;;;;AAGO,MAAM,qBAAmD;IAC9D,OAAO;YAAC,EAAE,KAAK,EAAE;QACf,OAAO,MAAM,CAAA,GAAA,kJAAA,CAAA,oBAAiB,AAAD,EAAE,AAAC,uBAA4B,OAAN,SAAU;YAC9D,QAAQ;QACV,GACG,IAAI,CAAC,CAAC,MAAQ,IAAI,IAAI,IACtB,IAAI,CAAC,CAAC;YACL,OAAO,IAAI,SAAS;QACtB,GACC,KAAK,CAAC,CAAC;YACN,OAAO,EAAE;QACX;IACJ;IAEA,QAAQ;QACN,IAAI;QAIJ,IAAI,QAAkC;QAEtC,OAAO;YACL,SAAS,CAAC;gBACR,gBAAgB,IAAI,yXAAA,CAAA,gBAAa,CAAC,6JAAA,CAAA,mBAAgB,EAAE;oBAClD;oBACA,QAAQ,MAAM,MAAM;gBACtB;gBAEA,MAAM,aAAa,MAAM,UAAU,IAAI,CAAC;oBACtC,MAAM,YAAY,MAAM,MAAM,CAAC,KAAK,CAAC,SAAS;oBAC9C,MAAM,SAAS,MAAM,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,UAAU,IAAI;oBAC3D,OAAO;wBACL,KAAK,OAAO,GAAG;wBACf,MAAM,OAAO,IAAI;wBACjB,OAAO,OAAO,KAAK;wBACnB,QAAQ,OAAO,MAAM;wBACrB,OAAO;wBACP,QAAQ;oBACV;gBACF,CAAC;gBAED,QAAQ,CAAA,GAAA,8MAAA,CAAA,UAAK,AAAD,EAAE,QAAQ;oBACpB,wBAAwB;oBACxB,UAAU,IAAM,SAAS,IAAI;oBAC7B,SAAS,cAAc,OAAO;oBAC9B,cAAc;oBACd,aAAa;oBACb,SAAS;oBACT,WAAW;gBACb;YACF;YAEA,UAAS,KAAK;gBACZ,IAAI,eAAe;oBACjB,cAAc,WAAW,CAAC;gBAC5B;gBAEA,IAAI,CAAA,kBAAA,4BAAA,KAAO,CAAC,EAAE,KAAI,CAAC,KAAK,CAAC,EAAE,CAAC,KAAK,CAAC,WAAW,EAAE;oBAC7C,MAAM,aAAa,MAAM,UAAU,IAAI,CAAC;wBACtC,MAAM,YAAY,MAAM,MAAM,CAAC,KAAK,CAAC,SAAS;wBAC9C,MAAM,SAAS,MAAM,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,UAAU,IAAI;wBAC3D,OAAO;4BACL,KAAK,OAAO,GAAG;4BACf,MAAM,OAAO,IAAI;4BACjB,OAAO,OAAO,KAAK;4BACnB,QAAQ,OAAO,MAAM;4BACrB,OAAO;4BACP,QAAQ;wBACV;oBACF,CAAC;oBAED,KAAK,CAAC,EAAE,CAAC,QAAQ,CAAC;wBAChB,wBAAwB;oBAC1B;gBACF;YACF;YAEA,WAAU,KAAK;oBAON;gBANP,IAAI,MAAM,KAAK,CAAC,GAAG,KAAK,UAAU;wBAChC;oBAAA,kBAAA,6BAAA,UAAA,KAAO,CAAC,EAAE,cAAV,8BAAA,QAAY,IAAI;oBAEhB,OAAO;gBACT;oBAEO;gBAAP,OAAO,CAAA,gCAAA,qBAAA,cAAc,GAAG,cAAjB,yCAAA,mBAAmB,SAAS,CAAC,oBAA7B,0CAAA,+BAAuC;YAChD;YAEA;oBACE;gBAAA,kBAAA,6BAAA,UAAA,KAAO,CAAC,EAAE,cAAV,8BAAA,QAAY,OAAO;gBACnB,cAAc,OAAO;YACvB;QACF;IACF;AACF","debugId":null}},
    {"offset": {"line": 608, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/deer/web/src/components/deer-flow/message-input.tsx"],"sourcesContent":["// Copyright (c) 2025 Bytedance Ltd. and/or its affiliates\n// SPDX-License-Identifier: MIT\n\n\"use client\";\n\nimport Mention from \"@tiptap/extension-mention\";\nimport { Editor, Extension, type Content } from \"@tiptap/react\";\nimport {\n  EditorContent,\n  type EditorInstance,\n  EditorRoot,\n  type JSONContent,\n  StarterKit,\n  Placeholder,\n} from \"novel\";\nimport { Markdown } from \"tiptap-markdown\";\nimport { useDebouncedCallback } from \"use-debounce\";\nimport { useTranslations } from \"next-intl\";\n\nimport \"~/styles/prosemirror.css\";\nimport { resourceSuggestion } from \"./resource-suggestion\";\nimport React, { forwardRef, useEffect, useMemo, useRef } from \"react\";\nimport type { Resource } from \"~/core/messages\";\nimport { LoadingOutlined } from \"@ant-design/icons\";\nimport type { DeerFlowConfig } from \"~/core/config\";\n\nexport interface MessageInputRef {\n  focus: () => void;\n  submit: () => void;\n  setContent: (content: string) => void;\n}\n\nexport interface MessageInputProps {\n  className?: string;\n  placeholder?: string;\n  loading?: boolean;\n  config?: DeerFlowConfig | null;\n  onChange?: (markdown: string) => void;\n  onEnter?: (message: string, resources: Array<Resource>) => void;\n}\n\nfunction formatMessage(content: JSONContent) {\n  if (content.content) {\n    const output: {\n      text: string;\n      resources: Array<Resource>;\n    } = {\n      text: \"\",\n      resources: [],\n    };\n    for (const node of content.content) {\n      const { text, resources } = formatMessage(node);\n      output.text += text;\n      output.resources.push(...resources);\n    }\n    return output;\n  } else {\n    return formatItem(content);\n  }\n}\n\nfunction formatItem(item: JSONContent): {\n  text: string;\n  resources: Array<Resource>;\n} {\n  if (item.type === \"text\") {\n    return { text: item.text ?? \"\", resources: [] };\n  }\n  if (item.type === \"mention\") {\n    return {\n      text: `[${item.attrs?.label}](${item.attrs?.id})`,\n      resources: [\n        { uri: item.attrs?.id ?? \"\", title: item.attrs?.label ?? \"\" },\n      ],\n    };\n  }\n  return { text: \"\", resources: [] };\n}\n\nconst MessageInput = forwardRef<MessageInputRef, MessageInputProps>(\n  (\n    { className, loading, config, onChange, onEnter }: MessageInputProps,\n    ref,\n  ) => {\n    const t = useTranslations(\"messageInput\");\n    const editorRef = useRef<Editor>(null);\n    const handleEnterRef = useRef<\n      ((message: string, resources: Array<Resource>) => void) | undefined\n    >(onEnter);\n    const debouncedUpdates = useDebouncedCallback(\n      async (editor: EditorInstance) => {\n        if (onChange) {\n          // Get the plain text content for prompt enhancement\n          const { text } = formatMessage(editor.getJSON() ?? []);\n          onChange(text);\n        }\n      },\n      200,\n    );\n\n    React.useImperativeHandle(ref, () => ({\n      focus: () => {\n        editorRef.current?.view.focus();\n      },\n      submit: () => {\n        if (onEnter) {\n          const { text, resources } = formatMessage(\n            editorRef.current?.getJSON() ?? [],\n          );\n          onEnter(text, resources);\n        }\n        editorRef.current?.commands.clearContent();\n      },\n      setContent: (content: string) => {\n        if (editorRef.current) {\n          editorRef.current.commands.setContent(content);\n        }\n      },\n    }));\n\n    useEffect(() => {\n      handleEnterRef.current = onEnter;\n    }, [onEnter]);\n\n    const placeholderText = useMemo(\n      () => (config?.rag?.provider ? t(\"placeholderWithRag\") : t(\"placeholder\")),\n      [config?.rag?.provider, t],\n    );\n\n    const extensions = useMemo(() => {\n      const extensions = [\n        StarterKit,\n        Markdown.configure({\n          html: true,\n          tightLists: true,\n          tightListClass: \"tight\",\n          bulletListMarker: \"-\",\n          linkify: false,\n          breaks: false,\n          transformPastedText: false,\n          transformCopiedText: false,\n        }),\n        Placeholder.configure({\n          showOnlyCurrent: false,\n          placeholder: placeholderText,\n          emptyEditorClass: \"placeholder\",\n        }),\n        Extension.create({\n          name: \"keyboardHandler\",\n          addKeyboardShortcuts() {\n            return {\n              Enter: () => {\n                if (handleEnterRef.current) {\n                  const { text, resources } = formatMessage(\n                    this.editor.getJSON() ?? [],\n                  );\n                  handleEnterRef.current(text, resources);\n                }\n                return this.editor.commands.clearContent();\n              },\n            };\n          },\n        }),\n      ];\n      if (config?.rag?.provider) {\n        extensions.push(\n          Mention.configure({\n            HTMLAttributes: {\n              class: \"mention\",\n            },\n            suggestion: resourceSuggestion,\n          }) as Extension,\n        );\n      }\n      return extensions;\n    }, [config, placeholderText]);\n\n    if (loading) {\n      return (\n        <div className={className}>\n          <LoadingOutlined />\n        </div>\n      );\n    }\n\n    return (\n      <div className={className}>\n        <EditorRoot>\n          <EditorContent\n            immediatelyRender={false}\n            extensions={extensions}\n            className=\"border-muted h-full w-full overflow-auto break-words\"\n            editorProps={{\n              attributes: {\n                class:\n                  \"prose prose-base dark:prose-invert inline-editor font-default focus:outline-none max-w-full\",\n              },\n              transformPastedHTML: transformPastedHTML,\n            }}\n            onCreate={({ editor }) => {\n              editorRef.current = editor;\n            }}\n            onUpdate={({ editor }) => {\n              debouncedUpdates(editor);\n            }}\n          ></EditorContent>\n        </EditorRoot>\n      </div>\n    );\n  },\n);\n\nfunction transformPastedHTML(html: string) {\n  try {\n    // Strip HTML from user-pasted content\n    const tempEl = document.createElement(\"div\");\n    tempEl.innerHTML = html;\n\n    return tempEl.textContent || tempEl.innerText || \"\";\n  } catch (error) {\n    console.error(\"Error transforming pasted HTML\", error);\n\n    return \"\";\n  }\n}\n\nexport default MessageInput;\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 879, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/deer/web/src/components/deer-flow/report-style-dialog.tsx"],"sourcesContent":["// Copyright (c) 2025 Bytedance Ltd. and/or its affiliates\n// SPDX-License-Identifier: MIT\n\nimport { useTranslations } from \"next-intl\";\nimport { useState } from \"react\";\nimport { Check, FileText, Newspaper, Users, GraduationCap, TrendingUp } from \"lucide-react\";\n\nimport { Button } from \"~/components/ui/button\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogHeader,\n  DialogTitle,\n  DialogTrigger,\n} from \"~/components/ui/dialog\";\nimport { setReportStyle, useSettingsStore } from \"~/core/store\";\nimport { cn } from \"~/lib/utils\";\n\nimport { Tooltip } from \"./tooltip\";\n\nconst REPORT_STYLES = [\n  {\n    value: \"academic\" as const,\n    labelKey: \"academic\",\n    descriptionKey: \"academicDesc\",\n    icon: GraduationCap,\n  },\n  {\n    value: \"popular_science\" as const,\n    labelKey: \"popularScience\",\n    descriptionKey: \"popularScienceDesc\",\n    icon: FileText,\n  },\n  {\n    value: \"news\" as const,\n    labelKey: \"news\",\n    descriptionKey: \"newsDesc\",\n    icon: Newspaper,\n  },\n  {\n    value: \"social_media\" as const,\n    labelKey: \"socialMedia\",\n    descriptionKey: \"socialMediaDesc\",\n    icon: Users,\n  },\n  {\n    value: \"strategic_investment\" as const,\n    labelKey: \"strategicInvestment\",\n    descriptionKey: \"strategicInvestmentDesc\",\n    icon: TrendingUp,\n  },\n];\n\nexport function ReportStyleDialog() {\n  const t = useTranslations(\"settings.reportStyle\");\n  const [open, setOpen] = useState(false);\n  const currentStyle = useSettingsStore((state) => state.general.reportStyle);\n\n  const handleStyleChange = (\n    style: \"academic\" | \"popular_science\" | \"news\" | \"social_media\" | \"strategic_investment\",\n  ) => {\n    setReportStyle(style);\n    setOpen(false);\n  };\n\n  const currentStyleConfig =\n    REPORT_STYLES.find((style) => style.value === currentStyle) ||\n    REPORT_STYLES[0]!;\n  const CurrentIcon = currentStyleConfig.icon;\n\n  return (\n    <Dialog open={open} onOpenChange={setOpen}>\n      <Tooltip\n        className=\"max-w-60\"\n        title={\n          <div>\n            <h3 className=\"mb-2 font-bold\">\n              {t(\"writingStyle\")}: {t(currentStyleConfig.labelKey)}\n            </h3>\n            <p>{t(\"chooseDesc\")}</p>\n          </div>\n        }\n      >\n        <DialogTrigger asChild>\n          <Button\n            className=\"!border-brand !text-brand rounded-2xl\"\n            variant=\"outline\"\n          >\n            <CurrentIcon className=\"h-4 w-4\" /> {t(currentStyleConfig.labelKey)}\n          </Button>\n        </DialogTrigger>\n      </Tooltip>\n      <DialogContent className=\"sm:max-w-[500px]\">\n        <DialogHeader>\n          <DialogTitle>{t(\"chooseTitle\")}</DialogTitle>\n          <DialogDescription>{t(\"chooseDesc\")}</DialogDescription>\n        </DialogHeader>\n        <div className=\"grid gap-3 py-4\">\n          {REPORT_STYLES.map((style) => {\n            const Icon = style.icon;\n            const isSelected = currentStyle === style.value;\n\n            return (\n              <button\n                key={style.value}\n                className={cn(\n                  \"hover:bg-accent flex items-start gap-3 rounded-lg border p-4 text-left transition-colors\",\n                  isSelected && \"border-primary bg-accent\",\n                )}\n                onClick={() => handleStyleChange(style.value)}\n              >\n                <Icon className=\"mt-0.5 h-5 w-5 shrink-0\" />\n                <div className=\"flex-1 space-y-1\">\n                  <div className=\"flex items-center gap-2\">\n                    <h4 className=\"font-medium\">{t(style.labelKey)}</h4>\n                    {isSelected && <Check className=\"text-primary h-4 w-4\" />}\n                  </div>\n                  <p className=\"text-muted-foreground text-sm\">\n                    {t(style.descriptionKey)}\n                  </p>\n                </div>\n              </button>\n            );\n          })}\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n}\n"],"names":[],"mappings":"AAAA,0DAA0D;AAC1D,+BAA+B;;;;;AAE/B;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAQA;AAAA;AACA;AAEA;;;;;;;;;;;AAEA,MAAM,gBAAgB;IACpB;QACE,OAAO;QACP,UAAU;QACV,gBAAgB;QAChB,MAAM,+SAAA,CAAA,gBAAa;IACrB;IACA;QACE,OAAO;QACP,UAAU;QACV,gBAAgB;QAChB,MAAM,qSAAA,CAAA,WAAQ;IAChB;IACA;QACE,OAAO;QACP,UAAU;QACV,gBAAgB;QAChB,MAAM,mSAAA,CAAA,YAAS;IACjB;IACA;QACE,OAAO;QACP,UAAU;QACV,gBAAgB;QAChB,MAAM,2RAAA,CAAA,QAAK;IACb;IACA;QACE,OAAO;QACP,UAAU;QACV,gBAAgB;QAChB,MAAM,ySAAA,CAAA,aAAU;IAClB;CACD;AAEM,SAAS;;IACd,MAAM,IAAI,CAAA,GAAA,8ZAAA,CAAA,kBAAe,AAAD,EAAE;IAC1B,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,sWAAA,CAAA,WAAQ,AAAD,EAAE;IACjC,MAAM,eAAe,CAAA,GAAA,4IAAA,CAAA,mBAAgB,AAAD;4DAAE,CAAC,QAAU,MAAM,OAAO,CAAC,WAAW;;IAE1E,MAAM,oBAAoB,CACxB;QAEA,CAAA,GAAA,4IAAA,CAAA,iBAAc,AAAD,EAAE;QACf,QAAQ;IACV;IAEA,MAAM,qBACJ,cAAc,IAAI,CAAC,CAAC,QAAU,MAAM,KAAK,KAAK,iBAC9C,aAAa,CAAC,EAAE;IAClB,MAAM,cAAc,mBAAmB,IAAI;IAE3C,qBACE,sYAAC,qIAAA,CAAA,SAAM;QAAC,MAAM;QAAM,cAAc;;0BAChC,sYAAC,gJAAA,CAAA,UAAO;gBACN,WAAU;gBACV,qBACE,sYAAC;;sCACC,sYAAC;4BAAG,WAAU;;gCACX,EAAE;gCAAgB;gCAAG,EAAE,mBAAmB,QAAQ;;;;;;;sCAErD,sYAAC;sCAAG,EAAE;;;;;;;;;;;;0BAIV,cAAA,sYAAC,qIAAA,CAAA,gBAAa;oBAAC,OAAO;8BACpB,cAAA,sYAAC,qIAAA,CAAA,SAAM;wBACL,WAAU;wBACV,SAAQ;;0CAER,sYAAC;gCAAY,WAAU;;;;;;4BAAY;4BAAE,EAAE,mBAAmB,QAAQ;;;;;;;;;;;;;;;;;0BAIxE,sYAAC,qIAAA,CAAA,gBAAa;gBAAC,WAAU;;kCACvB,sYAAC,qIAAA,CAAA,eAAY;;0CACX,sYAAC,qIAAA,CAAA,cAAW;0CAAE,EAAE;;;;;;0CAChB,sYAAC,qIAAA,CAAA,oBAAiB;0CAAE,EAAE;;;;;;;;;;;;kCAExB,sYAAC;wBAAI,WAAU;kCACZ,cAAc,GAAG,CAAC,CAAC;4BAClB,MAAM,OAAO,MAAM,IAAI;4BACvB,MAAM,aAAa,iBAAiB,MAAM,KAAK;4BAE/C,qBACE,sYAAC;gCAEC,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,4FACA,cAAc;gCAEhB,SAAS,IAAM,kBAAkB,MAAM,KAAK;;kDAE5C,sYAAC;wCAAK,WAAU;;;;;;kDAChB,sYAAC;wCAAI,WAAU;;0DACb,sYAAC;gDAAI,WAAU;;kEACb,sYAAC;wDAAG,WAAU;kEAAe,EAAE,MAAM,QAAQ;;;;;;oDAC5C,4BAAc,sYAAC,2RAAA,CAAA,QAAK;wDAAC,WAAU;;;;;;;;;;;;0DAElC,sYAAC;gDAAE,WAAU;0DACV,EAAE,MAAM,cAAc;;;;;;;;;;;;;+BAdtB,MAAM,KAAK;;;;;wBAmBtB;;;;;;;;;;;;;;;;;;AAKV;GA3EgB;;QACJ,8ZAAA,CAAA,kBAAe;QAEJ,4IAAA,CAAA,mBAAgB;;;KAHvB","debugId":null}},
    {"offset": {"line": 1143, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/deer/web/src/components/magicui/border-beam.tsx"],"sourcesContent":["\"use client\";\n\nimport { cn } from \"~/lib/utils\";\nimport { motion, type MotionStyle, type Transition } from \"motion/react\";\n\ninterface BorderBeamProps {\n  /**\n   * The size of the border beam.\n   */\n  size?: number;\n  /**\n   * The duration of the border beam.\n   */\n  duration?: number;\n  /**\n   * The delay of the border beam.\n   */\n  delay?: number;\n  /**\n   * The color of the border beam from.\n   */\n  colorFrom?: string;\n  /**\n   * The color of the border beam to.\n   */\n  colorTo?: string;\n  /**\n   * The motion transition of the border beam.\n   */\n  transition?: Transition;\n  /**\n   * The class name of the border beam.\n   */\n  className?: string;\n  /**\n   * The style of the border beam.\n   */\n  style?: React.CSSProperties;\n  /**\n   * Whether to reverse the animation direction.\n   */\n  reverse?: boolean;\n  /**\n   * The initial offset position (0-100).\n   */\n  initialOffset?: number;\n}\n\nexport const BorderBeam = ({\n  className,\n  size = 50,\n  delay = 0,\n  duration = 6,\n  colorFrom = \"#ffaa40\",\n  colorTo = \"#9c40ff\",\n  transition,\n  style,\n  reverse = false,\n  initialOffset = 0,\n}: BorderBeamProps) => {\n  return (\n    <div className=\"pointer-events-none absolute inset-0 rounded-[inherit] border border-transparent [mask-image:linear-gradient(transparent,transparent),linear-gradient(#000,#000)] [mask-composite:intersect] [mask-clip:padding-box,border-box]\">\n      <motion.div\n        className={cn(\n          \"absolute aspect-square\",\n          \"bg-gradient-to-l from-[var(--color-from)] via-[var(--color-to)] to-transparent\",\n          className,\n        )}\n        style={\n          {\n            width: size,\n            offsetPath: `rect(0 auto auto 0 round ${size}px)`,\n            \"--color-from\": colorFrom,\n            \"--color-to\": colorTo,\n            ...style,\n          } as MotionStyle\n        }\n        initial={{ offsetDistance: `${initialOffset}%` }}\n        animate={{\n          offsetDistance: reverse\n            ? [`${100 - initialOffset}%`, `${-initialOffset}%`]\n            : [`${initialOffset}%`, `${100 + initialOffset}%`],\n        }}\n        transition={{\n          repeat: Infinity,\n          ease: \"linear\",\n          duration,\n          delay: -delay,\n          ...transition,\n        }}\n      />\n    </div>\n  );\n};\n"],"names":[],"mappings":";;;;AAEA;AACA;AAHA;;;;AAgDO,MAAM,aAAa;QAAC,EACzB,SAAS,EACT,OAAO,EAAE,EACT,QAAQ,CAAC,EACT,WAAW,CAAC,EACZ,YAAY,SAAS,EACrB,UAAU,SAAS,EACnB,UAAU,EACV,KAAK,EACL,UAAU,KAAK,EACf,gBAAgB,CAAC,EACD;IAChB,qBACE,sYAAC;QAAI,WAAU;kBACb,cAAA,sYAAC,sVAAA,CAAA,SAAM,CAAC,GAAG;YACT,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,0BACA,kFACA;YAEF,OACE;gBACE,OAAO;gBACP,YAAY,AAAC,4BAAgC,OAAL,MAAK;gBAC7C,gBAAgB;gBAChB,cAAc;gBACd,GAAG,KAAK;YACV;YAEF,SAAS;gBAAE,gBAAgB,AAAC,GAAgB,OAAd,eAAc;YAAG;YAC/C,SAAS;gBACP,gBAAgB,UACZ;oBAAE,GAAsB,OAApB,MAAM,eAAc;oBAAK,GAAiB,OAAf,CAAC,eAAc;iBAAG,GACjD;oBAAE,GAAgB,OAAd,eAAc;oBAAK,GAAsB,OAApB,MAAM,eAAc;iBAAG;YACtD;YACA,YAAY;gBACV,QAAQ;gBACR,MAAM;gBACN;gBACA,OAAO,CAAC;gBACR,GAAG,UAAU;YACf;;;;;;;;;;;AAIR;KA7Ca","debugId":null}},
    {"offset": {"line": 1208, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/deer/web/src/app/chat/components/input-box.tsx"],"sourcesContent":["// Copyright (c) 2025 Bytedance Ltd. and/or its affiliates\n// SPDX-License-Identifier: MIT\n\nimport { MagicWandIcon } from \"@radix-ui/react-icons\";\nimport { AnimatePresence, motion } from \"framer-motion\";\nimport { ArrowUp, Lightbulb, X } from \"lucide-react\";\nimport { useTranslations } from \"next-intl\";\nimport { useCallback, useRef, useState } from \"react\";\n\nimport { Detective } from \"~/components/deer-flow/icons/detective\";\nimport MessageInput, {\n  type MessageInputRef,\n} from \"~/components/deer-flow/message-input\";\nimport { ReportStyleDialog } from \"~/components/deer-flow/report-style-dialog\";\nimport { Tooltip } from \"~/components/deer-flow/tooltip\";\nimport { BorderBeam } from \"~/components/magicui/border-beam\";\nimport { Button } from \"~/components/ui/button\";\nimport { enhancePrompt } from \"~/core/api\";\nimport { useConfig } from \"~/core/api/hooks\";\nimport type { Option, Resource } from \"~/core/messages\";\nimport {\n  setEnableDeepThinking,\n  setEnableBackgroundInvestigation,\n  useSettingsStore,\n} from \"~/core/store\";\nimport { cn } from \"~/lib/utils\";\n\nexport function InputBox({\n  className,\n  responding,\n  feedback,\n  onSend,\n  onCancel,\n  onRemoveFeedback,\n}: {\n  className?: string;\n  size?: \"large\" | \"normal\";\n  responding?: boolean;\n  feedback?: { option: Option } | null;\n  onSend?: (\n    message: string,\n    options?: {\n      interruptFeedback?: string;\n      resources?: Array<Resource>;\n    },\n  ) => void;\n  onCancel?: () => void;\n  onRemoveFeedback?: () => void;\n}) {\n  const t = useTranslations(\"chat.inputBox\");\n  const tCommon = useTranslations(\"common\");\n  const enableDeepThinking = useSettingsStore(\n    (state) => state.general.enableDeepThinking,\n  );\n  const backgroundInvestigation = useSettingsStore(\n    (state) => state.general.enableBackgroundInvestigation,\n  );\n  const { config, loading } = useConfig();\n  const reportStyle = useSettingsStore((state) => state.general.reportStyle);\n  const containerRef = useRef<HTMLDivElement>(null);\n  const inputRef = useRef<MessageInputRef>(null);\n  const feedbackRef = useRef<HTMLDivElement>(null);\n\n  // Enhancement state\n  const [isEnhancing, setIsEnhancing] = useState(false);\n  const [isEnhanceAnimating, setIsEnhanceAnimating] = useState(false);\n  const [currentPrompt, setCurrentPrompt] = useState(\"\");\n\n  const handleSendMessage = useCallback(\n    (message: string, resources: Array<Resource>) => {\n      if (responding) {\n        onCancel?.();\n      } else {\n        if (message.trim() === \"\") {\n          return;\n        }\n        if (onSend) {\n          onSend(message, {\n            interruptFeedback: feedback?.option.value,\n            resources,\n          });\n          onRemoveFeedback?.();\n          // Clear enhancement animation after sending\n          setIsEnhanceAnimating(false);\n        }\n      }\n    },\n    [responding, onCancel, onSend, feedback, onRemoveFeedback],\n  );\n\n  const handleEnhancePrompt = useCallback(async () => {\n    if (currentPrompt.trim() === \"\" || isEnhancing) {\n      return;\n    }\n\n    setIsEnhancing(true);\n    setIsEnhanceAnimating(true);\n\n    try {\n      const enhancedPrompt = await enhancePrompt({\n        prompt: currentPrompt,\n        report_style: reportStyle.toUpperCase(),\n      });\n\n      // Add a small delay for better UX\n      await new Promise((resolve) => setTimeout(resolve, 500));\n\n      // Update the input with the enhanced prompt with animation\n      if (inputRef.current) {\n        inputRef.current.setContent(enhancedPrompt);\n        setCurrentPrompt(enhancedPrompt);\n      }\n\n      // Keep animation for a bit longer to show the effect\n      setTimeout(() => {\n        setIsEnhanceAnimating(false);\n      }, 1000);\n    } catch (error) {\n      console.error(\"Failed to enhance prompt:\", error);\n      setIsEnhanceAnimating(false);\n      // Could add toast notification here\n    } finally {\n      setIsEnhancing(false);\n    }\n  }, [currentPrompt, isEnhancing, reportStyle]);\n\n  return (\n    <div\n      className={cn(\n        \"bg-card relative flex h-full w-full flex-col rounded-[24px] border\",\n        className,\n      )}\n      ref={containerRef}\n    >\n      <div className=\"w-full\">\n        <AnimatePresence>\n          {feedback && (\n            <motion.div\n              ref={feedbackRef}\n              className=\"bg-background border-brand absolute top-0 left-0 mt-2 ml-4 flex items-center justify-center gap-1 rounded-2xl border px-2 py-0.5\"\n              initial={{ opacity: 0, scale: 0 }}\n              animate={{ opacity: 1, scale: 1 }}\n              exit={{ opacity: 0, scale: 0 }}\n              transition={{ duration: 0.2, ease: \"easeInOut\" }}\n            >\n              <div className=\"text-brand flex h-full w-full items-center justify-center text-sm opacity-90\">\n                {feedback.option.text}\n              </div>\n              <X\n                className=\"cursor-pointer opacity-60\"\n                size={16}\n                onClick={onRemoveFeedback}\n              />\n            </motion.div>\n          )}\n          {isEnhanceAnimating && (\n            <motion.div\n              className=\"pointer-events-none absolute inset-0 z-20\"\n              initial={{ opacity: 0 }}\n              animate={{ opacity: 1 }}\n              exit={{ opacity: 0 }}\n              transition={{ duration: 0.3 }}\n            >\n              <div className=\"relative h-full w-full\">\n                {/* Sparkle effect overlay */}\n                <motion.div\n                  className=\"absolute inset-0 rounded-[24px] bg-gradient-to-r from-blue-500/10 via-purple-500/10 to-blue-500/10\"\n                  animate={{\n                    background: [\n                      \"linear-gradient(45deg, rgba(59, 130, 246, 0.1), rgba(147, 51, 234, 0.1), rgba(59, 130, 246, 0.1))\",\n                      \"linear-gradient(225deg, rgba(147, 51, 234, 0.1), rgba(59, 130, 246, 0.1), rgba(147, 51, 234, 0.1))\",\n                      \"linear-gradient(45deg, rgba(59, 130, 246, 0.1), rgba(147, 51, 234, 0.1), rgba(59, 130, 246, 0.1))\",\n                    ],\n                  }}\n                  transition={{ duration: 2, repeat: Infinity }}\n                />\n                {/* Floating sparkles */}\n                {[...Array(6)].map((_, i) => (\n                  <motion.div\n                    key={i}\n                    className=\"absolute h-2 w-2 rounded-full bg-blue-400\"\n                    style={{\n                      left: `${20 + i * 12}%`,\n                      top: `${30 + (i % 2) * 40}%`,\n                    }}\n                    animate={{\n                      y: [-10, -20, -10],\n                      opacity: [0, 1, 0],\n                      scale: [0.5, 1, 0.5],\n                    }}\n                    transition={{\n                      duration: 1.5,\n                      repeat: Infinity,\n                      delay: i * 0.2,\n                    }}\n                  />\n                ))}\n              </div>\n            </motion.div>\n          )}\n        </AnimatePresence>\n        <MessageInput\n          className={cn(\n            \"h-24 px-4 pt-5\",\n            feedback && \"pt-9\",\n            isEnhanceAnimating && \"transition-all duration-500\",\n          )}\n          ref={inputRef}\n          loading={loading}\n          config={config}\n          onEnter={handleSendMessage}\n          onChange={setCurrentPrompt}\n        />\n      </div>\n      <div className=\"flex items-center px-4 py-2\">\n        <div className=\"flex grow gap-2\">\n          {config?.models?.reasoning && config.models.reasoning.length > 0 && (\n            <Tooltip\n              className=\"max-w-60\"\n              title={\n                <div>\n                  <h3 className=\"mb-2 font-bold\">\n                    {t(\"deepThinkingTooltip.title\", {\n                      status: enableDeepThinking ? t(\"on\") : t(\"off\"),\n                    })}\n                  </h3>\n                  <p>\n                    {t(\"deepThinkingTooltip.description\", {\n                      model: config.models.reasoning[0] ?? \"\",\n                    })}\n                  </p>\n                </div>\n              }\n            >\n              <Button\n                className={cn(\n                  \"rounded-2xl\",\n                  enableDeepThinking && \"!border-brand !text-brand\",\n                )}\n                variant=\"outline\"\n                onClick={() => {\n                  setEnableDeepThinking(!enableDeepThinking);\n                }}\n              >\n                <Lightbulb /> {t(\"deepThinking\")}\n              </Button>\n            </Tooltip>\n          )}\n\n          <Tooltip\n            className=\"max-w-60\"\n            title={\n              <div>\n                <h3 className=\"mb-2 font-bold\">\n                  {t(\"investigationTooltip.title\", {\n                    status: backgroundInvestigation ? t(\"on\") : t(\"off\"),\n                  })}\n                </h3>\n                <p>{t(\"investigationTooltip.description\")}</p>\n              </div>\n            }\n          >\n            <Button\n              className={cn(\n                \"rounded-2xl\",\n                backgroundInvestigation && \"!border-brand !text-brand\",\n              )}\n              variant=\"outline\"\n              onClick={() =>\n                setEnableBackgroundInvestigation(!backgroundInvestigation)\n              }\n            >\n              <Detective /> {t(\"investigation\")}\n            </Button>\n          </Tooltip>\n          <ReportStyleDialog />\n        </div>\n        <div className=\"flex shrink-0 items-center gap-2\">\n          <Tooltip title={t(\"enhancePrompt\")}>\n            <Button\n              variant=\"ghost\"\n              size=\"icon\"\n              className={cn(\n                \"hover:bg-accent h-10 w-10\",\n                isEnhancing && \"animate-pulse\",\n              )}\n              onClick={handleEnhancePrompt}\n              disabled={isEnhancing || currentPrompt.trim() === \"\"}\n            >\n              {isEnhancing ? (\n                <div className=\"flex h-10 w-10 items-center justify-center\">\n                  <div className=\"bg-foreground h-3 w-3 animate-bounce rounded-full opacity-70\" />\n                </div>\n              ) : (\n                <MagicWandIcon className=\"text-brand\" />\n              )}\n            </Button>\n          </Tooltip>\n          <Tooltip title={responding ? tCommon(\"stop\") : tCommon(\"send\")}>\n            <Button\n              variant=\"outline\"\n              size=\"icon\"\n              className={cn(\"h-10 w-10 rounded-full\")}\n              onClick={() => inputRef.current?.submit()}\n            >\n              {responding ? (\n                <div className=\"flex h-10 w-10 items-center justify-center\">\n                  <div className=\"bg-foreground h-4 w-4 rounded-sm opacity-70\" />\n                </div>\n              ) : (\n                <ArrowUp />\n              )}\n            </Button>\n          </Tooltip>\n        </div>\n      </div>\n      {isEnhancing && (\n        <>\n          <BorderBeam\n            duration={5}\n            size={250}\n            className=\"from-transparent via-red-500 to-transparent\"\n          />\n          <BorderBeam\n            duration={5}\n            delay={3}\n            size={250}\n            className=\"from-transparent via-blue-500 to-transparent\"\n          />\n        </>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"AAAA,0DAA0D;AAC1D,+BAA+B;;;;;AAE/B;AACA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AAEA;AACA;AAGA;AACA;AACA;AACA;AACA;AAAA;AACA;AAEA;AAAA;AAKA;;;;;;;;;;;;;;;;;;AAEO,SAAS,SAAS,KAqBxB;QArBwB,EACvB,SAAS,EACT,UAAU,EACV,QAAQ,EACR,MAAM,EACN,QAAQ,EACR,gBAAgB,EAejB,GArBwB;QA6Ld;;IAvKT,MAAM,IAAI,CAAA,GAAA,8ZAAA,CAAA,kBAAe,AAAD,EAAE;IAC1B,MAAM,UAAU,CAAA,GAAA,8ZAAA,CAAA,kBAAe,AAAD,EAAE;IAChC,MAAM,qBAAqB,CAAA,GAAA,4IAAA,CAAA,mBAAgB,AAAD;yDACxC,CAAC,QAAU,MAAM,OAAO,CAAC,kBAAkB;;IAE7C,MAAM,0BAA0B,CAAA,GAAA,4IAAA,CAAA,mBAAgB,AAAD;8DAC7C,CAAC,QAAU,MAAM,OAAO,CAAC,6BAA6B;;IAExD,MAAM,EAAE,MAAM,EAAE,OAAO,EAAE,GAAG,CAAA,GAAA,8HAAA,CAAA,YAAS,AAAD;IACpC,MAAM,cAAc,CAAA,GAAA,4IAAA,CAAA,mBAAgB,AAAD;kDAAE,CAAC,QAAU,MAAM,OAAO,CAAC,WAAW;;IACzE,MAAM,eAAe,CAAA,GAAA,sWAAA,CAAA,SAAM,AAAD,EAAkB;IAC5C,MAAM,WAAW,CAAA,GAAA,sWAAA,CAAA,SAAM,AAAD,EAAmB;IACzC,MAAM,cAAc,CAAA,GAAA,sWAAA,CAAA,SAAM,AAAD,EAAkB;IAE3C,oBAAoB;IACpB,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,sWAAA,CAAA,WAAQ,AAAD,EAAE;IAC/C,MAAM,CAAC,oBAAoB,sBAAsB,GAAG,CAAA,GAAA,sWAAA,CAAA,WAAQ,AAAD,EAAE;IAC7D,MAAM,CAAC,eAAe,iBAAiB,GAAG,CAAA,GAAA,sWAAA,CAAA,WAAQ,AAAD,EAAE;IAEnD,MAAM,oBAAoB,CAAA,GAAA,sWAAA,CAAA,cAAW,AAAD;mDAClC,CAAC,SAAiB;YAChB,IAAI,YAAY;gBACd,qBAAA,+BAAA;YACF,OAAO;gBACL,IAAI,QAAQ,IAAI,OAAO,IAAI;oBACzB;gBACF;gBACA,IAAI,QAAQ;oBACV,OAAO,SAAS;wBACd,iBAAiB,EAAE,qBAAA,+BAAA,SAAU,MAAM,CAAC,KAAK;wBACzC;oBACF;oBACA,6BAAA,uCAAA;oBACA,4CAA4C;oBAC5C,sBAAsB;gBACxB;YACF;QACF;kDACA;QAAC;QAAY;QAAU;QAAQ;QAAU;KAAiB;IAG5D,MAAM,sBAAsB,CAAA,GAAA,sWAAA,CAAA,cAAW,AAAD;qDAAE;YACtC,IAAI,cAAc,IAAI,OAAO,MAAM,aAAa;gBAC9C;YACF;YAEA,eAAe;YACf,sBAAsB;YAEtB,IAAI;gBACF,MAAM,iBAAiB,MAAM,CAAA,GAAA,2IAAA,CAAA,gBAAa,AAAD,EAAE;oBACzC,QAAQ;oBACR,cAAc,YAAY,WAAW;gBACvC;gBAEA,kCAAkC;gBAClC,MAAM,IAAI;iEAAQ,CAAC,UAAY,WAAW,SAAS;;gBAEnD,2DAA2D;gBAC3D,IAAI,SAAS,OAAO,EAAE;oBACpB,SAAS,OAAO,CAAC,UAAU,CAAC;oBAC5B,iBAAiB;gBACnB;gBAEA,qDAAqD;gBACrD;iEAAW;wBACT,sBAAsB;oBACxB;gEAAG;YACL,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,6BAA6B;gBAC3C,sBAAsB;YACtB,oCAAoC;YACtC,SAAU;gBACR,eAAe;YACjB;QACF;oDAAG;QAAC;QAAe;QAAa;KAAY;QAwGjB;IAtG3B,qBACE,sYAAC;QACC,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,sEACA;QAEF,KAAK;;0BAEL,sYAAC;gBAAI,WAAU;;kCACb,sYAAC,uUAAA,CAAA,kBAAe;;4BACb,0BACC,sYAAC,wUAAA,CAAA,SAAM,CAAC,GAAG;gCACT,KAAK;gCACL,WAAU;gCACV,SAAS;oCAAE,SAAS;oCAAG,OAAO;gCAAE;gCAChC,SAAS;oCAAE,SAAS;oCAAG,OAAO;gCAAE;gCAChC,MAAM;oCAAE,SAAS;oCAAG,OAAO;gCAAE;gCAC7B,YAAY;oCAAE,UAAU;oCAAK,MAAM;gCAAY;;kDAE/C,sYAAC;wCAAI,WAAU;kDACZ,SAAS,MAAM,CAAC,IAAI;;;;;;kDAEvB,sYAAC,mRAAA,CAAA,IAAC;wCACA,WAAU;wCACV,MAAM;wCACN,SAAS;;;;;;;;;;;;4BAId,oCACC,sYAAC,wUAAA,CAAA,SAAM,CAAC,GAAG;gCACT,WAAU;gCACV,SAAS;oCAAE,SAAS;gCAAE;gCACtB,SAAS;oCAAE,SAAS;gCAAE;gCACtB,MAAM;oCAAE,SAAS;gCAAE;gCACnB,YAAY;oCAAE,UAAU;gCAAI;0CAE5B,cAAA,sYAAC;oCAAI,WAAU;;sDAEb,sYAAC,wUAAA,CAAA,SAAM,CAAC,GAAG;4CACT,WAAU;4CACV,SAAS;gDACP,YAAY;oDACV;oDACA;oDACA;iDACD;4CACH;4CACA,YAAY;gDAAE,UAAU;gDAAG,QAAQ;4CAAS;;;;;;wCAG7C;+CAAI,MAAM;yCAAG,CAAC,GAAG,CAAC,CAAC,GAAG,kBACrB,sYAAC,wUAAA,CAAA,SAAM,CAAC,GAAG;gDAET,WAAU;gDACV,OAAO;oDACL,MAAM,AAAC,GAAc,OAAZ,KAAK,IAAI,IAAG;oDACrB,KAAK,AAAC,GAAoB,OAAlB,KAAK,AAAC,IAAI,IAAK,IAAG;gDAC5B;gDACA,SAAS;oDACP,GAAG;wDAAC,CAAC;wDAAI,CAAC;wDAAI,CAAC;qDAAG;oDAClB,SAAS;wDAAC;wDAAG;wDAAG;qDAAE;oDAClB,OAAO;wDAAC;wDAAK;wDAAG;qDAAI;gDACtB;gDACA,YAAY;oDACV,UAAU;oDACV,QAAQ;oDACR,OAAO,IAAI;gDACb;+CAfK;;;;;;;;;;;;;;;;;;;;;;kCAsBjB,sYAAC,yJAAA,CAAA,UAAY;wBACX,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,kBACA,YAAY,QACZ,sBAAsB;wBAExB,KAAK;wBACL,SAAS;wBACT,QAAQ;wBACR,SAAS;wBACT,UAAU;;;;;;;;;;;;0BAGd,sYAAC;gBAAI,WAAU;;kCACb,sYAAC;wBAAI,WAAU;;4BACZ,CAAA,mBAAA,8BAAA,iBAAA,OAAQ,MAAM,cAAd,qCAAA,eAAgB,SAAS,KAAI,OAAO,MAAM,CAAC,SAAS,CAAC,MAAM,GAAG,mBAC7D,sYAAC,gJAAA,CAAA,UAAO;gCACN,WAAU;gCACV,qBACE,sYAAC;;sDACC,sYAAC;4CAAG,WAAU;sDACX,EAAE,6BAA6B;gDAC9B,QAAQ,qBAAqB,EAAE,QAAQ,EAAE;4CAC3C;;;;;;sDAEF,sYAAC;sDACE,EAAE,mCAAmC;gDACpC,OAAO,CAAA,4BAAA,OAAO,MAAM,CAAC,SAAS,CAAC,EAAE,cAA1B,uCAAA,4BAA8B;4CACvC;;;;;;;;;;;;0CAKN,cAAA,sYAAC,qIAAA,CAAA,SAAM;oCACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,eACA,sBAAsB;oCAExB,SAAQ;oCACR,SAAS;wCACP,CAAA,GAAA,4IAAA,CAAA,wBAAqB,AAAD,EAAE,CAAC;oCACzB;;sDAEA,sYAAC,mSAAA,CAAA,YAAS;;;;;wCAAG;wCAAE,EAAE;;;;;;;;;;;;0CAKvB,sYAAC,gJAAA,CAAA,UAAO;gCACN,WAAU;gCACV,qBACE,sYAAC;;sDACC,sYAAC;4CAAG,WAAU;sDACX,EAAE,8BAA8B;gDAC/B,QAAQ,0BAA0B,EAAE,QAAQ,EAAE;4CAChD;;;;;;sDAEF,sYAAC;sDAAG,EAAE;;;;;;;;;;;;0CAIV,cAAA,sYAAC,qIAAA,CAAA,SAAM;oCACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,eACA,2BAA2B;oCAE7B,SAAQ;oCACR,SAAS,IACP,CAAA,GAAA,4IAAA,CAAA,mCAAgC,AAAD,EAAE,CAAC;;sDAGpC,sYAAC,2JAAA,CAAA,YAAS;;;;;wCAAG;wCAAE,EAAE;;;;;;;;;;;;0CAGrB,sYAAC,kKAAA,CAAA,oBAAiB;;;;;;;;;;;kCAEpB,sYAAC;wBAAI,WAAU;;0CACb,sYAAC,gJAAA,CAAA,UAAO;gCAAC,OAAO,EAAE;0CAChB,cAAA,sYAAC,qIAAA,CAAA,SAAM;oCACL,SAAQ;oCACR,MAAK;oCACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,6BACA,eAAe;oCAEjB,SAAS;oCACT,UAAU,eAAe,cAAc,IAAI,OAAO;8CAEjD,4BACC,sYAAC;wCAAI,WAAU;kDACb,cAAA,sYAAC;4CAAI,WAAU;;;;;;;;;;6DAGjB,sYAAC,qRAAA,CAAA,gBAAa;wCAAC,WAAU;;;;;;;;;;;;;;;;0CAI/B,sYAAC,gJAAA,CAAA,UAAO;gCAAC,OAAO,aAAa,QAAQ,UAAU,QAAQ;0CACrD,cAAA,sYAAC,qIAAA,CAAA,SAAM;oCACL,SAAQ;oCACR,MAAK;oCACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE;oCACd,SAAS;4CAAM;gDAAA,oBAAA,SAAS,OAAO,cAAhB,wCAAA,kBAAkB,MAAM;;8CAEtC,2BACC,sYAAC;wCAAI,WAAU;kDACb,cAAA,sYAAC;4CAAI,WAAU;;;;;;;;;;6DAGjB,sYAAC,mSAAA,CAAA,UAAO;;;;;;;;;;;;;;;;;;;;;;;;;;;YAMjB,6BACC;;kCACE,sYAAC,kJAAA,CAAA,aAAU;wBACT,UAAU;wBACV,MAAM;wBACN,WAAU;;;;;;kCAEZ,sYAAC,kJAAA,CAAA,aAAU;wBACT,UAAU;wBACV,OAAO;wBACP,MAAM;wBACN,WAAU;;;;;;;;;;;;;;AAMtB;GAlTgB;;QAsBJ,8ZAAA,CAAA,kBAAe;QACT,8ZAAA,CAAA,kBAAe;QACJ,4IAAA,CAAA,mBAAgB;QAGX,4IAAA,CAAA,mBAAgB;QAGpB,8HAAA,CAAA,YAAS;QACjB,4IAAA,CAAA,mBAAgB;;;KA/BtB","debugId":null}},
    {"offset": {"line": 1759, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/components/deer-flow/loading-animation.module.css [app-client] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"bouncing-animation\": \"loading-animation-module__o3q3XG__bouncing-animation\",\n  \"loadingAnimation\": \"loading-animation-module__o3q3XG__loadingAnimation\",\n  \"sm\": \"loading-animation-module__o3q3XG__sm\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 1770, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/deer/web/src/components/deer-flow/loading-animation.tsx"],"sourcesContent":["// Copyright (c) 2025 Bytedance Ltd. and/or its affiliates\n// SPDX-License-Identifier: MIT\n\nimport { cn } from \"~/lib/utils\";\n\nimport styles from \"./loading-animation.module.css\";\n\nexport function LoadingAnimation({\n  className,\n  size = \"normal\",\n}: {\n  className?: string;\n  size?: \"normal\" | \"sm\";\n}) {\n  return (\n    <div\n      className={cn(\n        styles.loadingAnimation,\n        size === \"sm\" && styles.sm,\n        className,\n      )}\n    >\n      <div></div>\n      <div></div>\n      <div></div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"AAAA,0DAA0D;AAC1D,+BAA+B;;;;;AAE/B;AAEA;;;;AAEO,SAAS,iBAAiB,KAMhC;QANgC,EAC/B,SAAS,EACT,OAAO,QAAQ,EAIhB,GANgC;IAO/B,qBACE,sYAAC;QACC,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,wKAAA,CAAA,UAAM,CAAC,gBAAgB,EACvB,SAAS,QAAQ,wKAAA,CAAA,UAAM,CAAC,EAAE,EAC1B;;0BAGF,sYAAC;;;;;0BACD,sYAAC;;;;;0BACD,sYAAC;;;;;;;;;;;AAGP;KApBgB","debugId":null}},
    {"offset": {"line": 1820, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/deer/web/src/components/deer-flow/rolling-text.tsx"],"sourcesContent":["// Copyright (c) 2025 Bytedance Ltd. and/or its affiliates\n// SPDX-License-Identifier: MIT\n\nimport { motion, AnimatePresence } from \"framer-motion\";\n\nimport { cn } from \"~/lib/utils\";\n\nexport function RollingText({\n  className,\n  children,\n}: {\n  className?: string;\n  children?: string | string[];\n}) {\n  return (\n    <span\n      className={cn(\n        \"relative flex h-[2em] items-center overflow-hidden\",\n        className,\n      )}\n    >\n      <AnimatePresence mode=\"popLayout\">\n        <motion.div\n          className=\"absolute w-fit\"\n          style={{ transition: \"all 0.3s ease-in-out\" }}\n          initial={{ y: \"100%\", opacity: 0 }}\n          animate={{ y: \"0%\", opacity: 1 }}\n          exit={{ y: \"-100%\", opacity: 0 }}\n          transition={{ duration: 0.3, ease: \"easeInOut\" }}\n        >\n          {children}\n        </motion.div>\n      </AnimatePresence>\n    </span>\n  );\n}\n"],"names":[],"mappings":"AAAA,0DAA0D;AAC1D,+BAA+B;;;;;AAE/B;AAAA;AAEA;;;;AAEO,SAAS,YAAY,KAM3B;QAN2B,EAC1B,SAAS,EACT,QAAQ,EAIT,GAN2B;IAO1B,qBACE,sYAAC;QACC,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,sDACA;kBAGF,cAAA,sYAAC,uUAAA,CAAA,kBAAe;YAAC,MAAK;sBACpB,cAAA,sYAAC,wUAAA,CAAA,SAAM,CAAC,GAAG;gBACT,WAAU;gBACV,OAAO;oBAAE,YAAY;gBAAuB;gBAC5C,SAAS;oBAAE,GAAG;oBAAQ,SAAS;gBAAE;gBACjC,SAAS;oBAAE,GAAG;oBAAM,SAAS;gBAAE;gBAC/B,MAAM;oBAAE,GAAG;oBAAS,SAAS;gBAAE;gBAC/B,YAAY;oBAAE,UAAU;oBAAK,MAAM;gBAAY;0BAE9C;;;;;;;;;;;;;;;;AAKX;KA5BgB","debugId":null}},
    {"offset": {"line": 1888, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/deer/web/src/components/ui/scroll-area.tsx"],"sourcesContent":["\"use client\";\n\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\";\nimport * as React from \"react\";\n\nimport { cn } from \"~/lib/utils\";\n\nfunction ScrollArea({\n  className,\n  children,\n  ref,\n  ...props\n}: React.ComponentProps<typeof ScrollAreaPrimitive.Root>) {\n  return (\n    <ScrollAreaPrimitive.Root\n      data-slot=\"scroll-area\"\n      className={cn(\"relative\", className)}\n      {...props}\n    >\n      <ScrollAreaPrimitive.Viewport\n        data-slot=\"scroll-area-viewport\"\n        className=\"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1\"\n        // https://github.com/stackblitz-labs/use-stick-to-bottom/issues/15\n        ref={ref}\n      >\n        {children}\n      </ScrollAreaPrimitive.Viewport>\n      <ScrollBar />\n      <ScrollAreaPrimitive.Corner />\n    </ScrollAreaPrimitive.Root>\n  );\n}\n\nfunction ScrollBar({\n  className,\n  orientation = \"vertical\",\n  ...props\n}: React.ComponentProps<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>) {\n  return (\n    <ScrollAreaPrimitive.ScrollAreaScrollbar\n      data-slot=\"scroll-area-scrollbar\"\n      orientation={orientation}\n      className={cn(\n        \"flex touch-none p-px transition-colors select-none\",\n        orientation === \"vertical\" &&\n          \"h-full w-2.5 border-l border-l-transparent\",\n        orientation === \"horizontal\" &&\n          \"h-2.5 flex-col border-t border-t-transparent\",\n        className,\n      )}\n      {...props}\n    >\n      <ScrollAreaPrimitive.ScrollAreaThumb\n        data-slot=\"scroll-area-thumb\"\n        className=\"bg-border relative flex-1 rounded-full\"\n      />\n    </ScrollAreaPrimitive.ScrollAreaScrollbar>\n  );\n}\n\nexport { ScrollArea, ScrollBar };\n"],"names":[],"mappings":";;;;;AAEA;AAGA;AALA;;;;AAOA,SAAS,WAAW,KAKoC;QALpC,EAClB,SAAS,EACT,QAAQ,EACR,GAAG,EACH,GAAG,OACmD,GALpC;IAMlB,qBACE,sYAAC,iYAAA,CAAA,OAAwB;QACvB,aAAU;QACV,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,YAAY;QACzB,GAAG,KAAK;;0BAET,sYAAC,iYAAA,CAAA,WAA4B;gBAC3B,aAAU;gBACV,WAAU;gBACV,mEAAmE;gBACnE,KAAK;0BAEJ;;;;;;0BAEH,sYAAC;;;;;0BACD,sYAAC,iYAAA,CAAA,SAA0B;;;;;;;;;;;AAGjC;KAxBS;AA0BT,SAAS,UAAU,KAIoD;QAJpD,EACjB,SAAS,EACT,cAAc,UAAU,EACxB,GAAG,OACkE,GAJpD;IAKjB,qBACE,sYAAC,iYAAA,CAAA,sBAAuC;QACtC,aAAU;QACV,aAAa;QACb,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,sDACA,gBAAgB,cACd,8CACF,gBAAgB,gBACd,gDACF;QAED,GAAG,KAAK;kBAET,cAAA,sYAAC,iYAAA,CAAA,kBAAmC;YAClC,aAAU;YACV,WAAU;;;;;;;;;;;AAIlB;MAzBS","debugId":null}},
    {"offset": {"line": 1970, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/deer/web/src/components/deer-flow/scroll-container.tsx"],"sourcesContent":["// Copyright (c) 2025 Bytedance Ltd. and/or its affiliates\n// SPDX-License-Identifier: MIT\n\nimport {\n  useEffect,\n  useImperativeHandle,\n  useLayoutEffect,\n  useRef,\n  type ReactNode,\n  type RefObject,\n} from \"react\";\nimport { useStickToBottom } from \"use-stick-to-bottom\";\n\nimport { ScrollArea } from \"~/components/ui/scroll-area\";\nimport { cn } from \"~/lib/utils\";\n\nexport interface ScrollContainerProps {\n  className?: string;\n  children?: ReactNode;\n  scrollShadow?: boolean;\n  scrollShadowColor?: string;\n  autoScrollToBottom?: boolean;\n  ref?: RefObject<ScrollContainerRef | null>;\n}\n\nexport interface ScrollContainerRef {\n  scrollToBottom(): void;\n}\n\nexport function ScrollContainer({\n  className,\n  children,\n  scrollShadow = true,\n  scrollShadowColor = \"var(--background)\",\n  autoScrollToBottom = false,\n  ref,\n}: ScrollContainerProps) {\n  const { scrollRef, contentRef, scrollToBottom, isAtBottom } =\n    useStickToBottom({ initial: \"instant\" });\n  useImperativeHandle(ref, () => ({\n    scrollToBottom() {\n      if (isAtBottom) {\n        scrollToBottom();\n      }\n    },\n  }));\n\n  const tempScrollRef = useRef<HTMLElement>(null);\n  const tempContentRef = useRef<HTMLElement>(null);\n  useEffect(() => {\n    if (!autoScrollToBottom) {\n      tempScrollRef.current = scrollRef.current;\n      tempContentRef.current = contentRef.current;\n      scrollRef.current = null;\n      contentRef.current = null;\n    } else if (tempScrollRef.current && tempContentRef.current) {\n      scrollRef.current = tempScrollRef.current;\n      contentRef.current = tempContentRef.current;\n    }\n  }, [autoScrollToBottom, contentRef, scrollRef]);\n\n  return (\n    <div className={cn(\"relative\", className)}>\n      {scrollShadow && (\n        <>\n          <div\n            className={cn(\n              \"absolute top-0 right-0 left-0 z-10 h-10 bg-gradient-to-t\",\n              `from-transparent to-[var(--scroll-shadow-color)]`,\n            )}\n            style={\n              {\n                \"--scroll-shadow-color\": scrollShadowColor,\n              } as React.CSSProperties\n            }\n          ></div>\n          <div\n            className={cn(\n              \"absolute right-0 bottom-0 left-0 z-10 h-10 bg-gradient-to-b\",\n              `from-transparent to-[var(--scroll-shadow-color)]`,\n            )}\n            style={\n              {\n                \"--scroll-shadow-color\": scrollShadowColor,\n              } as React.CSSProperties\n            }\n          ></div>\n        </>\n      )}\n      <ScrollArea ref={scrollRef} className=\"h-full w-full\">\n        <div className=\"h-fit w-full\" ref={contentRef}>\n          {children}\n        </div>\n      </ScrollArea>\n    </div>\n  );\n}\n"],"names":[],"mappings":"AAAA,0DAA0D;AAC1D,+BAA+B;;;;;AAE/B;AAQA;AAEA;AACA;;;;;;;AAeO,SAAS,gBAAgB,KAOT;QAPS,EAC9B,SAAS,EACT,QAAQ,EACR,eAAe,IAAI,EACnB,oBAAoB,mBAAmB,EACvC,qBAAqB,KAAK,EAC1B,GAAG,EACkB,GAPS;;IAQ9B,MAAM,EAAE,SAAS,EAAE,UAAU,EAAE,cAAc,EAAE,UAAU,EAAE,GACzD,CAAA,GAAA,0QAAA,CAAA,mBAAgB,AAAD,EAAE;QAAE,SAAS;IAAU;IACxC,CAAA,GAAA,sWAAA,CAAA,sBAAmB,AAAD,EAAE;+CAAK,IAAM,CAAC;gBAC9B;oBACE,IAAI,YAAY;wBACd;oBACF;gBACF;YACF,CAAC;;IAED,MAAM,gBAAgB,CAAA,GAAA,sWAAA,CAAA,SAAM,AAAD,EAAe;IAC1C,MAAM,iBAAiB,CAAA,GAAA,sWAAA,CAAA,SAAM,AAAD,EAAe;IAC3C,CAAA,GAAA,sWAAA,CAAA,YAAS,AAAD;qCAAE;YACR,IAAI,CAAC,oBAAoB;gBACvB,cAAc,OAAO,GAAG,UAAU,OAAO;gBACzC,eAAe,OAAO,GAAG,WAAW,OAAO;gBAC3C,UAAU,OAAO,GAAG;gBACpB,WAAW,OAAO,GAAG;YACvB,OAAO,IAAI,cAAc,OAAO,IAAI,eAAe,OAAO,EAAE;gBAC1D,UAAU,OAAO,GAAG,cAAc,OAAO;gBACzC,WAAW,OAAO,GAAG,eAAe,OAAO;YAC7C;QACF;oCAAG;QAAC;QAAoB;QAAY;KAAU;IAE9C,qBACE,sYAAC;QAAI,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,YAAY;;YAC5B,8BACC;;kCACE,sYAAC;wBACC,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,4DACC;wBAEH,OACE;4BACE,yBAAyB;wBAC3B;;;;;;kCAGJ,sYAAC;wBACC,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,+DACC;wBAEH,OACE;4BACE,yBAAyB;wBAC3B;;;;;;;;0BAKR,sYAAC,6IAAA,CAAA,aAAU;gBAAC,KAAK;gBAAW,WAAU;0BACpC,cAAA,sYAAC;oBAAI,WAAU;oBAAe,KAAK;8BAChC;;;;;;;;;;;;;;;;;AAKX;GAnEgB;;QASZ,0QAAA,CAAA,mBAAgB;;;KATJ","debugId":null}},
    {"offset": {"line": 2088, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/deer/web/src/components/ui/collapsible.tsx"],"sourcesContent":["\"use client\"\n\nimport * as CollapsiblePrimitive from \"@radix-ui/react-collapsible\"\n\nfunction Collapsible({\n  ...props\n}: React.ComponentProps<typeof CollapsiblePrimitive.Root>) {\n  return <CollapsiblePrimitive.Root data-slot=\"collapsible\" {...props} />\n}\n\nfunction CollapsibleTrigger({\n  ...props\n}: React.ComponentProps<typeof CollapsiblePrimitive.CollapsibleTrigger>) {\n  return (\n    <CollapsiblePrimitive.CollapsibleTrigger\n      data-slot=\"collapsible-trigger\"\n      {...props}\n    />\n  )\n}\n\nfunction CollapsibleContent({\n  ...props\n}: React.ComponentProps<typeof CollapsiblePrimitive.CollapsibleContent>) {\n  return (\n    <CollapsiblePrimitive.CollapsibleContent\n      data-slot=\"collapsible-content\"\n      {...props}\n    />\n  )\n}\n\nexport { Collapsible, CollapsibleTrigger, CollapsibleContent }\n"],"names":[],"mappings":";;;;;;AAEA;AAFA;;;AAIA,SAAS,YAAY,KAEoC;QAFpC,EACnB,GAAG,OACoD,GAFpC;IAGnB,qBAAO,sYAAC,2XAAA,CAAA,OAAyB;QAAC,aAAU;QAAe,GAAG,KAAK;;;;;;AACrE;KAJS;AAMT,SAAS,mBAAmB,KAE2C;QAF3C,EAC1B,GAAG,OACkE,GAF3C;IAG1B,qBACE,sYAAC,2XAAA,CAAA,qBAAuC;QACtC,aAAU;QACT,GAAG,KAAK;;;;;;AAGf;MATS;AAWT,SAAS,mBAAmB,KAE2C;QAF3C,EAC1B,GAAG,OACkE,GAF3C;IAG1B,qBACE,sYAAC,2XAAA,CAAA,qBAAuC;QACtC,aAAU;QACT,GAAG,KAAK;;;;;;AAGf;MATS","debugId":null}},
    {"offset": {"line": 2148, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/deer/web/src/app/chat/components/message-list-view.tsx"],"sourcesContent":["// Copyright (c) 2025 Bytedance Ltd. and/or its affiliates\n// SPDX-License-Identifier: MIT\n\nimport { LoadingOutlined } from \"@ant-design/icons\";\nimport { motion } from \"framer-motion\";\nimport {\n  Download,\n  Headphones,\n  ChevronDown,\n  ChevronRight,\n  Lightbulb,\n  Wrench,\n} from \"lucide-react\";\nimport { useTranslations } from \"next-intl\";\nimport React, { useCallback, useMemo, useRef, useState } from \"react\";\n\nimport { LoadingAnimation } from \"~/components/deer-flow/loading-animation\";\nimport { Markdown } from \"~/components/deer-flow/markdown\";\nimport { RainbowText } from \"~/components/deer-flow/rainbow-text\";\nimport { RollingText } from \"~/components/deer-flow/rolling-text\";\nimport {\n  ScrollContainer,\n  type ScrollContainerRef,\n} from \"~/components/deer-flow/scroll-container\";\nimport { Tooltip } from \"~/components/deer-flow/tooltip\";\nimport { Button } from \"~/components/ui/button\";\nimport {\n  Card,\n  CardContent,\n  CardFooter,\n  CardHeader,\n  CardTitle,\n} from \"~/components/ui/card\";\nimport {\n  Collapsible,\n  CollapsibleContent,\n  CollapsibleTrigger,\n} from \"~/components/ui/collapsible\";\nimport type { Message, Option } from \"~/core/messages\";\nimport {\n  closeResearch,\n  openResearch,\n  useLastFeedbackMessageId,\n  useLastInterruptMessage,\n  useMessage,\n  useRenderableMessageIds,\n  useResearchMessage,\n  useStore,\n} from \"~/core/store\";\nimport { parseJSON } from \"~/core/utils\";\nimport { cn } from \"~/lib/utils\";\n\nexport function MessageListView({\n  className,\n  onFeedback,\n  onSendMessage,\n}: {\n  className?: string;\n  onFeedback?: (feedback: { option: Option }) => void;\n  onSendMessage?: (\n    message: string,\n    options?: { interruptFeedback?: string },\n  ) => void;\n}) {\n  const scrollContainerRef = useRef<ScrollContainerRef>(null);\n  // Use renderable message IDs to avoid React key warnings from duplicate or non-rendering messages\n  const messageIds = useRenderableMessageIds();\n  const interruptMessage = useLastInterruptMessage();\n  const waitingForFeedbackMessageId = useLastFeedbackMessageId();\n  const responding = useStore((state) => state.responding);\n  const noOngoingResearch = useStore(\n    (state) => state.ongoingResearchId === null,\n  );\n  const ongoingResearchIsOpen = useStore(\n    (state) => state.ongoingResearchId === state.openResearchId,\n  );\n\n  const handleToggleResearch = useCallback(() => {\n    // Fix the issue where auto-scrolling to the bottom\n    // occasionally fails when toggling research.\n    const timer = setTimeout(() => {\n      if (scrollContainerRef.current) {\n        scrollContainerRef.current.scrollToBottom();\n      }\n    }, 500);\n    return () => {\n      clearTimeout(timer);\n    };\n  }, []);\n\n  return (\n    <ScrollContainer\n      className={cn(\"flex h-full w-full flex-col overflow-hidden\", className)}\n      scrollShadowColor=\"var(--app-background)\"\n      autoScrollToBottom\n      ref={scrollContainerRef}\n    >\n      <ul className=\"flex flex-col\">\n        {messageIds.map((messageId) => (\n          <MessageListItem\n            key={messageId}\n            messageId={messageId}\n            waitForFeedback={waitingForFeedbackMessageId === messageId}\n            interruptMessage={interruptMessage}\n            onFeedback={onFeedback}\n            onSendMessage={onSendMessage}\n            onToggleResearch={handleToggleResearch}\n          />\n        ))}\n        <div className=\"flex h-8 w-full shrink-0\"></div>\n      </ul>\n      {responding && (noOngoingResearch || !ongoingResearchIsOpen) && (\n        <LoadingAnimation className=\"ml-4\" />\n      )}\n    </ScrollContainer>\n  );\n}\n\nfunction MessageListItem({\n  className,\n  messageId,\n  waitForFeedback,\n  interruptMessage,\n  onFeedback,\n  onSendMessage,\n  onToggleResearch,\n}: {\n  className?: string;\n  messageId: string;\n  waitForFeedback?: boolean;\n  onFeedback?: (feedback: { option: Option }) => void;\n  interruptMessage?: Message | null;\n  onSendMessage?: (\n    message: string,\n    options?: { interruptFeedback?: string },\n  ) => void;\n  onToggleResearch?: () => void;\n}) {\n  const message = useMessage(messageId);\n  const researchIds = useStore((state) => state.researchIds);\n  const startOfResearch = useMemo(() => {\n    return researchIds.includes(messageId);\n  }, [researchIds, messageId]);\n  if (message) {\n    if (\n      message.role === \"user\" ||\n      message.agent === \"coordinator\" ||\n      message.agent === \"planner\" ||\n      message.agent === \"podcast\" ||\n      startOfResearch\n    ) {\n      let content: React.ReactNode;\n      if (message.agent === \"planner\") {\n        content = (\n          <div className=\"w-full px-4\">\n            <PlanCard\n              message={message}\n              waitForFeedback={waitForFeedback}\n              interruptMessage={interruptMessage}\n              onFeedback={onFeedback}\n              onSendMessage={onSendMessage}\n            />\n          </div>\n        );\n      } else if (message.agent === \"podcast\") {\n        content = (\n          <div className=\"w-full px-4\">\n            <PodcastCard message={message} />\n          </div>\n        );\n      } else if (startOfResearch) {\n        content = (\n          <div className=\"w-full px-4\">\n            <ResearchCard\n              researchId={message.id}\n              onToggleResearch={onToggleResearch}\n            />\n          </div>\n        );\n      } else {\n        content = message.content ? (\n          <div\n            className={cn(\n              \"flex w-full px-4\",\n              message.role === \"user\" && \"justify-end\",\n              className,\n            )}\n          >\n            <MessageBubble message={message}>\n              <div className=\"flex w-full flex-col break-words\">\n                <Markdown\n                  className={cn(\n                    message.role === \"user\" &&\n                      \"prose-invert not-dark:text-secondary dark:text-inherit\",\n                  )}\n                >\n                  {message?.content}\n                </Markdown>\n              </div>\n            </MessageBubble>\n          </div>\n        ) : null;\n      }\n      if (content) {\n        return (\n          <motion.li\n            className=\"mt-10\"\n            key={messageId}\n            initial={{ opacity: 0, y: 24 }}\n            animate={{ opacity: 1, y: 0 }}\n            style={{ transition: \"all 0.2s ease-out\" }}\n            transition={{\n              duration: 0.2,\n              ease: \"easeOut\",\n            }}\n          >\n            {content}\n          </motion.li>\n        );\n      }\n    }\n    return null;\n  }\n}\n\nfunction MessageBubble({\n  className,\n  message,\n  children,\n}: {\n  className?: string;\n  message: Message;\n  children: React.ReactNode;\n}) {\n  return (\n    <div\n      className={cn(\n        \"group flex w-auto max-w-[90vw] flex-col rounded-2xl px-4 py-3 break-words\",\n        message.role === \"user\" && \"bg-brand rounded-ee-none\",\n        message.role === \"assistant\" && \"bg-card rounded-es-none\",\n        className,\n      )}\n      style={{ wordBreak: \"break-all\" }}\n    >\n      {children}\n    </div>\n  );\n}\n\nfunction ResearchCard({\n  className,\n  researchId,\n  onToggleResearch,\n}: {\n  className?: string;\n  researchId: string;\n  onToggleResearch?: () => void;\n}) {\n  const t = useTranslations(\"chat.research\");\n  const reportId = useStore((state) => state.researchReportIds.get(researchId));\n  const hasReport = reportId !== undefined;\n  const reportGenerating = useStore(\n    (state) => hasReport && state.messages.get(reportId)!.isStreaming,\n  );\n  const openResearchId = useStore((state) => state.openResearchId);\n  const state = useMemo(() => {\n    if (hasReport) {\n      return reportGenerating ? t(\"generatingReport\") : t(\"reportGenerated\");\n    }\n    return t(\"researching\");\n  }, [hasReport, reportGenerating, t]);\n  const msg = useResearchMessage(researchId);\n  const title = useMemo(() => {\n    if (msg) {\n      return parseJSON(msg.content ?? \"\", { title: \"\" }).title;\n    }\n    return undefined;\n  }, [msg]);\n  const handleOpen = useCallback(() => {\n    if (openResearchId === researchId) {\n      closeResearch();\n    } else {\n      openResearch(researchId);\n    }\n    onToggleResearch?.();\n  }, [openResearchId, researchId, onToggleResearch]);\n  return (\n    <Card className={cn(\"w-full\", className)}>\n      <CardHeader>\n        <CardTitle>\n          <RainbowText animated={state !== t(\"reportGenerated\")}>\n            {title !== undefined && title !== \"\" ? title : t(\"deepResearch\")}\n          </RainbowText>\n        </CardTitle>\n      </CardHeader>\n      <CardFooter>\n        <div className=\"flex w-full\">\n          <RollingText className=\"text-muted-foreground flex-grow text-sm\">\n            {state}\n          </RollingText>\n          <Button\n            variant={!openResearchId ? \"default\" : \"outline\"}\n            onClick={handleOpen}\n          >\n            {researchId !== openResearchId ? t(\"open\") : t(\"close\")}\n          </Button>\n        </div>\n      </CardFooter>\n    </Card>\n  );\n}\n\nfunction ThoughtBlock({\n  className,\n  content,\n  isStreaming,\n  hasMainContent,\n  contentChunks,\n}: {\n  className?: string;\n  content: string;\n  isStreaming?: boolean;\n  hasMainContent?: boolean;\n  contentChunks?: string[];\n}) {\n  const t = useTranslations(\"chat.research\");\n  const [isOpen, setIsOpen] = useState(true);\n\n  const [hasAutoCollapsed, setHasAutoCollapsed] = useState(false);\n\n  React.useEffect(() => {\n    if (hasMainContent && !hasAutoCollapsed) {\n      setIsOpen(false);\n      setHasAutoCollapsed(true);\n    }\n  }, [hasMainContent, hasAutoCollapsed]);\n\n  if (!content || content.trim() === \"\") {\n    return null;\n  }\n\n  // Split content into static (previous chunks) and streaming (current chunk)\n  const chunks = contentChunks ?? [];\n  const staticContent = chunks.slice(0, -1).join(\"\");\n  const streamingChunk = isStreaming && chunks.length > 0 ? (chunks[chunks.length - 1] ?? \"\") : \"\";\n  const hasStreamingContent = isStreaming && streamingChunk.length > 0;\n\n  return (\n    <div className={cn(\"mb-6 w-full\", className)}>\n      <Collapsible open={isOpen} onOpenChange={setIsOpen}>\n        <CollapsibleTrigger asChild>\n          <Button\n            variant=\"ghost\"\n            className={cn(\n              \"h-auto w-full justify-start rounded-xl border px-6 py-4 text-left transition-all duration-200\",\n              \"hover:bg-accent hover:text-accent-foreground\",\n              isStreaming\n                ? \"border-primary/20 bg-primary/5 shadow-sm\"\n                : \"border-border bg-card\",\n            )}\n          >\n            <div className=\"flex w-full items-center gap-3\">\n              <Lightbulb\n                size={18}\n                className={cn(\n                  \"shrink-0 transition-colors duration-200\",\n                  isStreaming ? \"text-primary\" : \"text-muted-foreground\",\n                )}\n              />\n              <span\n                className={cn(\n                  \"leading-none font-semibold transition-colors duration-200\",\n                  isStreaming ? \"text-primary\" : \"text-foreground\",\n                )}\n              >\n                {t(\"deepThinking\")}\n              </span>\n              {isStreaming && <LoadingAnimation className=\"ml-2 scale-75\" />}\n              <div className=\"flex-grow\" />\n              {isOpen ? (\n                <ChevronDown\n                  size={16}\n                  className=\"text-muted-foreground transition-transform duration-200\"\n                />\n              ) : (\n                <ChevronRight\n                  size={16}\n                  className=\"text-muted-foreground transition-transform duration-200\"\n                />\n              )}\n            </div>\n          </Button>\n        </CollapsibleTrigger>\n        <CollapsibleContent className=\"data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:slide-up-2 data-[state=open]:slide-down-2 mt-3\">\n          <Card\n            className={cn(\n              \"transition-all duration-200\",\n              isStreaming ? \"border-primary/20 bg-primary/5\" : \"border-border\",\n            )}\n          >\n            <CardContent>\n              <div className=\"flex h-40 w-full overflow-y-auto\">\n                <ScrollContainer\n                  className={cn(\n                    \"flex h-full w-full flex-col overflow-hidden\",\n                    className,\n                  )}\n                  scrollShadow={false}\n                  autoScrollToBottom\n                >\n                  {staticContent && (\n                    <Markdown\n                      className={cn(\n                        \"prose dark:prose-invert max-w-none transition-colors duration-200\",\n                        \"opacity-80\",\n                      )}\n                      animated={false}\n                    >\n                      {staticContent}\n                    </Markdown>\n                  )}\n                  {hasStreamingContent && (\n                    <Markdown\n                      className={cn(\n                        \"prose dark:prose-invert max-w-none transition-colors duration-200\",\n                        \"prose-primary\",\n                      )}\n                      animated={true}\n                    >\n                      {streamingChunk}\n                    </Markdown>\n                  )}\n                  {!hasStreamingContent && (\n                    <Markdown\n                      className={cn(\n                        \"prose dark:prose-invert max-w-none transition-colors duration-200\",\n                        isStreaming ? \"prose-primary\" : \"opacity-80\",\n                      )}\n                      animated={false}\n                    >\n                      {content}\n                    </Markdown>\n                  )}\n                </ScrollContainer>\n              </div>\n            </CardContent>\n          </Card>\n        </CollapsibleContent>\n      </Collapsible>\n    </div>\n  );\n}\n\nconst GREETINGS = [\"Cool\", \"Sounds great\", \"Looks good\", \"Great\", \"Awesome\"];\nfunction PlanCard({\n  className,\n  message,\n  interruptMessage,\n  onFeedback,\n  waitForFeedback,\n  onSendMessage,\n}: {\n  className?: string;\n  message: Message;\n  interruptMessage?: Message | null;\n  onFeedback?: (feedback: { option: Option }) => void;\n  onSendMessage?: (\n    message: string,\n    options?: { interruptFeedback?: string },\n  ) => void;\n  waitForFeedback?: boolean;\n}) {\n  const t = useTranslations(\"chat.research\");\n  const plan = useMemo<{\n    title?: string;\n    thought?: string;\n    steps?: { title?: string; description?: string; tools?: string[] }[];\n  }>(() => {\n    return parseJSON(message.content ?? \"\", {});\n  }, [message.content]);\n\n  const reasoningContent = message.reasoningContent;\n  const hasMainContent = Boolean(\n    message.content && message.content.trim() !== \"\",\n  );\n\n  // \n  const isThinking = Boolean(reasoningContent && !hasMainContent);\n\n  // \n  const shouldShowPlan = hasMainContent;\n  const handleAccept = useCallback(async () => {\n    if (onSendMessage) {\n      onSendMessage(\n        `${GREETINGS[Math.floor(Math.random() * GREETINGS.length)]}! ${Math.random() > 0.5 ? \"Let's get started.\" : \"Let's start.\"}`,\n        {\n          interruptFeedback: \"accepted\",\n        },\n      );\n    }\n  }, [onSendMessage]);\n  return (\n    <div className={cn(\"w-full\", className)}>\n      {reasoningContent && (\n        <ThoughtBlock\n          content={reasoningContent}\n          isStreaming={isThinking}\n          hasMainContent={hasMainContent}\n          contentChunks={message.reasoningContentChunks}\n        />\n      )}\n      {shouldShowPlan && (\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ duration: 0.3, ease: \"easeOut\" }}\n        >\n          <Card className=\"w-full\">\n            <CardHeader>\n              <CardTitle>\n                <Markdown animated={false}>\n                  {`### ${\n                    plan.title !== undefined && plan.title !== \"\"\n                      ? plan.title\n                      : t(\"deepResearch\")\n                  }`}\n                </Markdown>\n              </CardTitle>\n            </CardHeader>\n            <CardContent>\n              <div style={{ wordBreak: 'break-all', whiteSpace: 'normal' }}>\n                <Markdown className=\"opacity-80\" animated={false}>\n                  {plan.thought}\n                </Markdown>\n                {plan.steps && (\n                  <ul className=\"my-2 flex list-decimal flex-col gap-4 border-l-[2px] pl-8\">\n                    {plan.steps.map((step, i) => (\n                      <li key={`step-${i}`} style={{ wordBreak: 'break-all', whiteSpace: 'normal' }}>\n                        <div className=\"flex items-start gap-2\">\n                          <div className=\"flex-1\">\n                            <h3 className=\"mb flex items-center gap-2 text-lg font-medium\">\n                              <Markdown animated={false}>\n                                {step.title}\n                              </Markdown>\n                              {step.tools && step.tools.length > 0 && (\n                                <Tooltip\n                                  title={`Uses ${step.tools.length} MCP tool${step.tools.length > 1 ? \"s\" : \"\"}`}\n                                >\n                                  <div className=\"flex items-center gap-1 rounded-full bg-blue-100 px-2 py-1 text-xs text-blue-800\">\n                                    <Wrench size={12} />\n                                    <span>{step.tools.length}</span>\n                                  </div>\n                                </Tooltip>\n                              )}\n                            </h3>\n                            <div className=\"text-muted-foreground text-sm\" style={{ wordBreak: 'break-all', whiteSpace: 'normal' }}>\n                              <Markdown animated={false}>\n                                {step.description}\n                              </Markdown>\n                            </div>\n                            {step.tools && step.tools.length > 0 && (\n                              <ToolsDisplay tools={step.tools} />\n                            )}\n                          </div>\n                        </div>\n                      </li>\n                    ))}\n                  </ul>\n                )}\n              </div>\n            </CardContent>\n            <CardFooter className=\"flex justify-end\">\n              {!message.isStreaming && interruptMessage?.options?.length && (\n                <motion.div\n                  className=\"flex gap-2\"\n                  initial={{ opacity: 0, y: 12 }}\n                  animate={{ opacity: 1, y: 0 }}\n                  transition={{ duration: 0.3, delay: 0.3 }}\n                >\n                  {interruptMessage?.options.map((option) => (\n                    <Button\n                      key={option.value}\n                      variant={\n                        option.value === \"accepted\" ? \"default\" : \"outline\"\n                      }\n                      disabled={!waitForFeedback}\n                      onClick={() => {\n                        if (option.value === \"accepted\") {\n                          void handleAccept();\n                        } else {\n                          onFeedback?.({\n                            option,\n                          });\n                        }\n                      }}\n                    >\n                      {option.text}\n                    </Button>\n                  ))}\n                </motion.div>\n              )}\n            </CardFooter>\n          </Card>\n        </motion.div>\n      )}\n    </div>\n  );\n}\n\nfunction PodcastCard({\n  className,\n  message,\n}: {\n  className?: string;\n  message: Message;\n}) {\n  const data = useMemo(() => {\n    return JSON.parse(message.content ?? \"\");\n  }, [message.content]);\n  const title = useMemo<string | undefined>(() => data?.title, [data]);\n  const audioUrl = useMemo<string | undefined>(() => data?.audioUrl, [data]);\n  const isGenerating = useMemo(() => {\n    return message.isStreaming;\n  }, [message.isStreaming]);\n  const hasError = useMemo(() => {\n    return data?.error !== undefined;\n  }, [data]);\n  const [isPlaying, setIsPlaying] = useState(false);\n  return (\n    <Card className={cn(\"w-[508px]\", className)}>\n      <CardHeader>\n        <div className=\"text-muted-foreground flex items-center justify-between text-sm\">\n          <div className=\"flex items-center gap-2\">\n            {isGenerating ? <LoadingOutlined /> : <Headphones size={16} />}\n            {!hasError ? (\n              <RainbowText animated={isGenerating}>\n                {isGenerating\n                  ? \"Generating podcast...\"\n                  : isPlaying\n                    ? \"Now playing podcast...\"\n                    : \"Podcast\"}\n              </RainbowText>\n            ) : (\n              <div className=\"text-red-500\">\n                Error when generating podcast. Please try again.\n              </div>\n            )}\n          </div>\n          {!hasError && !isGenerating && (\n            <div className=\"flex\">\n              <Tooltip title=\"Download podcast\">\n                <Button variant=\"ghost\" size=\"icon\" asChild>\n                  <a\n                    href={audioUrl}\n                    download={`${(title ?? \"podcast\").replaceAll(\" \", \"-\")}.mp3`}\n                  >\n                    <Download size={16} />\n                  </a>\n                </Button>\n              </Tooltip>\n            </div>\n          )}\n        </div>\n        <CardTitle>\n          <div className=\"text-lg font-medium\">\n            <RainbowText animated={isGenerating}>{title}</RainbowText>\n          </div>\n        </CardTitle>\n      </CardHeader>\n      <CardContent>\n        {audioUrl ? (\n          <audio\n            className=\"w-full\"\n            src={audioUrl}\n            controls\n            onPlay={() => setIsPlaying(true)}\n            onPause={() => setIsPlaying(false)}\n          />\n        ) : (\n          <div className=\"w-full\"></div>\n        )}\n      </CardContent>\n    </Card>\n  );\n}\n\nfunction ToolsDisplay({ tools }: { tools: string[] }) {\n  return (\n    <div className=\"mt-2 flex flex-wrap gap-1\">\n      {tools.map((tool, index) => (\n        <span\n          key={index}\n          className=\"rounded-md bg-muted px-2 py-1 text-xs font-mono text-muted-foreground\"\n        >\n          {tool}\n        </span>\n      ))}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3257, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/deer/web/src/app/chat/components/welcome.tsx"],"sourcesContent":["// Copyright (c) 2025 Bytedance Ltd. and/or its affiliates\n// SPDX-License-Identifier: MIT\n\nimport { motion } from \"framer-motion\";\nimport { useTranslations } from \"next-intl\";\n\nimport { cn } from \"~/lib/utils\";\n\nexport function Welcome({ className }: { className?: string }) {\n  const t = useTranslations(\"chat.welcome\");\n\n  return (\n    <motion.div\n      className={cn(\"flex flex-col\", className)}\n      style={{ transition: \"all 0.2s ease-out\" }}\n      initial={{ opacity: 0, scale: 0.85 }}\n      animate={{ opacity: 1, scale: 1 }}\n    >\n      <h3 className=\"mb-2 text-center text-3xl font-medium\">{t(\"greeting\")}</h3>\n      <div className=\"text-muted-foreground px-4 text-center text-lg\">\n        {t(\"description\")}\n      </div>\n    </motion.div>\n  );\n}\n"],"names":[],"mappings":"AAAA,0DAA0D;AAC1D,+BAA+B;;;;;AAE/B;AACA;AAEA;;;;;;AAEO,SAAS,QAAQ,KAAqC;QAArC,EAAE,SAAS,EAA0B,GAArC;;IACtB,MAAM,IAAI,CAAA,GAAA,8ZAAA,CAAA,kBAAe,AAAD,EAAE;IAE1B,qBACE,sYAAC,wUAAA,CAAA,SAAM,CAAC,GAAG;QACT,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,iBAAiB;QAC/B,OAAO;YAAE,YAAY;QAAoB;QACzC,SAAS;YAAE,SAAS;YAAG,OAAO;QAAK;QACnC,SAAS;YAAE,SAAS;YAAG,OAAO;QAAE;;0BAEhC,sYAAC;gBAAG,WAAU;0BAAyC,EAAE;;;;;;0BACzD,sYAAC;gBAAI,WAAU;0BACZ,EAAE;;;;;;;;;;;;AAIX;GAhBgB;;QACJ,8ZAAA,CAAA,kBAAe;;;KADX","debugId":null}},
    {"offset": {"line": 3329, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/deer/web/src/app/chat/components/vibe-home.tsx"],"sourcesContent":["\"use client\";\n\nimport React from \"react\";\n\nimport { useTheme } from \"next-themes\";\nimport type { Option, Resource } from \"~/core/messages\";\nimport { cn } from \"~/lib/utils\";\n\nimport { InputBox } from \"./input-box\";\n\nexport interface VibeHomeProps {\n  className?: string;\n  responding?: boolean;\n  feedback?: { option: Option } | null;\n  onSend?: (\n    message: string,\n    options?: {\n      interruptFeedback?: string;\n      resources?: Array<Resource>;\n    },\n  ) => void | Promise<void>;\n  onCancel?: () => void;\n  onRemoveFeedback?: () => void;\n}\n\nexport function VibeHome({\n  className,\n  responding,\n  feedback,\n  onSend,\n  onCancel,\n  onRemoveFeedback,\n}: VibeHomeProps) {\n  const { resolvedTheme = \"dark\" } = useTheme();\n  return (\n    <div\n      className={cn(\n        \"relative flex h-full w-full items-center justify-center overflow-hidden\",\n        resolvedTheme === \"light\" ? \"bg-white text-black\" : \"bg-black text-white\",\n        className,\n      )}\n    >\n      {/* background glow */}\n      <div className=\"pointer-events-none absolute inset-0 overflow-hidden\">\n        <div className=\"absolute top-10 left-10 h-64 w-64 rounded-full bg-gradient-to-br from-[#0071e3]/10 to-transparent blur-3xl\" />\n        <div className=\"absolute bottom-10 right-10 h-64 w-64 rounded-full bg-gradient-to-tl from-[#00d4ff]/10 to-transparent blur-3xl\" />\n      </div>\n\n      <div className=\"relative z-10 w-full max-w-3xl px-4 py-8 md:px-0 md:py-10\">\n        {/* title */}\n        <div className=\"apple-animate-in text-center space-y-3 md:space-y-4\">\n          <div className=\"space-y-1\">\n            <h1\n              className={cn(\n                \"mb-2 text-5xl font-black leading-[0.85] tracking-tighter md:text-[5rem]\",\n                resolvedTheme === \"light\" ? \"text-black\" : \"text-white\",\n              )}\n              style={{ fontFamily: \"system-ui, -apple-system, sans-serif\" }}\n            >\n              DeepCraft\n            </h1>\n            <h2\n              className={cn(\n                \"-mt-2 text-xl font-light italic leading-none tracking-wide md:text-[2.2rem]\",\n                resolvedTheme === \"light\" ? \"text-zinc-700\" : \"text-zinc-300\",\n              )}\n              style={{ fontFamily: \"Georgia, serif\" }}\n            >\n              Research Studio\n            </h2>\n          </div>\n          <p\n            className={cn(\n              \"mx-auto max-w-2xl px-4 pt-3 text-sm font-light leading-relaxed md:px-0 md:text-lg\",\n              resolvedTheme === \"light\" ? \"text-zinc-600\" : \"text-zinc-400\",\n            )}\n            style={{ fontFamily: \"system-ui, sans-serif\" }}\n          >\n             DeepCraft \n          </p>\n        </div>\n\n        {/* centered chat-style input box */}\n        <div className=\"apple-animate-in apple-animate-delay-1 mt-8 md:mt-10\">\n          <InputBox\n            className=\"mx-auto w-full max-w-3xl\"\n            responding={responding}\n            feedback={feedback}\n            onSend={onSend}\n            onCancel={onCancel}\n            onRemoveFeedback={onRemoveFeedback}\n          />\n        </div>\n\n        {/* footer */}\n        <footer\n          className={cn(\n            \"apple-animate-in apple-animate-delay-2 mt-8 py-4 text-center text-xs font-light md:mt-12 md:text-sm\",\n            resolvedTheme === \"light\" ? \"text-zinc-600\" : \"text-zinc-500\",\n          )}\n        >\n          <span className=\"mx-2\">Deep exploration - Efficient research - Agentic workflows</span>\n        </footer>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AAIA;AAEA;AAEA;;;AARA;;;;AAyBO,SAAS,SAAS,KAOT;QAPS,EACvB,SAAS,EACT,UAAU,EACV,QAAQ,EACR,MAAM,EACN,QAAQ,EACR,gBAAgB,EACF,GAPS;;IAQvB,MAAM,EAAE,gBAAgB,MAAM,EAAE,GAAG,CAAA,GAAA,2RAAA,CAAA,WAAQ,AAAD;IAC1C,qBACE,sYAAC;QACC,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,2EACA,kBAAkB,UAAU,wBAAwB,uBACpD;;0BAIF,sYAAC;gBAAI,WAAU;;kCACb,sYAAC;wBAAI,WAAU;;;;;;kCACf,sYAAC;wBAAI,WAAU;;;;;;;;;;;;0BAGjB,sYAAC;gBAAI,WAAU;;kCAEb,sYAAC;wBAAI,WAAU;;0CACb,sYAAC;gCAAI,WAAU;;kDACb,sYAAC;wCACC,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,2EACA,kBAAkB,UAAU,eAAe;wCAE7C,OAAO;4CAAE,YAAY;wCAAuC;kDAC7D;;;;;;kDAGD,sYAAC;wCACC,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,+EACA,kBAAkB,UAAU,kBAAkB;wCAEhD,OAAO;4CAAE,YAAY;wCAAiB;kDACvC;;;;;;;;;;;;0CAIH,sYAAC;gCACC,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,qFACA,kBAAkB,UAAU,kBAAkB;gCAEhD,OAAO;oCAAE,YAAY;gCAAwB;0CAC9C;;;;;;;;;;;;kCAMH,sYAAC;wBAAI,WAAU;kCACb,cAAA,sYAAC,oJAAA,CAAA,WAAQ;4BACP,WAAU;4BACV,YAAY;4BACZ,UAAU;4BACV,QAAQ;4BACR,UAAU;4BACV,kBAAkB;;;;;;;;;;;kCAKtB,sYAAC;wBACC,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,uGACA,kBAAkB,UAAU,kBAAkB;kCAGhD,cAAA,sYAAC;4BAAK,WAAU;sCAAO;;;;;;;;;;;;;;;;;;;;;;;AAKjC;GAjFgB;;QAQqB,2RAAA,CAAA,WAAQ;;;KAR7B","debugId":null}},
    {"offset": {"line": 3490, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/deer/web/src/app/chat/components/messages-block.tsx"],"sourcesContent":["// Copyright (c) 2025 Bytedance Ltd. and/or its affiliates\n// SPDX-License-Identifier: MIT\n\nimport { motion } from \"framer-motion\";\nimport { FastForward, Play } from \"lucide-react\";\nimport { useTranslations } from \"next-intl\";\nimport { useCallback, useRef, useState } from \"react\";\n\nimport { RainbowText } from \"~/components/deer-flow/rainbow-text\";\nimport { Button } from \"~/components/ui/button\";\nimport {\n  Card,\n  CardDescription,\n  CardHeader,\n  CardTitle,\n} from \"~/components/ui/card\";\nimport { fastForwardReplay } from \"~/core/api\";\nimport { useReplayMetadata } from \"~/core/api/hooks\";\nimport type { Option, Resource } from \"~/core/messages\";\nimport { useReplay } from \"~/core/replay\";\nimport { sendMessage, useMessageIds, useStore } from \"~/core/store\";\nimport { env } from \"~/env\";\nimport { cn } from \"~/lib/utils\";\n\nimport { InputBox } from \"./input-box\";\nimport { MessageListView } from \"./message-list-view\";\nimport { Welcome } from \"./welcome\";\nimport { VibeHome } from \"./vibe-home\";\n\nexport function MessagesBlock({ className }: { className?: string }) {\n  const t = useTranslations(\"chat.messages\");\n  const messageIds = useMessageIds();\n  const messageCount = messageIds.length;\n  const responding = useStore((state) => state.responding);\n  const { isReplay } = useReplay();\n  const { title: replayTitle, hasError: replayHasError } = useReplayMetadata();\n  const [replayStarted, setReplayStarted] = useState(false);\n  const abortControllerRef = useRef<AbortController | null>(null);\n  const [feedback, setFeedback] = useState<{ option: Option } | null>(null);\n  const handleSend = useCallback(\n    async (\n      message: string,\n      options?: {\n        interruptFeedback?: string;\n        resources?: Array<Resource>;\n      },\n    ) => {\n      const abortController = new AbortController();\n      abortControllerRef.current = abortController;\n      try {\n        await sendMessage(\n          message,\n          {\n            interruptFeedback:\n              options?.interruptFeedback ?? feedback?.option.value,\n            resources: options?.resources,\n          },\n          {\n            abortSignal: abortController.signal,\n          },\n        );\n      } catch {}\n    },\n    [feedback],\n  );\n  const handleCancel = useCallback(() => {\n    abortControllerRef.current?.abort();\n    abortControllerRef.current = null;\n  }, []);\n  const handleFeedback = useCallback(\n    (feedback: { option: Option }) => {\n      setFeedback(feedback);\n    },\n    [setFeedback],\n  );\n  const handleRemoveFeedback = useCallback(() => {\n    setFeedback(null);\n  }, [setFeedback]);\n  const handleStartReplay = useCallback(() => {\n    setReplayStarted(true);\n    void sendMessage();\n  }, [setReplayStarted]);\n  const [fastForwarding, setFastForwarding] = useState(false);\n  const handleFastForwardReplay = useCallback(() => {\n    setFastForwarding(!fastForwarding);\n    fastForwardReplay(!fastForwarding);\n  }, [fastForwarding]);\n  const showLanding = !isReplay && !responding && messageCount === 0;\n  return (\n    <div className={cn(\"relative flex h-full flex-col\", className)}>\n      {showLanding && (\n        <div className=\"pointer-events-auto absolute inset-0 z-10 flex flex-col\">\n          <VibeHome\n            responding={responding}\n            feedback={feedback}\n            onSend={handleSend}\n            onCancel={handleCancel}\n            onRemoveFeedback={handleRemoveFeedback}\n          />\n        </div>\n      )}\n      <div\n        className={cn(\n          \"flex h-full flex-col transition-opacity duration-300\",\n          showLanding && \"pointer-events-none opacity-0\",\n        )}\n      >\n        <MessageListView\n          className=\"flex flex-grow\"\n          onFeedback={handleFeedback}\n          onSendMessage={handleSend}\n        />\n        {!isReplay ? (\n          <div className=\"relative flex h-42 shrink-0 pb-4\">\n            <InputBox\n              className=\"h-full w-full\"\n              responding={responding}\n              feedback={feedback}\n              onSend={handleSend}\n              onCancel={handleCancel}\n              onRemoveFeedback={handleRemoveFeedback}\n            />\n          </div>\n        ) : (\n          <>\n          <div\n            className={cn(\n              \"fixed bottom-[calc(50vh+80px)] left-0 transition-all duration-500 ease-out\",\n              replayStarted && \"pointer-events-none scale-150 opacity-0\",\n            )}\n          >\n            <Welcome />\n          </div>\n          <motion.div\n            className=\"mb-4 h-fit w-full items-center justify-center\"\n            initial={{ opacity: 0, y: \"20vh\" }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ duration: 0.5 }}\n          >\n            <Card\n              className={cn(\n                \"w-full transition-all duration-300\",\n                !replayStarted && \"translate-y-[-40vh]\",\n              )}\n            >\n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex flex-grow items-center\">\n                  {responding && (\n                    <motion.div\n                      className=\"ml-3\"\n                      initial={{ opacity: 0, scale: 0.8 }}\n                      animate={{ opacity: 1, scale: 1 }}\n                      exit={{ opacity: 0, scale: 0.8 }}\n                      transition={{ duration: 0.3 }}\n                    >\n                      <video\n                        // Walking deer animation, designed by @liangzhaojun. Thank you for creating it!\n                        src=\"/images/walking_deer.webm\"\n                        autoPlay\n                        loop\n                        muted\n                        className=\"h-[42px] w-[42px] object-contain\"\n                      />\n                    </motion.div>\n                  )}\n                  <CardHeader className={cn(\"flex-grow\", responding && \"pl-3\")}>\n                    <CardTitle>\n                      <RainbowText animated={responding}>\n                        {responding ? t(\"replaying\") : `${replayTitle}`}\n                      </RainbowText>\n                    </CardTitle>\n                    <CardDescription>\n                      <RainbowText animated={responding}>\n                        {responding\n                          ? t(\"replayDescription\")\n                          : replayStarted\n                            ? t(\"replayHasStopped\")\n                            : t(\"replayModeDescription\")}\n                      </RainbowText>\n                    </CardDescription>\n                  </CardHeader>\n                </div>\n                {!replayHasError && (\n                  <div className=\"pr-4\">\n                    {responding && (\n                      <Button\n                        className={cn(fastForwarding && \"animate-pulse\")}\n                        variant={fastForwarding ? \"default\" : \"outline\"}\n                        onClick={handleFastForwardReplay}\n                      >\n                        <FastForward size={16} />\n                        {t(\"fastForward\")}\n                      </Button>\n                    )}\n                    {!replayStarted && (\n                      <Button className=\"w-24\" onClick={handleStartReplay}>\n                        <Play size={16} />\n                        {t(\"play\")}\n                      </Button>\n                    )}\n                  </div>\n                )}\n              </div>\n              </Card>\n              {!replayStarted && env.NEXT_PUBLIC_STATIC_WEBSITE_ONLY && (\n                <div className=\"text-muted-foreground w-full text-center text-xs\">\n                  {t(\"demoNotice\")}{\" \"}\n                  <a\n                    className=\"underline\"\n                    href=\"https://github.com/bytedance/deer-flow\"\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                  >\n                    {t(\"clickHere\")}\n                  </a>{\" \"}\n                  {t(\"cloneLocally\")}\n                </div>\n              )}\n            </motion.div>\n          </>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3893, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/deer/web/src/components/deer-flow/fav-icon.tsx"],"sourcesContent":["// Copyright (c) 2025 Bytedance Ltd. and/or its affiliates\n// SPDX-License-Identifier: MIT\n\nimport { cn } from \"~/lib/utils\";\n\nexport function FavIcon({\n  className,\n  url,\n  title,\n}: {\n  className?: string;\n  url: string;\n  title?: string;\n}) {\n  return (\n    <img\n      className={cn(\"bg-accent h-4 w-4 rounded-full shadow-sm\", className)}\n      width={16}\n      height={16}\n      src={new URL(url).origin + \"/favicon.ico\"}\n      alt={title}\n      onError={(e) => {\n        e.currentTarget.src =\n          \"https://perishablepress.com/wp/wp-content/images/2021/favicon-standard.png\";\n      }}\n    />\n  );\n}\n"],"names":[],"mappings":"AAAA,0DAA0D;AAC1D,+BAA+B;;;;;AAE/B;;;AAEO,SAAS,QAAQ,KAQvB;QARuB,EACtB,SAAS,EACT,GAAG,EACH,KAAK,EAKN,GARuB;IAStB,qBACE,sYAAC;QACC,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,4CAA4C;QAC1D,OAAO;QACP,QAAQ;QACR,KAAK,IAAI,IAAI,KAAK,MAAM,GAAG;QAC3B,KAAK;QACL,SAAS,CAAC;YACR,EAAE,aAAa,CAAC,GAAG,GACjB;QACJ;;;;;;AAGN;KAtBgB","debugId":null}},
    {"offset": {"line": 3931, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/deer/web/src/components/ui/accordion.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as AccordionPrimitive from \"@radix-ui/react-accordion\"\nimport { ChevronDownIcon } from \"lucide-react\"\n\nimport { cn } from \"~/lib/utils\"\n\nfunction Accordion({\n  ...props\n}: React.ComponentProps<typeof AccordionPrimitive.Root>) {\n  return <AccordionPrimitive.Root data-slot=\"accordion\" {...props} />\n}\n\nfunction AccordionItem({\n  className,\n  ...props\n}: React.ComponentProps<typeof AccordionPrimitive.Item>) {\n  return (\n    <AccordionPrimitive.Item\n      data-slot=\"accordion-item\"\n      className={cn(\"border-b last:border-b-0\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction AccordionTrigger({\n  className,\n  children,\n  ...props\n}: React.ComponentProps<typeof AccordionPrimitive.Trigger>) {\n  return (\n    <AccordionPrimitive.Header className=\"flex\">\n      <AccordionPrimitive.Trigger\n        data-slot=\"accordion-trigger\"\n        className={cn(\n          \"focus-visible:border-ring focus-visible:ring-ring/50 flex flex-1 items-start justify-between gap-4 rounded-md py-4 text-left text-sm font-medium transition-all outline-none hover:underline focus-visible:ring-[3px] disabled:pointer-events-none disabled:opacity-50 [&[data-state=open]>svg]:rotate-180\",\n          className\n        )}\n        {...props}\n      >\n        {children}\n        <ChevronDownIcon className=\"text-muted-foreground pointer-events-none size-4 shrink-0 translate-y-0.5 transition-transform duration-200\" />\n      </AccordionPrimitive.Trigger>\n    </AccordionPrimitive.Header>\n  )\n}\n\nfunction AccordionContent({\n  className,\n  children,\n  ...props\n}: React.ComponentProps<typeof AccordionPrimitive.Content>) {\n  return (\n    <AccordionPrimitive.Content\n      data-slot=\"accordion-content\"\n      className=\"data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down overflow-hidden text-sm\"\n      {...props}\n    >\n      <div className={cn(\"pt-0 pb-4\", className)}>{children}</div>\n    </AccordionPrimitive.Content>\n  )\n}\n\nexport { Accordion, AccordionItem, AccordionTrigger, AccordionContent }\n"],"names":[],"mappings":";;;;;;;AAGA;AACA;AAEA;AANA;;;;;AAQA,SAAS,UAAU,KAEoC;QAFpC,EACjB,GAAG,OACkD,GAFpC;IAGjB,qBAAO,sYAAC,yXAAA,CAAA,OAAuB;QAAC,aAAU;QAAa,GAAG,KAAK;;;;;;AACjE;KAJS;AAMT,SAAS,cAAc,KAGgC;QAHhC,EACrB,SAAS,EACT,GAAG,OACkD,GAHhC;IAIrB,qBACE,sYAAC,yXAAA,CAAA,OAAuB;QACtB,aAAU;QACV,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,4BAA4B;QACzC,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,iBAAiB,KAIgC;QAJhC,EACxB,SAAS,EACT,QAAQ,EACR,GAAG,OACqD,GAJhC;IAKxB,qBACE,sYAAC,yXAAA,CAAA,SAAyB;QAAC,WAAU;kBACnC,cAAA,sYAAC,yXAAA,CAAA,UAA0B;YACzB,aAAU;YACV,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,8SACA;YAED,GAAG,KAAK;;gBAER;8BACD,sYAAC,+SAAA,CAAA,kBAAe;oBAAC,WAAU;;;;;;;;;;;;;;;;;AAInC;MApBS;AAsBT,SAAS,iBAAiB,KAIgC;QAJhC,EACxB,SAAS,EACT,QAAQ,EACR,GAAG,OACqD,GAJhC;IAKxB,qBACE,sYAAC,yXAAA,CAAA,UAA0B;QACzB,aAAU;QACV,WAAU;QACT,GAAG,KAAK;kBAET,cAAA,sYAAC;YAAI,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,aAAa;sBAAa;;;;;;;;;;;AAGnD;MAdS","debugId":null}},
    {"offset": {"line": 4037, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/deer/web/src/components/ui/skeleton.tsx"],"sourcesContent":["import { cn } from \"~/lib/utils\"\n\nfunction Skeleton({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"skeleton\"\n      className={cn(\"bg-accent animate-pulse rounded-md\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n"],"names":[],"mappings":";;;;AAAA;;;AAEA,SAAS,SAAS,KAAoD;QAApD,EAAE,SAAS,EAAE,GAAG,OAAoC,GAApD;IAChB,qBACE,sYAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,sCAAsC;QACnD,GAAG,KAAK;;;;;;AAGf;KARS","debugId":null}},
    {"offset": {"line": 4069, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/deer/web/src/app/chat/components/research-activities-block.tsx"],"sourcesContent":["// Copyright (c) 2025 Bytedance Ltd. and/or its affiliates\n// SPDX-License-Identifier: MIT\n\nimport { PythonOutlined } from \"@ant-design/icons\";\nimport { motion } from \"framer-motion\";\nimport { LRUCache } from \"lru-cache\";\nimport { BookOpenText, FileText, PencilRuler, Search } from \"lucide-react\";\nimport { useTranslations } from \"next-intl\";\nimport { useTheme } from \"next-themes\";\nimport React, { useMemo } from \"react\";\nimport SyntaxHighlighter from \"react-syntax-highlighter\";\nimport { docco } from \"react-syntax-highlighter/dist/esm/styles/hljs\";\nimport { dark } from \"react-syntax-highlighter/dist/esm/styles/prism\";\n\nimport { FavIcon } from \"~/components/deer-flow/fav-icon\";\nimport Image from \"~/components/deer-flow/image\";\nimport { LoadingAnimation } from \"~/components/deer-flow/loading-animation\";\nimport { Markdown } from \"~/components/deer-flow/markdown\";\nimport { RainbowText } from \"~/components/deer-flow/rainbow-text\";\nimport { Tooltip } from \"~/components/deer-flow/tooltip\";\nimport {\n  Accordion,\n  AccordionContent,\n  AccordionItem,\n  AccordionTrigger,\n} from \"~/components/ui/accordion\";\nimport { Skeleton } from \"~/components/ui/skeleton\";\nimport { findMCPTool } from \"~/core/mcp\";\nimport type { ToolCallRuntime } from \"~/core/messages\";\nimport { useMessage, useStore } from \"~/core/store\";\nimport { parseJSON } from \"~/core/utils\";\nimport { cn } from \"~/lib/utils\";\n\n// Performance optimization constants\nconst MAX_ANIMATED_ITEMS = 10; // Only animate first 10 items\nconst ANIMATION_DELAY_MULTIPLIER = 0.05; // Reduced delay between animations\n\nexport function ResearchActivitiesBlock({\n  className,\n  researchId,\n}: {\n  className?: string;\n  researchId: string;\n}) {\n  const activityIds = useStore((state) =>\n    state.researchActivityIds.get(researchId),\n  )!;\n  const ongoing = useStore((state) => state.ongoingResearchId === researchId);\n  \n  return (\n    <>\n      <ul className={cn(\"flex flex-col py-4\", className)}>\n        {activityIds.map(\n          (activityId, i) => {\n            if (i === 0) return null;\n            \n            // Performance optimization: limit animations for large lists\n            const shouldAnimate = i < MAX_ANIMATED_ITEMS;\n            const animationDelay = shouldAnimate ? Math.min(i * ANIMATION_DELAY_MULTIPLIER, 0.5) : 0;\n            \n            return (\n              <motion.li\n                key={activityId}\n                style={{ transition: shouldAnimate ? \"all 0.3s ease-out\" : \"none\" }}\n                initial={shouldAnimate ? { opacity: 0, y: 24 } : { opacity: 1, y: 0 }}\n                animate={{ opacity: 1, y: 0 }}\n                transition={shouldAnimate ? {\n                  duration: 0.3, // Reduced from 0.4\n                  delay: animationDelay,\n                  ease: \"easeOut\",\n                } : undefined}\n              >\n                <ActivityMessage messageId={activityId} />\n                <ActivityListItem messageId={activityId} />\n                {i !== activityIds.length - 1 && <hr className=\"my-8\" />}\n              </motion.li>\n            );\n          },\n        )}\n      </ul>\n      {ongoing && <LoadingAnimation className=\"mx-4 my-12\" />}\n    </>\n  );\n}\n\nconst ActivityMessage = React.memo(({ messageId }: { messageId: string }) => {\n  const message = useMessage(messageId);\n  if (message?.agent && message.content) {\n    if (message.agent !== \"reporter\" && message.agent !== \"planner\") {\n      return (\n        <div className=\"px-4 py-2\">\n          <Markdown animated checkLinkCredibility>\n            {message.content}\n          </Markdown>\n        </div>\n      );\n    }\n  }\n  return null;\n});\nActivityMessage.displayName = \"ActivityMessage\";\n\nconst ActivityListItem = React.memo(({ messageId }: { messageId: string }) => {\n  const message = useMessage(messageId);\n  if (message) {\n    if (!message.isStreaming && message.toolCalls?.length) {\n      for (const toolCall of message.toolCalls) {\n        if (typeof toolCall.result === \"string\" && toolCall.result?.startsWith(\"Error\")) {\n          return null;\n        }\n        if (toolCall.name === \"web_search\") {\n          return <WebSearchToolCall key={toolCall.id} toolCall={toolCall} />;\n        } else if (toolCall.name === \"crawl_tool\") {\n          return <CrawlToolCall key={toolCall.id} toolCall={toolCall} />;\n        } else if (toolCall.name === \"python_repl_tool\") {\n          return <PythonToolCall key={toolCall.id} toolCall={toolCall} />;\n        } else if (toolCall.name === \"local_search_tool\") {\n          return <RetrieverToolCall key={toolCall.id} toolCall={toolCall} />;\n        } else {\n          return <MCPToolCall key={toolCall.id} toolCall={toolCall} />;\n        }\n      }\n    }\n  }\n  return null;\n});\nActivityListItem.displayName = \"ActivityListItem\";\n\nconst __pageCache = new LRUCache<string, string>({ max: 100 });\ntype SearchResult =\n  | {\n    type: \"page\";\n    title: string;\n    url: string;\n    content: string;\n  }\n  | {\n    type: \"image\";\n    image_url: string;\n    image_description: string;\n  };\n\nfunction WebSearchToolCall({ toolCall }: { toolCall: ToolCallRuntime }) {\n  const t = useTranslations(\"chat.research\");\n  const searching = useMemo(() => {\n    return toolCall.result === undefined;\n  }, [toolCall.result]);\n  const searchResults = useMemo<SearchResult[]>(() => {\n    let results: SearchResult[] | undefined = undefined;\n    let parseError = false;\n    \n    try {\n      if (toolCall.result) {\n        results = parseJSON(toolCall.result, []);\n      }\n    } catch (error) {\n      parseError = true;\n      console.warn(\"Failed to parse search results:\", error);\n      results = undefined;\n    }\n    \n    if (Array.isArray(results)) {\n      results.forEach((result) => {\n        if (result.type === \"page\") {\n          __pageCache.set(result.url, result.title);\n        }\n      });\n    } else {\n      // If parsing failed, still try to show something useful\n      results = [];\n    }\n    \n    return results;\n  }, [toolCall.result]);\n  const pageResults = useMemo(\n    () => searchResults?.filter((result) => result.type === \"page\"),\n    [searchResults],\n  );\n  const imageResults = useMemo(\n    () => searchResults?.filter((result) => result.type === \"image\"),\n    [searchResults],\n  );\n  return (\n    <section className=\"mt-4 pl-4\">\n      <div className=\"font-medium italic\">\n        <RainbowText\n          className=\"flex items-center\"\n          animated={searchResults === undefined}\n        >\n          <Search size={16} className={\"mr-2\"} />\n          <span>{t(\"searchingFor\")}&nbsp;</span>\n          <span className=\"max-w-[500px] overflow-hidden text-ellipsis whitespace-nowrap\">\n            {(toolCall.args as { query: string }).query}\n          </span>\n        </RainbowText>\n      </div>\n      <div className=\"pr-4\">\n        {pageResults && (\n          <ul className=\"mt-2 flex flex-wrap gap-4\">\n            {searching &&\n              [...Array(6)].map((_, i) => (\n                <li\n                  key={`search-result-${i}`}\n                  className=\"flex h-40 w-40 gap-2 rounded-md text-sm\"\n                >\n                  <Skeleton\n                    className=\"to-accent h-full w-full rounded-md bg-gradient-to-tl from-slate-400\"\n                    style={{ animationDelay: `${i * 0.2}s` }}\n                  />\n                </li>\n              ))}\n            {pageResults\n              .filter((result) => result.type === \"page\")\n              .slice(0, 20) // Limit displayed results for performance\n              .map((searchResult, i) => {\n                const shouldAnimate = i < 6; // Only animate first 6 results\n                return (\n                  <motion.li\n                    key={`search-result-${i}`}\n                    className=\"text-muted-foreground bg-accent flex max-w-40 gap-2 rounded-md px-2 py-1 text-sm\"\n                    initial={shouldAnimate ? { opacity: 0, y: 10 } : { opacity: 1, y: 0 }}\n                    animate={{ opacity: 1, y: 0 }}\n                    transition={shouldAnimate ? {\n                      duration: 0.15, // Reduced from 0.2\n                      delay: Math.min(i * 0.05, 0.3), // Cap delay at 0.3s\n                      ease: \"easeOut\",\n                    } : undefined}\n                  >\n                    <FavIcon\n                      className=\"mt-1\"\n                      url={searchResult.url}\n                      title={searchResult.title}\n                    />\n                    <a href={searchResult.url} target=\"_blank\">\n                      {searchResult.title}\n                    </a>\n                  </motion.li>\n                );\n              })}\n            {imageResults\n              .slice(0, 10) // Limit displayed images for performance\n              .map((searchResult, i) => {\n                const shouldAnimate = i < 4; // Only animate first 4 images\n                return (\n                  <motion.li\n                    key={`search-result-${i}`}\n                    initial={shouldAnimate ? { opacity: 0, y: 10 } : { opacity: 1, y: 0 }}\n                    animate={{ opacity: 1, y: 0 }}\n                    transition={shouldAnimate ? {\n                      duration: 0.15,\n                      delay: Math.min(i * 0.05, 0.2),\n                      ease: \"easeOut\",\n                    } : undefined}\n              >\n                <a\n                  className=\"flex flex-col gap-2 overflow-hidden rounded-md opacity-75 transition-opacity duration-300 hover:opacity-100\"\n                  href={searchResult.image_url}\n                  target=\"_blank\"\n                >\n                  <Image\n                    src={searchResult.image_url}\n                    alt={searchResult.image_description}\n                    className=\"bg-accent h-40 w-40 max-w-full rounded-md bg-cover bg-center bg-no-repeat\"\n                    imageClassName=\"hover:scale-110\"\n                    imageTransition\n                  />\n                </a>\n              </motion.li>\n                );\n              })}\n          </ul>\n        )}\n      </div>\n    </section>\n  );\n}\n\nfunction CrawlToolCall({ toolCall }: { toolCall: ToolCallRuntime }) {\n  const t = useTranslations(\"chat.research\");\n  const url = useMemo(\n    () => (toolCall.args as { url: string }).url,\n    [toolCall.args],\n  );\n  const title = useMemo(() => __pageCache.get(url), [url]);\n  return (\n    <section className=\"mt-4 pl-4\">\n      <div>\n        <RainbowText\n          className=\"flex items-center text-base font-medium italic\"\n          animated={toolCall.result === undefined}\n        >\n          <BookOpenText size={16} className={\"mr-2\"} />\n          <span>{t(\"reading\")}</span>\n        </RainbowText>\n      </div>\n      <ul className=\"mt-2 flex flex-wrap gap-4\">\n        <motion.li\n          className=\"text-muted-foreground bg-accent flex h-40 w-40 gap-2 rounded-md px-2 py-1 text-sm\"\n          initial={{ opacity: 0, y: 10 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{\n            duration: 0.15, // Reduced for better performance\n            ease: \"easeOut\",\n          }}\n        >\n          <FavIcon className=\"mt-1\" url={url} title={title} />\n          <a\n            className=\"h-full flex-grow overflow-hidden text-ellipsis whitespace-nowrap\"\n            href={url}\n            target=\"_blank\"\n          >\n            {title ?? url}\n          </a>\n        </motion.li>\n      </ul>\n    </section>\n  );\n}\n\nfunction RetrieverToolCall({ toolCall }: { toolCall: ToolCallRuntime }) {\n  const t = useTranslations(\"chat.research\");\n  const searching = useMemo(() => {\n    return toolCall.result === undefined;\n  }, [toolCall.result]);\n  const documents = useMemo<\n    Array<{ id: string; title: string; content: string }>\n  >(() => {\n    return toolCall.result ? parseJSON(toolCall.result, []) : [];\n  }, [toolCall.result]);\n  return (\n    <section className=\"mt-4 pl-4\">\n      <div className=\"font-medium italic\">\n        <RainbowText className=\"flex items-center\" animated={searching}>\n          <Search size={16} className={\"mr-2\"} />\n          <span>{t(\"retrievingDocuments\")}&nbsp;</span>\n          <span className=\"max-w-[500px] overflow-hidden text-ellipsis whitespace-nowrap\">\n            {(toolCall.args as { keywords: string }).keywords}\n          </span>\n        </RainbowText>\n      </div>\n      <div className=\"pr-4\">\n        {documents && (\n          <ul className=\"mt-2 flex flex-wrap gap-4\">\n            {searching &&\n              [...Array(2)].map((_, i) => (\n                <li\n                  key={`search-result-${i}`}\n                  className=\"flex h-40 w-40 gap-2 rounded-md text-sm\"\n                >\n                  <Skeleton\n                    className=\"to-accent h-full w-full rounded-md bg-gradient-to-tl from-slate-400\"\n                    style={{ animationDelay: `${i * 0.2}s` }}\n                  />\n                </li>\n              ))}\n            {documents?.map((doc, i) => {\n              const shouldAnimate = i < 4; // Only animate first 4 documents\n              return (\n                <motion.li\n                  key={`search-result-${i}`}\n                  className=\"text-muted-foreground bg-accent flex max-w-40 gap-2 rounded-md px-2 py-1 text-sm\"\n                  initial={shouldAnimate ? { opacity: 0, y: 10 } : { opacity: 1, y: 0 }}\n                  animate={{ opacity: 1, y: 0 }}\n                  transition={shouldAnimate ? {\n                    duration: 0.15,\n                    delay: Math.min(i * 0.05, 0.2),\n                    ease: \"easeOut\",\n                  } : undefined}\n                >\n                  <FileText size={32} />\n                  {doc.title} (chunk-{i},size-{doc.content.length})\n                </motion.li>\n              );\n            })}\n          </ul>\n        )}\n      </div>\n    </section>\n  );\n}\n\nfunction PythonToolCall({ toolCall }: { toolCall: ToolCallRuntime }) {\n  const t = useTranslations(\"chat.research\");\n  const code = useMemo<string | undefined>(() => {\n    return (toolCall.args as { code?: string }).code;\n  }, [toolCall.args]);\n  const { resolvedTheme } = useTheme();\n  return (\n    <section className=\"mt-4 pl-4\">\n      <div className=\"flex items-center\">\n        <PythonOutlined className={\"mr-2\"} />\n        <RainbowText\n          className=\"text-base font-medium italic\"\n          animated={toolCall.result === undefined}\n        >\n          {t(\"runningPythonCode\")}\n        </RainbowText>\n      </div>\n      <div>\n        <div className=\"bg-accent mt-2 max-h-[400px] max-w-[calc(100%-120px)] overflow-y-auto rounded-md p-2 text-sm\">\n          <SyntaxHighlighter\n            language=\"python\"\n            style={resolvedTheme === \"dark\" ? dark : docco}\n            customStyle={{\n              background: \"transparent\",\n              border: \"none\",\n              boxShadow: \"none\",\n            }}\n          >\n            {code?.trim() ?? \"\"}\n          </SyntaxHighlighter>\n        </div>\n      </div>\n      {toolCall.result && <PythonToolCallResult result={toolCall.result} />}\n    </section>\n  );\n}\n\nfunction PythonToolCallResult({ result }: { result: string }) {\n  const t = useTranslations(\"chat.research\");\n  const { resolvedTheme } = useTheme();\n  const hasError = useMemo(\n    () => result.includes(\"Error executing code:\\n\"),\n    [result],\n  );\n  const error = useMemo(() => {\n    if (hasError) {\n      const parts = result.split(\"```\\nError: \");\n      if (parts.length > 1) {\n        return parts[1]!.trim();\n      }\n    }\n    return null;\n  }, [result, hasError]);\n  const stdout = useMemo(() => {\n    if (!hasError) {\n      const parts = result.split(\"```\\nStdout: \");\n      if (parts.length > 1) {\n        return parts[1]!.trim();\n      }\n    }\n    return null;\n  }, [result, hasError]);\n  return (\n    <>\n      <div className=\"mt-4 font-medium italic\">\n        {hasError ? t(\"errorExecutingCode\") : t(\"executionOutput\")}\n      </div>\n      <div className=\"bg-accent mt-2 max-h-[400px] max-w-[calc(100%-120px)] overflow-y-auto rounded-md p-2 text-sm\">\n        <SyntaxHighlighter\n          language=\"plaintext\"\n          style={resolvedTheme === \"dark\" ? dark : docco}\n          customStyle={{\n            color: hasError ? \"red\" : \"inherit\",\n            background: \"transparent\",\n            border: \"none\",\n            boxShadow: \"none\",\n          }}\n        >\n          {error ?? stdout ?? \"(empty)\"}\n        </SyntaxHighlighter>\n      </div>\n    </>\n  );\n}\n\nfunction MCPToolCall({ toolCall }: { toolCall: ToolCallRuntime }) {\n  const tool = useMemo(() => findMCPTool(toolCall.name), [toolCall.name]);\n  const { resolvedTheme } = useTheme();\n  return (\n    <section className=\"mt-4 pl-4\">\n      <div className=\"w-fit overflow-y-auto rounded-md py-0\">\n        <Accordion type=\"single\" collapsible className=\"w-full\">\n          <AccordionItem value=\"item-1\">\n            <AccordionTrigger>\n              <Tooltip title={tool?.description}>\n                <div className=\"flex items-center font-medium italic\">\n                  <PencilRuler size={16} className={\"mr-2\"} />\n                  <RainbowText\n                    className=\"pr-0.5 text-base font-medium italic\"\n                    animated={toolCall.result === undefined}\n                  >\n                    Running {toolCall.name ? toolCall.name + \"()\" : \"MCP tool\"}\n                  </RainbowText>\n                </div>\n              </Tooltip>\n            </AccordionTrigger>\n            <AccordionContent>\n              {toolCall.result && (\n                <div className=\"bg-accent max-h-[400px] max-w-[560px] overflow-y-auto rounded-md text-sm\">\n                  <SyntaxHighlighter\n                    language=\"json\"\n                    style={resolvedTheme === \"dark\" ? dark : docco}\n                    customStyle={{\n                      background: \"transparent\",\n                      border: \"none\",\n                      boxShadow: \"none\",\n                    }}\n                  >\n                    {toolCall.result.trim()}\n                  </SyntaxHighlighter>\n                </div>\n              )}\n            </AccordionContent>\n          </AccordionItem>\n        </Accordion>\n      </div>\n    </section>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 5127, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/deer/web/src/components/editor/math-serializer.ts"],"sourcesContent":["// Copyright (c) 2025 Bytedance Ltd. and/or its affiliates\n// SPDX-License-Identifier: MIT\n\nimport { Mathematics } from \"novel\";\n\n/**\n * Extended Mathematics extension with markdown serialization support\n * Handles both inline math ($...$) and block/display math ($$...$$)\n */\nexport const MathematicsWithMarkdown = Mathematics.extend({\n  addStorage() {\n    return {\n      markdown: {\n        serialize(state: any, node: any) {\n          const latex = node.attrs?.latex || \"\";\n          const isBlock = node.attrs?.display === true;\n          \n          if (isBlock) {\n            // Block/display math: $$...$$\n            state.write(\"$$\");\n            state.write(latex);\n            state.write(\"$$\");\n            state.closeBlock(node);\n          } else {\n            // Inline math: $...$\n            state.write(\"$\");\n            state.write(latex);\n            state.write(\"$\");\n          }\n        },\n      },\n    };\n  },\n});\n"],"names":[],"mappings":"AAAA,0DAA0D;AAC1D,+BAA+B;;;;AAE/B;;AAMO,MAAM,0BAA0B,8WAAA,CAAA,cAAW,CAAC,MAAM,CAAC;IACxD;QACE,OAAO;YACL,UAAU;gBACR,WAAU,KAAU,EAAE,IAAS;wBACf,aACE;oBADhB,MAAM,QAAQ,EAAA,cAAA,KAAK,KAAK,cAAV,kCAAA,YAAY,KAAK,KAAI;oBACnC,MAAM,UAAU,EAAA,eAAA,KAAK,KAAK,cAAV,mCAAA,aAAY,OAAO,MAAK;oBAExC,IAAI,SAAS;wBACX,8BAA8B;wBAC9B,MAAM,KAAK,CAAC;wBACZ,MAAM,KAAK,CAAC;wBACZ,MAAM,KAAK,CAAC;wBACZ,MAAM,UAAU,CAAC;oBACnB,OAAO;wBACL,qBAAqB;wBACrB,MAAM,KAAK,CAAC;wBACZ,MAAM,KAAK,CAAC;wBACZ,MAAM,KAAK,CAAC;oBACd;gBACF;YACF;QACF;IACF;AACF","debugId":null}},
    {"offset": {"line": 5168, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/deer/web/src/components/editor/extensions.tsx"],"sourcesContent":["// Copyright (c) 2025 Bytedance Ltd. and/or its affiliates\n// SPDX-License-Identifier: MIT\n\nimport {\n  AIHighlight,\n  CharacterCount,\n  CodeBlockLowlight,\n  Color,\n  CustomKeymap,\n  GlobalDragHandle,\n  HighlightExtension,\n  HorizontalRule,\n  Placeholder,\n  StarterKit,\n  TaskItem,\n  TaskList,\n  TextStyle,\n  TiptapImage,\n  TiptapLink,\n  TiptapUnderline,\n  Twitter,\n  UpdatedImage,\n  UploadImagesPlugin,\n  Youtube,\n} from \"novel\";\nimport { Markdown } from \"tiptap-markdown\";\nimport { Table } from \"@tiptap/extension-table\";\nimport { TableHeader } from \"@tiptap/extension-table-header\";\nimport { TableRow } from \"@tiptap/extension-table-row\";\nimport { TableCell } from \"@tiptap/extension-table-cell\";\nimport { cx } from \"class-variance-authority\";\nimport { common, createLowlight } from \"lowlight\";\nimport { MathematicsWithMarkdown } from \"./math-serializer\";\n\n//TODO I am using cx here to get tailwind autocomplete working, idk if someone else can write a regex to just capture the class key in objects\nconst aiHighlight = AIHighlight;\n//You can overwrite the placeholder with your own configuration\nconst placeholder = Placeholder;\nconst tiptapLink = TiptapLink.configure({\n  HTMLAttributes: {\n    class: cx(\n      \"text-muted-foreground underline underline-offset-[3px] hover:text-primary transition-colors cursor-pointer\",\n    ),\n  },\n});\n\nconst tiptapImage = TiptapImage.extend({\n  addProseMirrorPlugins() {\n    return [\n      UploadImagesPlugin({\n        imageClass: cx(\"opacity-40 rounded-lg border border-stone-200\"),\n      }),\n    ];\n  },\n}).configure({\n  allowBase64: true,\n  HTMLAttributes: {\n    class: cx(\"rounded-lg border border-muted\"),\n  },\n});\n\nconst updatedImage = UpdatedImage.configure({\n  HTMLAttributes: {\n    class: cx(\"rounded-lg border border-muted\"),\n  },\n});\n\nconst taskList = TaskList.configure({\n  HTMLAttributes: {\n    class: cx(\"not-prose pl-2 \"),\n  },\n});\nconst taskItem = TaskItem.configure({\n  HTMLAttributes: {\n    class: cx(\"flex gap-2 items-start my-4\"),\n  },\n  nested: true,\n});\n\nconst horizontalRule = HorizontalRule.configure({\n  HTMLAttributes: {},\n});\n\nconst starterKit = StarterKit.configure({\n  bulletList: {\n    HTMLAttributes: {},\n  },\n  orderedList: {\n    HTMLAttributes: {\n      class: cx(\"list-decimal list-outside leading-3 -mt-2\"),\n    },\n  },\n  listItem: {\n    HTMLAttributes: {},\n  },\n  blockquote: {\n    HTMLAttributes: {\n      class: cx(\"border-l-4 border-primary\"),\n    },\n  },\n  codeBlock: false,\n  code: {\n    HTMLAttributes: {\n      spellcheck: \"false\",\n    },\n  },\n  horizontalRule: false,\n  dropcursor: {\n    color: \"#DBEAFE\",\n    width: 4,\n  },\n  gapcursor: false,\n});\n\nconst codeBlockLowlight = CodeBlockLowlight.configure({\n  // configure lowlight: common /  all / use highlightJS in case there is a need to specify certain language grammars only\n  // common: covers 37 language grammars which should be good enough in most cases\n  lowlight: createLowlight(common),\n});\n\nconst youtube = Youtube.configure({\n  HTMLAttributes: {\n    class: cx(\"rounded-lg border border-muted\"),\n  },\n  inline: false,\n});\n\nconst twitter = Twitter.configure({\n  HTMLAttributes: {\n    class: cx(\"not-prose\"),\n  },\n  inline: false,\n});\n\nconst mathematics = MathematicsWithMarkdown.configure({\n  HTMLAttributes: {\n    class: cx(\"text-foreground rounded p-1 hover:bg-accent cursor-pointer\"),\n  },\n  katexOptions: {\n    throwOnError: false,\n  },\n});\n\nconst characterCount = CharacterCount.configure();\n\nconst table = Table.configure();\nconst tableRow = TableRow.configure();\nconst tableCell = TableCell.configure();\nconst tableHeader = TableHeader.configure();\n\nconst markdownExtension = Markdown.configure({\n  html: true,\n  tightLists: true,\n  tightListClass: \"tight\",\n  bulletListMarker: \"-\",\n  linkify: false,\n  breaks: false,\n  transformPastedText: false,\n  transformCopiedText: false,\n});\n\nconst globalDragHandle = GlobalDragHandle.configure({});\n\nexport const defaultExtensions = [\n  starterKit,\n  placeholder,\n  tiptapLink,\n  updatedImage,\n  taskList,\n  taskItem,\n  table,\n  tableRow,\n  tableCell,\n  tableHeader,\n  horizontalRule,\n  aiHighlight,\n  codeBlockLowlight,\n  youtube,\n  twitter,\n  mathematics,\n  characterCount,\n  TiptapUnderline,\n  markdownExtension,\n  HighlightExtension,\n  TextStyle,\n  Color,\n  CustomKeymap,\n  globalDragHandle,\n];\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 5352, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/deer/web/src/components/ui/popover.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\n\nimport { cn } from \"~/lib/utils\"\n\nfunction Popover({\n  ...props\n}: React.ComponentProps<typeof PopoverPrimitive.Root>) {\n  return <PopoverPrimitive.Root data-slot=\"popover\" {...props} />\n}\n\nfunction PopoverTrigger({\n  ...props\n}: React.ComponentProps<typeof PopoverPrimitive.Trigger>) {\n  return <PopoverPrimitive.Trigger data-slot=\"popover-trigger\" {...props} />\n}\n\nfunction PopoverContent({\n  className,\n  align = \"center\",\n  sideOffset = 4,\n  ...props\n}: React.ComponentProps<typeof PopoverPrimitive.Content>) {\n  return (\n    <PopoverPrimitive.Portal>\n      <PopoverPrimitive.Content\n        data-slot=\"popover-content\"\n        align={align}\n        sideOffset={sideOffset}\n        className={cn(\n          \"bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden\",\n          className\n        )}\n        {...props}\n      />\n    </PopoverPrimitive.Portal>\n  )\n}\n\nfunction PopoverAnchor({\n  ...props\n}: React.ComponentProps<typeof PopoverPrimitive.Anchor>) {\n  return <PopoverPrimitive.Anchor data-slot=\"popover-anchor\" {...props} />\n}\n\nexport { Popover, PopoverTrigger, PopoverContent, PopoverAnchor }\n"],"names":[],"mappings":";;;;;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,QAAQ,KAEoC;QAFpC,EACf,GAAG,OACgD,GAFpC;IAGf,qBAAO,sYAAC,uXAAA,CAAA,OAAqB;QAAC,aAAU;QAAW,GAAG,KAAK;;;;;;AAC7D;KAJS;AAMT,SAAS,eAAe,KAEgC;QAFhC,EACtB,GAAG,OACmD,GAFhC;IAGtB,qBAAO,sYAAC,uXAAA,CAAA,UAAwB;QAAC,aAAU;QAAmB,GAAG,KAAK;;;;;;AACxE;MAJS;AAMT,SAAS,eAAe,KAKgC;QALhC,EACtB,SAAS,EACT,QAAQ,QAAQ,EAChB,aAAa,CAAC,EACd,GAAG,OACmD,GALhC;IAMtB,qBACE,sYAAC,uXAAA,CAAA,SAAuB;kBACtB,cAAA,sYAAC,uXAAA,CAAA,UAAwB;YACvB,aAAU;YACV,OAAO;YACP,YAAY;YACZ,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,keACA;YAED,GAAG,KAAK;;;;;;;;;;;AAIjB;MApBS;AAsBT,SAAS,cAAc,KAEgC;QAFhC,EACrB,GAAG,OACkD,GAFhC;IAGrB,qBAAO,sYAAC,uXAAA,CAAA,SAAuB;QAAC,aAAU;QAAkB,GAAG,KAAK;;;;;;AACtE;MAJS","debugId":null}},
    {"offset": {"line": 5437, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/deer/web/src/components/editor/selectors/color-selector.tsx"],"sourcesContent":["// Copyright (c) 2025 Bytedance Ltd. and/or its affiliates\n// SPDX-License-Identifier: MIT\n\nimport { Check, ChevronDown } from \"lucide-react\";\nimport { EditorBubbleItem, useEditor } from \"novel\";\n\nimport { Button } from \"../../ui/button\";\nimport { Popover, PopoverContent, PopoverTrigger } from \"../../ui/popover\";\nexport interface BubbleColorMenuItem {\n  name: string;\n  color: string;\n}\n\nconst TEXT_COLORS: BubbleColorMenuItem[] = [\n  {\n    name: \"Default\",\n    color: \"var(--novel-black)\",\n  },\n  {\n    name: \"Purple\",\n    color: \"#9333EA\",\n  },\n  {\n    name: \"Red\",\n    color: \"#E00000\",\n  },\n  {\n    name: \"Yellow\",\n    color: \"#EAB308\",\n  },\n  {\n    name: \"Blue\",\n    color: \"#2563EB\",\n  },\n  {\n    name: \"Green\",\n    color: \"#008A00\",\n  },\n  {\n    name: \"Orange\",\n    color: \"#FFA500\",\n  },\n  {\n    name: \"Pink\",\n    color: \"#BA4081\",\n  },\n  {\n    name: \"Gray\",\n    color: \"#A8A29E\",\n  },\n];\n\nconst HIGHLIGHT_COLORS: BubbleColorMenuItem[] = [\n  {\n    name: \"Default\",\n    color: \"var(--novel-highlight-default)\",\n  },\n  {\n    name: \"Purple\",\n    color: \"var(--novel-highlight-purple)\",\n  },\n  {\n    name: \"Red\",\n    color: \"var(--novel-highlight-red)\",\n  },\n  {\n    name: \"Yellow\",\n    color: \"var(--novel-highlight-yellow)\",\n  },\n  {\n    name: \"Blue\",\n    color: \"var(--novel-highlight-blue)\",\n  },\n  {\n    name: \"Green\",\n    color: \"var(--novel-highlight-green)\",\n  },\n  {\n    name: \"Orange\",\n    color: \"var(--novel-highlight-orange)\",\n  },\n  {\n    name: \"Pink\",\n    color: \"var(--novel-highlight-pink)\",\n  },\n  {\n    name: \"Gray\",\n    color: \"var(--novel-highlight-gray)\",\n  },\n];\n\ninterface ColorSelectorProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n}\n\nexport const ColorSelector = ({ open, onOpenChange }: ColorSelectorProps) => {\n  const { editor } = useEditor();\n\n  if (!editor) return null;\n  const activeColorItem = TEXT_COLORS.find(({ color }) =>\n    editor.isActive(\"textStyle\", { color }),\n  );\n\n  const activeHighlightItem = HIGHLIGHT_COLORS.find(({ color }) =>\n    editor.isActive(\"highlight\", { color }),\n  );\n\n  return (\n    <Popover modal={true} open={open} onOpenChange={onOpenChange}>\n      <PopoverTrigger asChild>\n        <Button size=\"sm\" className=\"gap-2 rounded-none\" variant=\"ghost\">\n          <span\n            className=\"rounded-sm px-1\"\n            style={{\n              color: activeColorItem?.color,\n              backgroundColor: activeHighlightItem?.color,\n            }}\n          >\n            A\n          </span>\n          <ChevronDown className=\"h-4 w-4\" />\n        </Button>\n      </PopoverTrigger>\n\n      <PopoverContent\n        sideOffset={5}\n        className=\"my-1 flex max-h-80 w-48 flex-col overflow-hidden overflow-y-auto rounded border p-1 shadow-xl\"\n        align=\"start\"\n      >\n        <div className=\"flex flex-col\">\n          <div className=\"text-muted-foreground my-1 px-2 text-sm font-semibold\">\n            Color\n          </div>\n          {TEXT_COLORS.map(({ name, color }) => (\n            <EditorBubbleItem\n              key={name}\n              onSelect={() => {\n                editor.commands.unsetColor();\n                name !== \"Default\" &&\n                  editor\n                    .chain()\n                    .focus()\n                    .setColor(color || \"\")\n                    .run();\n                onOpenChange(false);\n              }}\n              className=\"hover:bg-accent flex cursor-pointer items-center justify-between px-2 py-1 text-sm\"\n            >\n              <div className=\"flex items-center gap-2\">\n                <div\n                  className=\"rounded-sm border px-2 py-px font-medium\"\n                  style={{ color }}\n                >\n                  A\n                </div>\n                <span>{name}</span>\n              </div>\n            </EditorBubbleItem>\n          ))}\n        </div>\n        <div>\n          <div className=\"text-muted-foreground my-1 px-2 text-sm font-semibold\">\n            Background\n          </div>\n          {HIGHLIGHT_COLORS.map(({ name, color }) => (\n            <EditorBubbleItem\n              key={name}\n              onSelect={() => {\n                editor.commands.unsetHighlight();\n                name !== \"Default\" &&\n                  editor.chain().focus().setHighlight({ color }).run();\n                onOpenChange(false);\n              }}\n              className=\"hover:bg-accent flex cursor-pointer items-center justify-between px-2 py-1 text-sm\"\n            >\n              <div className=\"flex items-center gap-2\">\n                <div\n                  className=\"rounded-sm border px-2 py-px font-medium\"\n                  style={{ backgroundColor: color }}\n                >\n                  A\n                </div>\n                <span>{name}</span>\n              </div>\n              {editor.isActive(\"highlight\", { color }) && (\n                <Check className=\"h-4 w-4\" />\n              )}\n            </EditorBubbleItem>\n          ))}\n        </div>\n      </PopoverContent>\n    </Popover>\n  );\n};\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 5755, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/deer/web/src/components/editor/selectors/link-selector.tsx"],"sourcesContent":["// Copyright (c) 2025 Bytedance Ltd. and/or its affiliates\n// SPDX-License-Identifier: MIT\n\nimport { Button } from \"../../ui/button\";\nimport { PopoverContent } from \"../../ui/popover\";\nimport { cn } from \"../../../lib/utils\";\nimport { Popover, PopoverTrigger } from \"@radix-ui/react-popover\";\nimport { Check, Trash } from \"lucide-react\";\nimport { useEditor } from \"novel\";\nimport { useEffect, useRef } from \"react\";\n\nexport function isValidUrl(url: string) {\n  try {\n    new URL(url);\n    return true;\n  } catch (_e) {\n    return false;\n  }\n}\nexport function getUrlFromString(str: string) {\n  if (isValidUrl(str)) return str;\n  try {\n    if (str.includes(\".\") && !str.includes(\" \")) {\n      return new URL(`https://${str}`).toString();\n    }\n  } catch (_e) {\n    return null;\n  }\n}\ninterface LinkSelectorProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n}\n\nexport const LinkSelector = ({ open, onOpenChange }: LinkSelectorProps) => {\n  const inputRef = useRef<HTMLInputElement>(null);\n  const { editor } = useEditor();\n\n  // Autofocus on input by default\n  useEffect(() => {\n    inputRef.current?.focus();\n  });\n  if (!editor) return null;\n\n  return (\n    <Popover modal={true} open={open} onOpenChange={onOpenChange}>\n      <PopoverTrigger asChild>\n        <Button\n          size=\"sm\"\n          variant=\"ghost\"\n          className=\"gap-2 rounded-none border-none\"\n        >\n          <p className=\"text-base\"></p>\n          <p\n            className={cn(\"underline decoration-stone-400 underline-offset-4\", {\n              \"text-blue-500\": editor.isActive(\"link\"),\n            })}\n          >\n            Link\n          </p>\n        </Button>\n      </PopoverTrigger>\n      <PopoverContent align=\"start\" className=\"w-60 p-0\" sideOffset={10}>\n        <form\n          onSubmit={(e) => {\n            const target = e.currentTarget as HTMLFormElement;\n            e.preventDefault();\n            const input = target[0] as HTMLInputElement;\n            const url = getUrlFromString(input.value);\n            if (url) {\n              editor.chain().focus().setLink({ href: url }).run();\n              onOpenChange(false);\n            }\n          }}\n          className=\"flex p-1\"\n        >\n          <input\n            ref={inputRef}\n            type=\"text\"\n            placeholder=\"Paste a link\"\n            className=\"bg-background flex-1 p-1 text-sm outline-none\"\n            defaultValue={editor.getAttributes(\"link\").href || \"\"}\n          />\n          {editor.getAttributes(\"link\").href ? (\n            <Button\n              size=\"icon\"\n              variant=\"outline\"\n              type=\"button\"\n              className=\"flex h-8 items-center rounded-sm p-1 text-red-600 transition-all hover:bg-red-100 dark:hover:bg-red-800\"\n              onClick={() => {\n                editor.chain().focus().unsetLink().run();\n                if (inputRef.current) inputRef.current.value = \"\";\n                onOpenChange(false);\n              }}\n            >\n              <Trash className=\"h-4 w-4\" />\n            </Button>\n          ) : (\n            <Button size=\"icon\" className=\"h-8\">\n              <Check className=\"h-4 w-4\" />\n            </Button>\n          )}\n        </form>\n      </PopoverContent>\n    </Popover>\n  );\n};\n"],"names":[],"mappings":"AAAA,0DAA0D;AAC1D,+BAA+B;;;;;;;AAE/B;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;;;;;;;;;;AAEO,SAAS,WAAW,GAAW;IACpC,IAAI;QACF,IAAI,IAAI;QACR,OAAO;IACT,EAAE,OAAO,IAAI;QACX,OAAO;IACT;AACF;AACO,SAAS,iBAAiB,GAAW;IAC1C,IAAI,WAAW,MAAM,OAAO;IAC5B,IAAI;QACF,IAAI,IAAI,QAAQ,CAAC,QAAQ,CAAC,IAAI,QAAQ,CAAC,MAAM;YAC3C,OAAO,IAAI,IAAI,AAAC,WAAc,OAAJ,MAAO,QAAQ;QAC3C;IACF,EAAE,OAAO,IAAI;QACX,OAAO;IACT;AACF;AAMO,MAAM,eAAe;QAAC,EAAE,IAAI,EAAE,YAAY,EAAqB;;IACpE,MAAM,WAAW,CAAA,GAAA,sWAAA,CAAA,SAAM,AAAD,EAAoB;IAC1C,MAAM,EAAE,MAAM,EAAE,GAAG,CAAA,GAAA,0aAAA,CAAA,YAAS,AAAD;IAE3B,gCAAgC;IAChC,CAAA,GAAA,sWAAA,CAAA,YAAS,AAAD;kCAAE;gBACR;aAAA,oBAAA,SAAS,OAAO,cAAhB,wCAAA,kBAAkB,KAAK;QACzB;;IACA,IAAI,CAAC,QAAQ,OAAO;IAEpB,qBACE,sYAAC,uXAAA,CAAA,UAAO;QAAC,OAAO;QAAM,MAAM;QAAM,cAAc;;0BAC9C,sYAAC,uXAAA,CAAA,iBAAc;gBAAC,OAAO;0BACrB,cAAA,sYAAC,qIAAA,CAAA,SAAM;oBACL,MAAK;oBACL,SAAQ;oBACR,WAAU;;sCAEV,sYAAC;4BAAE,WAAU;sCAAY;;;;;;sCACzB,sYAAC;4BACC,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,qDAAqD;gCACjE,iBAAiB,OAAO,QAAQ,CAAC;4BACnC;sCACD;;;;;;;;;;;;;;;;;0BAKL,sYAAC,sIAAA,CAAA,iBAAc;gBAAC,OAAM;gBAAQ,WAAU;gBAAW,YAAY;0BAC7D,cAAA,sYAAC;oBACC,UAAU,CAAC;wBACT,MAAM,SAAS,EAAE,aAAa;wBAC9B,EAAE,cAAc;wBAChB,MAAM,QAAQ,MAAM,CAAC,EAAE;wBACvB,MAAM,MAAM,iBAAiB,MAAM,KAAK;wBACxC,IAAI,KAAK;4BACP,OAAO,KAAK,GAAG,KAAK,GAAG,OAAO,CAAC;gCAAE,MAAM;4BAAI,GAAG,GAAG;4BACjD,aAAa;wBACf;oBACF;oBACA,WAAU;;sCAEV,sYAAC;4BACC,KAAK;4BACL,MAAK;4BACL,aAAY;4BACZ,WAAU;4BACV,cAAc,OAAO,aAAa,CAAC,QAAQ,IAAI,IAAI;;;;;;wBAEpD,OAAO,aAAa,CAAC,QAAQ,IAAI,iBAChC,sYAAC,qIAAA,CAAA,SAAM;4BACL,MAAK;4BACL,SAAQ;4BACR,MAAK;4BACL,WAAU;4BACV,SAAS;gCACP,OAAO,KAAK,GAAG,KAAK,GAAG,SAAS,GAAG,GAAG;gCACtC,IAAI,SAAS,OAAO,EAAE,SAAS,OAAO,CAAC,KAAK,GAAG;gCAC/C,aAAa;4BACf;sCAEA,cAAA,sYAAC,2RAAA,CAAA,QAAK;gCAAC,WAAU;;;;;;;;;;qFAGnB,sYAAC,qIAAA,CAAA,SAAM;4BAAC,MAAK;4BAAO,WAAU;sCAC5B,cAAA,sYAAC,2RAAA,CAAA,QAAK;gCAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAO/B;GAxEa;;QAEQ,0aAAA,CAAA,YAAS;;;KAFjB","debugId":null}},
    {"offset": {"line": 5953, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/deer/web/src/components/editor/selectors/math-selector.tsx"],"sourcesContent":["// Copyright (c) 2025 Bytedance Ltd. and/or its affiliates\n// SPDX-License-Identifier: MIT\n\nimport { Button } from \"../../ui/button\";\nimport { cn } from \"../../../lib/utils\";\nimport { SigmaIcon } from \"lucide-react\";\nimport { useEditor } from \"novel\";\n\nexport const MathSelector = () => {\n  const { editor } = useEditor();\n\n  if (!editor) return null;\n\n  return (\n    <Button\n      variant=\"ghost\"\n      size=\"sm\"\n      className=\"w-12 rounded-none\"\n      onClick={(evt) => {\n        if (editor.isActive(\"math\")) {\n          editor.chain().focus().unsetLatex().run();\n        } else {\n          const { from, to } = editor.state.selection;\n          const latex = editor.state.doc.textBetween(from, to);\n\n          if (!latex) return;\n\n          editor.chain().focus().setLatex({ latex }).run();\n        }\n      }}\n    >\n      <SigmaIcon\n        className={cn(\"size-4\", { \"text-blue-500\": editor.isActive(\"math\") })}\n        strokeWidth={2.3}\n      />\n    </Button>\n  );\n};\n"],"names":[],"mappings":"AAAA,0DAA0D;AAC1D,+BAA+B;;;;;AAE/B;AACA;AACA;AACA;;;;;;;AAEO,MAAM,eAAe;;IAC1B,MAAM,EAAE,MAAM,EAAE,GAAG,CAAA,GAAA,0aAAA,CAAA,YAAS,AAAD;IAE3B,IAAI,CAAC,QAAQ,OAAO;IAEpB,qBACE,sYAAC,qIAAA,CAAA,SAAM;QACL,SAAQ;QACR,MAAK;QACL,WAAU;QACV,SAAS,CAAC;YACR,IAAI,OAAO,QAAQ,CAAC,SAAS;gBAC3B,OAAO,KAAK,GAAG,KAAK,GAAG,UAAU,GAAG,GAAG;YACzC,OAAO;gBACL,MAAM,EAAE,IAAI,EAAE,EAAE,EAAE,GAAG,OAAO,KAAK,CAAC,SAAS;gBAC3C,MAAM,QAAQ,OAAO,KAAK,CAAC,GAAG,CAAC,WAAW,CAAC,MAAM;gBAEjD,IAAI,CAAC,OAAO;gBAEZ,OAAO,KAAK,GAAG,KAAK,GAAG,QAAQ,CAAC;oBAAE;gBAAM,GAAG,GAAG;YAChD;QACF;kBAEA,cAAA,sYAAC,+RAAA,CAAA,YAAS;YACR,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,UAAU;gBAAE,iBAAiB,OAAO,QAAQ,CAAC;YAAQ;YACnE,aAAa;;;;;;;;;;;AAIrB;GA7Ba;;QACQ,0aAAA,CAAA,YAAS;;;KADjB","debugId":null}},
    {"offset": {"line": 6022, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/deer/web/src/components/editor/selectors/node-selector.tsx"],"sourcesContent":["// Copyright (c) 2025 Bytedance Ltd. and/or its affiliates\n// SPDX-License-Identifier: MIT\n\nimport {\n  Check,\n  CheckSquare,\n  ChevronDown,\n  Code,\n  Heading1,\n  Heading2,\n  Heading3,\n  ListOrdered,\n  type LucideIcon,\n  TextIcon,\n  TextQuote,\n} from \"lucide-react\";\nimport { EditorBubbleItem, useEditor } from \"novel\";\n\nimport { Button } from \"../../ui/button\";\nimport { PopoverContent, PopoverTrigger } from \"../../ui/popover\";\nimport { Popover } from \"@radix-ui/react-popover\";\n\nexport type SelectorItem = {\n  name: string;\n  icon: LucideIcon;\n  command: (\n    editor: NonNullable<ReturnType<typeof useEditor>[\"editor\"]>,\n  ) => void;\n  isActive: (\n    editor: NonNullable<ReturnType<typeof useEditor>[\"editor\"]>,\n  ) => boolean;\n};\n\nconst items: SelectorItem[] = [\n  {\n    name: \"Text\",\n    icon: TextIcon,\n    command: (editor) => editor.chain().focus().clearNodes().run(),\n    // I feel like there has to be a more efficient way to do this  feel free to PR if you know how!\n    isActive: (editor) =>\n      editor.isActive(\"paragraph\") &&\n      !editor.isActive(\"bulletList\") &&\n      !editor.isActive(\"orderedList\"),\n  },\n  {\n    name: \"Heading 1\",\n    icon: Heading1,\n    command: (editor) =>\n      editor.chain().focus().clearNodes().toggleHeading({ level: 1 }).run(),\n    isActive: (editor) => editor.isActive(\"heading\", { level: 1 }),\n  },\n  {\n    name: \"Heading 2\",\n    icon: Heading2,\n    command: (editor) =>\n      editor.chain().focus().clearNodes().toggleHeading({ level: 2 }).run(),\n    isActive: (editor) => editor.isActive(\"heading\", { level: 2 }),\n  },\n  {\n    name: \"Heading 3\",\n    icon: Heading3,\n    command: (editor) =>\n      editor.chain().focus().clearNodes().toggleHeading({ level: 3 }).run(),\n    isActive: (editor) => editor.isActive(\"heading\", { level: 3 }),\n  },\n  {\n    name: \"To-do List\",\n    icon: CheckSquare,\n    command: (editor) =>\n      editor.chain().focus().clearNodes().toggleTaskList().run(),\n    isActive: (editor) => editor.isActive(\"taskItem\"),\n  },\n  {\n    name: \"Bullet List\",\n    icon: ListOrdered,\n    command: (editor) =>\n      editor.chain().focus().clearNodes().toggleBulletList().run(),\n    isActive: (editor) => editor.isActive(\"bulletList\"),\n  },\n  {\n    name: \"Numbered List\",\n    icon: ListOrdered,\n    command: (editor) =>\n      editor.chain().focus().clearNodes().toggleOrderedList().run(),\n    isActive: (editor) => editor.isActive(\"orderedList\"),\n  },\n  {\n    name: \"Quote\",\n    icon: TextQuote,\n    command: (editor) =>\n      editor.chain().focus().clearNodes().toggleBlockquote().run(),\n    isActive: (editor) => editor.isActive(\"blockquote\"),\n  },\n  {\n    name: \"Code\",\n    icon: Code,\n    command: (editor) =>\n      editor.chain().focus().clearNodes().toggleCodeBlock().run(),\n    isActive: (editor) => editor.isActive(\"codeBlock\"),\n  },\n];\ninterface NodeSelectorProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n}\n\nexport const NodeSelector = ({ open, onOpenChange }: NodeSelectorProps) => {\n  const { editor } = useEditor();\n  if (!editor) return null;\n  const activeItem = items.filter((item) => item.isActive(editor)).pop() ?? {\n    name: \"Multiple\",\n  };\n\n  return (\n    <Popover modal={true} open={open} onOpenChange={onOpenChange}>\n      <PopoverTrigger\n        asChild\n        className=\"hover:bg-accent gap-2 rounded-none border-none focus:ring-0\"\n      >\n        <Button size=\"sm\" variant=\"ghost\" className=\"gap-2\">\n          <span className=\"text-sm whitespace-nowrap\">{activeItem.name}</span>\n          <ChevronDown className=\"h-4 w-4\" />\n        </Button>\n      </PopoverTrigger>\n      <PopoverContent sideOffset={5} align=\"start\" className=\"w-48 p-1\">\n        {items.map((item) => (\n          <EditorBubbleItem\n            key={item.name}\n            onSelect={(editor) => {\n              item.command(editor);\n              onOpenChange(false);\n            }}\n            className=\"hover:bg-accent flex cursor-pointer items-center justify-between rounded-sm px-2 py-1 text-sm\"\n          >\n            <div className=\"flex items-center space-x-2\">\n              <div className=\"rounded-sm border p-1\">\n                <item.icon className=\"h-3 w-3\" />\n              </div>\n              <span>{item.name}</span>\n            </div>\n            {activeItem.name === item.name && <Check className=\"h-4 w-4\" />}\n          </EditorBubbleItem>\n        ))}\n      </PopoverContent>\n    </Popover>\n  );\n};\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 6250, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/deer/web/src/components/ui/separator.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\n\nimport { cn } from \"~/lib/utils\"\n\nfunction Separator({\n  className,\n  orientation = \"horizontal\",\n  decorative = true,\n  ...props\n}: React.ComponentProps<typeof SeparatorPrimitive.Root>) {\n  return (\n    <SeparatorPrimitive.Root\n      data-slot=\"separator-root\"\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Separator }\n"],"names":[],"mappings":";;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,UAAU,KAKoC;QALpC,EACjB,SAAS,EACT,cAAc,YAAY,EAC1B,aAAa,IAAI,EACjB,GAAG,OACkD,GALpC;IAMjB,qBACE,sYAAC,yXAAA,CAAA,OAAuB;QACtB,aAAU;QACV,YAAY;QACZ,aAAa;QACb,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,kKACA;QAED,GAAG,KAAK;;;;;;AAGf;KAlBS","debugId":null}},
    {"offset": {"line": 6287, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/deer/web/src/components/ui/icons/magic.tsx"],"sourcesContent":["export default function Magic({ className }: { className: string }) {\n  return (\n    <svg\n      width=\"469\"\n      height=\"469\"\n      viewBox=\"0 0 469 469\"\n      fill=\"none\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      shapeRendering=\"geometricPrecision\"\n      stroke=\"currentColor\"\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n      strokeWidth=\"1.5\"\n      className={className}\n    >\n      <title>Magic AI icon</title>\n\n      <path\n        d=\"M237.092 62.3004L266.754 71.4198C267.156 71.5285 267.51 71.765 267.765 72.0934C268.02 72.4218 268.161 72.8243 268.166 73.2399C268.172 73.6555 268.042 74.0616 267.796 74.3967C267.55 74.7318 267.201 74.9777 266.803 75.097L237.141 84.3145C236.84 84.4058 236.566 84.5699 236.344 84.7922C236.121 85.0146 235.957 85.2883 235.866 85.5893L226.747 115.252C226.638 115.653 226.401 116.008 226.073 116.263C225.745 116.517 225.342 116.658 224.926 116.664C224.511 116.669 224.105 116.539 223.77 116.293C223.435 116.047 223.189 115.699 223.069 115.301L213.852 85.6383C213.761 85.3374 213.597 85.0636 213.374 84.8412C213.152 84.6189 212.878 84.4548 212.577 84.3635L182.914 75.2441C182.513 75.1354 182.158 74.8989 181.904 74.5705C181.649 74.2421 181.508 73.8396 181.503 73.424C181.497 73.0084 181.627 72.6023 181.873 72.2672C182.119 71.9321 182.467 71.6863 182.865 71.5669L212.528 62.3494C212.829 62.2582 213.103 62.0941 213.325 61.8717C213.547 61.6494 213.712 61.3756 213.803 61.0747L222.922 31.4121C223.031 31.0109 223.267 30.656 223.596 30.4013C223.924 30.1465 224.327 30.0057 224.742 30.0002C225.158 29.9946 225.564 30.1247 225.899 30.3706C226.234 30.6165 226.48 30.9649 226.599 31.363L235.817 61.0257C235.908 61.3266 236.072 61.6003 236.295 61.8227C236.517 62.0451 236.791 62.2091 237.092 62.3004Z\"\n        fill=\"currentColor\"\n      />\n      <path\n        d=\"M155.948 155.848L202.771 168.939C203.449 169.131 204.045 169.539 204.47 170.101C204.895 170.663 205.125 171.348 205.125 172.052C205.125 172.757 204.895 173.442 204.47 174.004C204.045 174.566 203.449 174.974 202.771 175.166L155.899 188.06C155.361 188.209 154.87 188.496 154.475 188.891C154.079 189.286 153.793 189.777 153.644 190.316L140.553 237.138C140.361 237.816 139.953 238.413 139.391 238.838C138.829 239.262 138.144 239.492 137.44 239.492C136.735 239.492 136.05 239.262 135.488 238.838C134.927 238.413 134.519 237.816 134.327 237.138L121.432 190.267C121.283 189.728 120.997 189.237 120.601 188.842C120.206 188.446 119.715 188.16 119.177 188.011L72.3537 174.92C71.676 174.728 71.0795 174.32 70.6547 173.759C70.2299 173.197 70 172.512 70 171.807C70 171.103 70.2299 170.418 70.6547 169.856C71.0795 169.294 71.676 168.886 72.3537 168.694L119.226 155.799C119.764 155.65 120.255 155.364 120.65 154.969C121.046 154.573 121.332 154.082 121.481 153.544L134.572 106.721C134.764 106.043 135.172 105.447 135.734 105.022C136.295 104.597 136.981 104.367 137.685 104.367C138.389 104.367 139.075 104.597 139.637 105.022C140.198 105.447 140.606 106.043 140.798 106.721L153.693 153.593C153.842 154.131 154.128 154.622 154.524 155.018C154.919 155.413 155.41 155.699 155.948 155.848Z\"\n        fill=\"currentColor\"\n      />\n      <path\n        d=\"M386.827 289.992C404.33 292.149 403.84 305.828 386.876 307.299C346.623 310.829 298.869 316.271 282.199 360.005C274.844 379.192 269.942 403.2 267.49 432.029C267.427 432.846 267.211 433.626 266.856 434.319C266.501 435.012 266.015 435.602 265.431 436.05C254.988 444.041 251.212 434.186 250.183 425.606C239.2 332.353 214.588 316.909 124.668 306.122C123.892 306.031 123.151 305.767 122.504 305.35C121.857 304.933 121.322 304.375 120.942 303.72C116.399 295.679 119.324 291.038 129.718 289.796C224.688 278.47 236.062 262.83 250.183 169.331C252.177 156.355 257.259 154.083 265.431 162.516C266.51 163.593 267.202 165.099 267.392 166.782C279.257 258.564 293.328 278.617 386.827 289.992Z\"\n        fill=\"currentColor\"\n      />\n    </svg>\n  );\n}\n"],"names":[],"mappings":";;;;;AAAe,SAAS,MAAM,KAAoC;QAApC,EAAE,SAAS,EAAyB,GAApC;IAC5B,qBACE,sYAAC;QACC,OAAM;QACN,QAAO;QACP,SAAQ;QACR,MAAK;QACL,OAAM;QACN,gBAAe;QACf,QAAO;QACP,eAAc;QACd,gBAAe;QACf,aAAY;QACZ,WAAW;;0BAEX,sYAAC;0BAAM;;;;;;0BAEP,sYAAC;gBACC,GAAE;gBACF,MAAK;;;;;;0BAEP,sYAAC;gBACC,GAAE;gBACF,MAAK;;;;;;0BAEP,sYAAC;gBACC,GAAE;gBACF,MAAK;;;;;;;;;;;;AAIb;KA/BwB","debugId":null}},
    {"offset": {"line": 6357, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/deer/web/src/components/ui/command.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport { Command as CommandPrimitive } from \"cmdk\"\nimport { SearchIcon } from \"lucide-react\"\n\nimport { cn } from \"~/lib/utils\"\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogHeader,\n  DialogTitle,\n} from \"~/components/ui/dialog\"\n\nfunction Command({\n  className,\n  ...props\n}: React.ComponentProps<typeof CommandPrimitive>) {\n  return (\n    <CommandPrimitive\n      data-slot=\"command\"\n      className={cn(\n        \"bg-popover text-popover-foreground flex h-full w-full flex-col overflow-hidden rounded-md\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CommandDialog({\n  title = \"Command Palette\",\n  description = \"Search for a command to run...\",\n  children,\n  ...props\n}: React.ComponentProps<typeof Dialog> & {\n  title?: string\n  description?: string\n}) {\n  return (\n    <Dialog {...props}>\n      <DialogHeader className=\"sr-only\">\n        <DialogTitle>{title}</DialogTitle>\n        <DialogDescription>{description}</DialogDescription>\n      </DialogHeader>\n      <DialogContent className=\"overflow-hidden p-0\">\n        <Command className=\"[&_[cmdk-group-heading]]:text-muted-foreground **:data-[slot=command-input-wrapper]:h-12 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group]]:px-2 [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5\">\n          {children}\n        </Command>\n      </DialogContent>\n    </Dialog>\n  )\n}\n\nfunction CommandInput({\n  className,\n  ...props\n}: React.ComponentProps<typeof CommandPrimitive.Input>) {\n  return (\n    <div\n      data-slot=\"command-input-wrapper\"\n      className=\"flex h-9 items-center gap-2 border-b px-3\"\n    >\n      <SearchIcon className=\"size-4 shrink-0 opacity-50\" />\n      <CommandPrimitive.Input\n        data-slot=\"command-input\"\n        className={cn(\n          \"placeholder:text-muted-foreground flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-hidden disabled:cursor-not-allowed disabled:opacity-50\",\n          className\n        )}\n        {...props}\n      />\n    </div>\n  )\n}\n\nfunction CommandList({\n  className,\n  ...props\n}: React.ComponentProps<typeof CommandPrimitive.List>) {\n  return (\n    <CommandPrimitive.List\n      data-slot=\"command-list\"\n      className={cn(\n        \"max-h-[300px] scroll-py-1 overflow-x-hidden overflow-y-auto\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CommandEmpty({\n  ...props\n}: React.ComponentProps<typeof CommandPrimitive.Empty>) {\n  return (\n    <CommandPrimitive.Empty\n      data-slot=\"command-empty\"\n      className=\"py-6 text-center text-sm\"\n      {...props}\n    />\n  )\n}\n\nfunction CommandGroup({\n  className,\n  ...props\n}: React.ComponentProps<typeof CommandPrimitive.Group>) {\n  return (\n    <CommandPrimitive.Group\n      data-slot=\"command-group\"\n      className={cn(\n        \"text-foreground [&_[cmdk-group-heading]]:text-muted-foreground overflow-hidden p-1 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CommandSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof CommandPrimitive.Separator>) {\n  return (\n    <CommandPrimitive.Separator\n      data-slot=\"command-separator\"\n      className={cn(\"bg-border -mx-1 h-px\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CommandItem({\n  className,\n  ...props\n}: React.ComponentProps<typeof CommandPrimitive.Item>) {\n  return (\n    <CommandPrimitive.Item\n      data-slot=\"command-item\"\n      className={cn(\n        \"data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CommandShortcut({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) {\n  return (\n    <span\n      data-slot=\"command-shortcut\"\n      className={cn(\n        \"text-muted-foreground ml-auto text-xs tracking-widest\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Command,\n  CommandDialog,\n  CommandInput,\n  CommandList,\n  CommandEmpty,\n  CommandGroup,\n  CommandItem,\n  CommandShortcut,\n  CommandSeparator,\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 6571, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/deer/web/src/components/editor/generative/ai-completion-command.tsx"],"sourcesContent":["// Copyright (c) 2025 Bytedance Ltd. and/or its affiliates\n// SPDX-License-Identifier: MIT\n\nimport { CommandGroup, CommandItem, CommandSeparator } from \"../../ui/command\";\nimport { useEditor } from \"novel\";\nimport { Check, TextQuote, TrashIcon } from \"lucide-react\";\n\nconst AICompletionCommands = ({\n  completion,\n  onDiscard,\n}: {\n  completion: string;\n  onDiscard: () => void;\n}) => {\n  const { editor } = useEditor();\n  if (!editor) return null;\n  return (\n    <>\n      <CommandGroup>\n        <CommandItem\n          className=\"gap-2 px-4\"\n          value=\"replace\"\n          onSelect={() => {\n            const selection = editor.view.state.selection;\n            editor\n              .chain()\n              .focus()\n              .insertContentAt(\n                {\n                  from: selection.from,\n                  to: selection.to,\n                },\n                completion,\n              )\n              .run();\n          }}\n        >\n          <Check className=\"text-muted-foreground h-4 w-4\" />\n          Replace selection\n        </CommandItem>\n        <CommandItem\n          className=\"gap-2 px-4\"\n          value=\"insert\"\n          onSelect={() => {\n            const selection = editor.view.state.selection;\n            editor\n              .chain()\n              .focus()\n              .insertContentAt(selection.to + 1, completion)\n              .run();\n          }}\n        >\n          <TextQuote className=\"text-muted-foreground h-4 w-4\" />\n          Insert below\n        </CommandItem>\n      </CommandGroup>\n      <CommandSeparator />\n\n      <CommandGroup>\n        <CommandItem onSelect={onDiscard} value=\"thrash\" className=\"gap-2 px-4\">\n          <TrashIcon className=\"text-muted-foreground h-4 w-4\" />\n          Discard\n        </CommandItem>\n      </CommandGroup>\n    </>\n  );\n};\n\nexport default AICompletionCommands;\n"],"names":[],"mappings":"AAAA,0DAA0D;AAC1D,+BAA+B;;;;;AAE/B;AACA;AACA;AAAA;AAAA;;;;;;AAEA,MAAM,uBAAuB;QAAC,EAC5B,UAAU,EACV,SAAS,EAIV;;IACC,MAAM,EAAE,MAAM,EAAE,GAAG,CAAA,GAAA,0aAAA,CAAA,YAAS,AAAD;IAC3B,IAAI,CAAC,QAAQ,OAAO;IACpB,qBACE;;0BACE,sYAAC,sIAAA,CAAA,eAAY;;kCACX,sYAAC,sIAAA,CAAA,cAAW;wBACV,WAAU;wBACV,OAAM;wBACN,UAAU;4BACR,MAAM,YAAY,OAAO,IAAI,CAAC,KAAK,CAAC,SAAS;4BAC7C,OACG,KAAK,GACL,KAAK,GACL,eAAe,CACd;gCACE,MAAM,UAAU,IAAI;gCACpB,IAAI,UAAU,EAAE;4BAClB,GACA,YAED,GAAG;wBACR;;0CAEA,sYAAC,2RAAA,CAAA,QAAK;gCAAC,WAAU;;;;;;4BAAkC;;;;;;;kCAGrD,sYAAC,sIAAA,CAAA,cAAW;wBACV,WAAU;wBACV,OAAM;wBACN,UAAU;4BACR,MAAM,YAAY,OAAO,IAAI,CAAC,KAAK,CAAC,SAAS;4BAC7C,OACG,KAAK,GACL,KAAK,GACL,eAAe,CAAC,UAAU,EAAE,GAAG,GAAG,YAClC,GAAG;wBACR;;0CAEA,sYAAC,uSAAA,CAAA,YAAS;gCAAC,WAAU;;;;;;4BAAkC;;;;;;;;;;;;;0BAI3D,sYAAC,sIAAA,CAAA,mBAAgB;;;;;0BAEjB,sYAAC,sIAAA,CAAA,eAAY;0BACX,cAAA,sYAAC,sIAAA,CAAA,cAAW;oBAAC,UAAU;oBAAW,OAAM;oBAAS,WAAU;;sCACzD,sYAAC,+RAAA,CAAA,YAAS;4BAAC,WAAU;;;;;;wBAAkC;;;;;;;;;;;;;;AAMjE;GA3DM;;QAOe,0aAAA,CAAA,YAAS;;;KAPxB;uCA6DS","debugId":null}},
    {"offset": {"line": 6700, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/deer/web/src/components/editor/generative/ai-selector-commands.tsx"],"sourcesContent":["// Copyright (c) 2025 Bytedance Ltd. and/or its affiliates\n// SPDX-License-Identifier: MIT\n\nimport {\n  ArrowDownWideNarrow,\n  CheckCheck,\n  RefreshCcwDot,\n  StepForward,\n  WrapText,\n} from \"lucide-react\";\nimport { getPrevText, useEditor } from \"novel\";\nimport { CommandGroup, CommandItem, CommandSeparator } from \"../../ui/command\";\n\nconst options = [\n  {\n    value: \"improve\",\n    label: \"Improve writing\",\n    icon: RefreshCcwDot,\n  },\n  // TODO: add this back in\n  // {\n  //   value: \"fix\",\n  //   label: \"Fix grammar\",\n  //   icon: CheckCheck,\n  // },\n  {\n    value: \"shorter\",\n    label: \"Make shorter\",\n    icon: ArrowDownWideNarrow,\n  },\n  {\n    value: \"longer\",\n    label: \"Make longer\",\n    icon: WrapText,\n  },\n];\n\ninterface AISelectorCommandsProps {\n  onSelect: (value: string, option: string) => void;\n}\n\nconst AISelectorCommands = ({ onSelect }: AISelectorCommandsProps) => {\n  const { editor } = useEditor();\n  if (!editor) return null;\n  return (\n    <>\n      <CommandGroup heading=\"Edit or review selection\">\n        {options.map((option) => (\n          <CommandItem\n            onSelect={(value) => {\n              const slice = editor.state.selection.content();\n              const text = editor.storage.markdown.serializer.serialize(\n                slice.content,\n              );\n              onSelect(text, value);\n            }}\n            className=\"flex gap-2 px-4\"\n            key={option.value}\n            value={option.value}\n          >\n            <option.icon className=\"h-4 w-4 text-purple-500\" />\n            {option.label}\n          </CommandItem>\n        ))}\n      </CommandGroup>\n      <CommandSeparator />\n      <CommandGroup heading=\"Use AI to do more\">\n        <CommandItem\n          onSelect={() => {\n            const pos = editor.state.selection.from;\n            const text = getPrevText(editor, pos);\n            onSelect(text, \"continue\");\n          }}\n          value=\"continue\"\n          className=\"gap-2 px-4\"\n        >\n          <StepForward className=\"h-4 w-4 text-purple-500\" />\n          Continue writing\n        </CommandItem>\n      </CommandGroup>\n    </>\n  );\n};\n\nexport default AISelectorCommands;\n"],"names":[],"mappings":"AAAA,0DAA0D;AAC1D,+BAA+B;;;;;AAE/B;AAAA;AAAA;AAAA;AAOA;AAAA;AACA;;;;;;AAEA,MAAM,UAAU;IACd;QACE,OAAO;QACP,OAAO;QACP,MAAM,mTAAA,CAAA,gBAAa;IACrB;IACA,yBAAyB;IACzB,IAAI;IACJ,kBAAkB;IAClB,0BAA0B;IAC1B,sBAAsB;IACtB,KAAK;IACL;QACE,OAAO;QACP,OAAO;QACP,MAAM,mUAAA,CAAA,sBAAmB;IAC3B;IACA;QACE,OAAO;QACP,OAAO;QACP,MAAM,qSAAA,CAAA,WAAQ;IAChB;CACD;AAMD,MAAM,qBAAqB;QAAC,EAAE,QAAQ,EAA2B;;IAC/D,MAAM,EAAE,MAAM,EAAE,GAAG,CAAA,GAAA,0aAAA,CAAA,YAAS,AAAD;IAC3B,IAAI,CAAC,QAAQ,OAAO;IACpB,qBACE;;0BACE,sYAAC,sIAAA,CAAA,eAAY;gBAAC,SAAQ;0BACnB,QAAQ,GAAG,CAAC,CAAC,uBACZ,sYAAC,sIAAA,CAAA,cAAW;wBACV,UAAU,CAAC;4BACT,MAAM,QAAQ,OAAO,KAAK,CAAC,SAAS,CAAC,OAAO;4BAC5C,MAAM,OAAO,OAAO,OAAO,CAAC,QAAQ,CAAC,UAAU,CAAC,SAAS,CACvD,MAAM,OAAO;4BAEf,SAAS,MAAM;wBACjB;wBACA,WAAU;wBAEV,OAAO,OAAO,KAAK;;0CAEnB,sYAAC,OAAO,IAAI;gCAAC,WAAU;;;;;;4BACtB,OAAO,KAAK;;uBAJR,OAAO,KAAK;;;;;;;;;;0BAQvB,sYAAC,sIAAA,CAAA,mBAAgB;;;;;0BACjB,sYAAC,sIAAA,CAAA,eAAY;gBAAC,SAAQ;0BACpB,cAAA,sYAAC,sIAAA,CAAA,cAAW;oBACV,UAAU;wBACR,MAAM,MAAM,OAAO,KAAK,CAAC,SAAS,CAAC,IAAI;wBACvC,MAAM,OAAO,CAAA,GAAA,8WAAA,CAAA,cAAW,AAAD,EAAE,QAAQ;wBACjC,SAAS,MAAM;oBACjB;oBACA,OAAM;oBACN,WAAU;;sCAEV,sYAAC,2SAAA,CAAA,cAAW;4BAAC,WAAU;;;;;;wBAA4B;;;;;;;;;;;;;;AAM7D;GAzCM;;QACe,0aAAA,CAAA,YAAS;;;KADxB;uCA2CS","debugId":null}},
    {"offset": {"line": 6834, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/deer/web/src/components/editor/generative/ai-selector.tsx"],"sourcesContent":["// Copyright (c) 2025 Bytedance Ltd. and/or its affiliates\n// SPDX-License-Identifier: MIT\n\n\"use client\";\n\nimport { Command, CommandInput } from \"../../ui/command\";\n\nimport { ArrowUp } from \"lucide-react\";\nimport { useEditor } from \"novel\";\nimport { addAIHighlight } from \"novel\";\nimport { useCallback, useState } from \"react\";\nimport Markdown from \"react-markdown\";\nimport { toast } from \"sonner\";\nimport { Button } from \"../../ui/button\";\nimport Magic from \"../../ui/icons/magic\";\nimport { ScrollArea } from \"../../ui/scroll-area\";\nimport AICompletionCommands from \"./ai-completion-command\";\nimport AISelectorCommands from \"./ai-selector-commands\";\nimport { LoadingOutlined } from \"@ant-design/icons\";\nimport { resolveServiceURL } from \"~/core/api/resolve-service-url\";\nimport { fetchStream } from \"~/core/sse\";\n//TODO: I think it makes more sense to create a custom Tiptap extension for this functionality https://tiptap.dev/docs/editor/ai/introduction\n\ninterface AISelectorProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n}\n\nfunction useProseCompletion() {\n  const [completion, setCompletion] = useState(\"\");\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState<Error | null>(null);\n\n  const complete = useCallback(\n    async (prompt: string, options?: { body?: Record<string, any> }) => {\n      setIsLoading(true);\n      setError(null);\n\n      try {\n        const response = await fetchStream(\n          resolveServiceURL(\"/api/prose/generate\"),\n          {\n            method: \"POST\",\n            headers: {\n              \"Content-Type\": \"application/json\",\n            },\n            body: JSON.stringify({\n              prompt,\n              ...options?.body,\n            }),\n          },\n        );\n\n        let fullText = \"\";\n\n        // Process the streaming response with debounced updates\n        let chunkBuffer = \"\";\n        let updateTimer: NodeJS.Timeout | undefined;\n\n        const scheduleUpdate = () => {\n          if (updateTimer) clearTimeout(updateTimer);\n          updateTimer = setTimeout(() => {\n            if (chunkBuffer) {\n              fullText += chunkBuffer;\n              setCompletion(fullText);\n              chunkBuffer = \"\";\n            }\n          }, 16); // ~60fps\n        };\n\n        for await (const chunk of response) {\n          chunkBuffer += chunk.data;\n          scheduleUpdate();\n        }\n        // Final update\n        if (chunkBuffer) {\n          fullText += chunkBuffer;\n          setCompletion(fullText);\n        }\n\n        setIsLoading(false);\n        return fullText;\n      } catch (e) {\n        const error = e instanceof Error ? e : new Error(\"An error occurred\");\n        setError(error);\n        toast.error(error.message);\n        setIsLoading(false);\n        throw error;\n      }\n    },\n    [],\n  );\n\n  const reset = useCallback(() => {\n    setCompletion(\"\");\n    setError(null);\n    setIsLoading(false);\n  }, []);\n\n  return {\n    completion,\n    complete,\n    isLoading,\n    error,\n    reset,\n  };\n}\n\nexport function AISelector({ onOpenChange }: AISelectorProps) {\n  const { editor } = useEditor();\n  const [inputValue, setInputValue] = useState(\"\");\n\n  const { completion, complete, isLoading } = useProseCompletion();\n\n  if (!editor) return null;\n\n  const hasCompletion = completion.length > 0;\n\n  return (\n    <Command className=\"w-[350px]\">\n      {hasCompletion && (\n        <div className=\"flex max-h-[400px]\">\n          <ScrollArea>\n            <div className=\"prose prose-sm dark:prose-invert p-2 px-4\">\n              <Markdown>{completion}</Markdown>\n            </div>\n          </ScrollArea>\n        </div>\n      )}\n\n      {isLoading && (\n        <div className=\"flex h-12 w-full items-center px-4 text-sm font-medium text-purple-500\">\n          <Magic className=\"mr-2 h-4 w-4 shrink-0\" />\n          AI is thinking\n          <div className=\"mt-1 ml-2\">\n            <LoadingOutlined />\n          </div>\n        </div>\n      )}\n      {!isLoading && (\n        <>\n          <div className=\"relative\">\n            <CommandInput\n              value={inputValue}\n              onValueChange={setInputValue}\n              autoFocus\n              placeholder={\n                hasCompletion\n                  ? \"Tell AI what to do next\"\n                  : \"Ask AI to edit or generate...\"\n              }\n              onFocus={() => addAIHighlight(editor)}\n            />\n            <Button\n              size=\"icon\"\n              className=\"absolute top-1/2 right-2 h-6 w-6 -translate-y-1/2 rounded-full bg-purple-500 hover:bg-purple-900\"\n              onClick={() => {\n                if (completion)\n                  return complete(completion, {\n                    body: { option: \"zap\", command: inputValue },\n                  }).then(() => setInputValue(\"\"));\n\n                const slice = editor.state.selection.content();\n                const text = editor.storage.markdown.serializer.serialize(\n                  slice.content,\n                );\n\n                complete(text, {\n                  body: { option: \"zap\", command: inputValue },\n                }).then(() => setInputValue(\"\"));\n              }}\n            >\n              <ArrowUp className=\"h-4 w-4\" />\n            </Button>\n          </div>\n          {hasCompletion ? (\n            <AICompletionCommands\n              onDiscard={() => {\n                editor.chain().unsetHighlight().focus().run();\n                onOpenChange(false);\n              }}\n              completion={completion}\n            />\n          ) : (\n            <AISelectorCommands\n              onSelect={(value, option) =>\n                complete(value, { body: { option } })\n              }\n            />\n          )}\n        </>\n      )}\n    </Command>\n  );\n}\n"],"names":[],"mappings":"AAAA,0DAA0D;AAC1D,+BAA+B;;;;;AAI/B;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;;;AAjBA;;;;;;;;;;;;;;;;AAyBA,SAAS;;IACP,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,sWAAA,CAAA,WAAQ,AAAD,EAAE;IAC7C,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,sWAAA,CAAA,WAAQ,AAAD,EAAE;IAC3C,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,sWAAA,CAAA,WAAQ,AAAD,EAAgB;IAEjD,MAAM,WAAW,CAAA,GAAA,sWAAA,CAAA,cAAW,AAAD;oDACzB,OAAO,QAAgB;YACrB,aAAa;YACb,SAAS;YAET,IAAI;gBACF,MAAM,WAAW,MAAM,CAAA,GAAA,wIAAA,CAAA,cAAW,AAAD,EAC/B,CAAA,GAAA,kJAAA,CAAA,oBAAiB,AAAD,EAAE,wBAClB;oBACE,QAAQ;oBACR,SAAS;wBACP,gBAAgB;oBAClB;oBACA,MAAM,KAAK,SAAS,CAAC;wBACnB;2BACG,oBAAA,8BAAA,QAAS,IAAI,AAAhB;oBACF;gBACF;gBAGF,IAAI,WAAW;gBAEf,wDAAwD;gBACxD,IAAI,cAAc;gBAClB,IAAI;gBAEJ,MAAM;+EAAiB;wBACrB,IAAI,aAAa,aAAa;wBAC9B,cAAc;uFAAW;gCACvB,IAAI,aAAa;oCACf,YAAY;oCACZ,cAAc;oCACd,cAAc;gCAChB;4BACF;sFAAG,KAAK,SAAS;oBACnB;;gBAEA,WAAW,MAAM,SAAS,SAAU;oBAClC,eAAe,MAAM,IAAI;oBACzB;gBACF;gBACA,eAAe;gBACf,IAAI,aAAa;oBACf,YAAY;oBACZ,cAAc;gBAChB;gBAEA,aAAa;gBACb,OAAO;YACT,EAAE,OAAO,GAAG;gBACV,MAAM,QAAQ,aAAa,QAAQ,IAAI,IAAI,MAAM;gBACjD,SAAS;gBACT,2QAAA,CAAA,QAAK,CAAC,KAAK,CAAC,MAAM,OAAO;gBACzB,aAAa;gBACb,MAAM;YACR;QACF;mDACA,EAAE;IAGJ,MAAM,QAAQ,CAAA,GAAA,sWAAA,CAAA,cAAW,AAAD;iDAAE;YACxB,cAAc;YACd,SAAS;YACT,aAAa;QACf;gDAAG,EAAE;IAEL,OAAO;QACL;QACA;QACA;QACA;QACA;IACF;AACF;GA9ES;AAgFF,SAAS,WAAW,KAAiC;QAAjC,EAAE,YAAY,EAAmB,GAAjC;;IACzB,MAAM,EAAE,MAAM,EAAE,GAAG,CAAA,GAAA,0aAAA,CAAA,YAAS,AAAD;IAC3B,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,sWAAA,CAAA,WAAQ,AAAD,EAAE;IAE7C,MAAM,EAAE,UAAU,EAAE,QAAQ,EAAE,SAAS,EAAE,GAAG;IAE5C,IAAI,CAAC,QAAQ,OAAO;IAEpB,MAAM,gBAAgB,WAAW,MAAM,GAAG;IAE1C,qBACE,sYAAC,sIAAA,CAAA,UAAO;QAAC,WAAU;;YAChB,+BACC,sYAAC;gBAAI,WAAU;0BACb,cAAA,sYAAC,6IAAA,CAAA,aAAU;8BACT,cAAA,sYAAC;wBAAI,WAAU;kCACb,cAAA,sYAAC,mTAAA,CAAA,UAAQ;sCAAE;;;;;;;;;;;;;;;;;;;;;YAMlB,2BACC,sYAAC;gBAAI,WAAU;;kCACb,sYAAC,6IAAA,CAAA,UAAK;wBAAC,WAAU;;;;;;oBAA0B;kCAE3C,sYAAC;wBAAI,WAAU;kCACb,cAAA,sYAAC,6WAAA,CAAA,kBAAe;;;;;;;;;;;;;;;;YAIrB,CAAC,2BACA;;kCACE,sYAAC;wBAAI,WAAU;;0CACb,sYAAC,sIAAA,CAAA,eAAY;gCACX,OAAO;gCACP,eAAe;gCACf,SAAS;gCACT,aACE,gBACI,4BACA;gCAEN,SAAS,IAAM,CAAA,GAAA,8WAAA,CAAA,iBAAc,AAAD,EAAE;;;;;;0CAEhC,sYAAC,qIAAA,CAAA,SAAM;gCACL,MAAK;gCACL,WAAU;gCACV,SAAS;oCACP,IAAI,YACF,OAAO,SAAS,YAAY;wCAC1B,MAAM;4CAAE,QAAQ;4CAAO,SAAS;wCAAW;oCAC7C,GAAG,IAAI,CAAC,IAAM,cAAc;oCAE9B,MAAM,QAAQ,OAAO,KAAK,CAAC,SAAS,CAAC,OAAO;oCAC5C,MAAM,OAAO,OAAO,OAAO,CAAC,QAAQ,CAAC,UAAU,CAAC,SAAS,CACvD,MAAM,OAAO;oCAGf,SAAS,MAAM;wCACb,MAAM;4CAAE,QAAQ;4CAAO,SAAS;wCAAW;oCAC7C,GAAG,IAAI,CAAC,IAAM,cAAc;gCAC9B;0CAEA,cAAA,sYAAC,mSAAA,CAAA,UAAO;oCAAC,WAAU;;;;;;;;;;;;;;;;;oBAGtB,8BACC,sYAAC,4KAAA,CAAA,UAAoB;wBACnB,WAAW;4BACT,OAAO,KAAK,GAAG,cAAc,GAAG,KAAK,GAAG,GAAG;4BAC3C,aAAa;wBACf;wBACA,YAAY;;;;;6CAGd,sYAAC,2KAAA,CAAA,UAAkB;wBACjB,UAAU,CAAC,OAAO,SAChB,SAAS,OAAO;gCAAE,MAAM;oCAAE;gCAAO;4BAAE;;;;;;;;;;;;;;AAQnD;IAtFgB;;QACK,0aAAA,CAAA,YAAS;QAGgB;;;KAJ9B","debugId":null}},
    {"offset": {"line": 7116, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/deer/web/src/components/editor/generative/generative-menu-switch.tsx"],"sourcesContent":["// Copyright (c) 2025 Bytedance Ltd. and/or its affiliates\n// SPDX-License-Identifier: MIT\n\nimport { EditorBubble, removeAIHighlight, useEditor } from \"novel\";\nimport { Fragment, type ReactNode, useEffect } from \"react\";\nimport { Button } from \"../../ui/button\";\nimport Magic from \"../../ui/icons/magic\";\nimport { AISelector } from \"./ai-selector\";\nimport { useReplay } from \"~/core/replay\";\nimport { TooltipContent, TooltipTrigger } from \"~/components/ui/tooltip\";\nimport { Tooltip } from \"~/components/ui/tooltip\";\n\ninterface GenerativeMenuSwitchProps {\n  children: ReactNode;\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n}\nconst GenerativeMenuSwitch = ({\n  children,\n  open,\n  onOpenChange,\n}: GenerativeMenuSwitchProps) => {\n  const { editor } = useEditor();\n  const { isReplay } = useReplay();\n  useEffect(() => {\n    if (!open && editor) removeAIHighlight(editor);\n  }, [open]);\n\n  if (!editor) return null;\n  return (\n    <EditorBubble\n      tippyOptions={{\n        placement: open ? \"bottom-start\" : \"top\",\n        onHidden: () => {\n          onOpenChange(false);\n          editor.chain().unsetHighlight().run();\n        },\n      }}\n      className=\"border-muted bg-background flex w-fit max-w-[90vw] overflow-hidden rounded-md border shadow-xl\"\n    >\n      {open && <AISelector open={open} onOpenChange={onOpenChange} />}\n      {!open && (\n        <Fragment>\n          {isReplay ? (\n            <Tooltip>\n              <TooltipTrigger>\n                <Button\n                  className=\"gap-1 rounded-none text-purple-500\"\n                  variant=\"ghost\"\n                  size=\"sm\"\n                  disabled\n                >\n                  <Magic className=\"h-5 w-5\" />\n                  Ask AI\n                </Button>\n              </TooltipTrigger>\n              <TooltipContent>You can't ask AI in replay mode.</TooltipContent>\n            </Tooltip>\n          ) : (\n            <Button\n              className=\"gap-1 rounded-none text-purple-500\"\n              variant=\"ghost\"\n              onClick={() => onOpenChange(true)}\n              size=\"sm\"\n            >\n              <Magic className=\"h-5 w-5\" />\n              Ask AI\n            </Button>\n          )}\n          {children}\n        </Fragment>\n      )}\n    </EditorBubble>\n  );\n};\n\nexport default GenerativeMenuSwitch;\n"],"names":[],"mappings":"AAAA,0DAA0D;AAC1D,+BAA+B;;;;;AAE/B;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;;;;;;;;;;;AAQA,MAAM,uBAAuB;QAAC,EAC5B,QAAQ,EACR,IAAI,EACJ,YAAY,EACc;;IAC1B,MAAM,EAAE,MAAM,EAAE,GAAG,CAAA,GAAA,0aAAA,CAAA,YAAS,AAAD;IAC3B,MAAM,EAAE,QAAQ,EAAE,GAAG,CAAA,GAAA,iIAAA,CAAA,YAAS,AAAD;IAC7B,CAAA,GAAA,sWAAA,CAAA,YAAS,AAAD;0CAAE;YACR,IAAI,CAAC,QAAQ,QAAQ,CAAA,GAAA,8WAAA,CAAA,oBAAiB,AAAD,EAAE;QACzC;yCAAG;QAAC;KAAK;IAET,IAAI,CAAC,QAAQ,OAAO;IACpB,qBACE,sYAAC,8WAAA,CAAA,eAAY;QACX,cAAc;YACZ,WAAW,OAAO,iBAAiB;YACnC,UAAU;gBACR,aAAa;gBACb,OAAO,KAAK,GAAG,cAAc,GAAG,GAAG;YACrC;QACF;QACA,WAAU;;YAET,sBAAQ,sYAAC,+JAAA,CAAA,aAAU;gBAAC,MAAM;gBAAM,cAAc;;;;;;YAC9C,CAAC,sBACA,sYAAC,sWAAA,CAAA,WAAQ;;oBACN,yBACC,sYAAC,sIAAA,CAAA,UAAO;;0CACN,sYAAC,sIAAA,CAAA,iBAAc;0CACb,cAAA,sYAAC,qIAAA,CAAA,SAAM;oCACL,WAAU;oCACV,SAAQ;oCACR,MAAK;oCACL,QAAQ;;sDAER,sYAAC,6IAAA,CAAA,UAAK;4CAAC,WAAU;;;;;;wCAAY;;;;;;;;;;;;0CAIjC,sYAAC,sIAAA,CAAA,iBAAc;0CAAC;;;;;;;;;;;iFAGlB,sYAAC,qIAAA,CAAA,SAAM;wBACL,WAAU;wBACV,SAAQ;wBACR,SAAS,IAAM,aAAa;wBAC5B,MAAK;;0CAEL,sYAAC,6IAAA,CAAA,UAAK;gCAAC,WAAU;;;;;;4BAAY;;;;;;;oBAIhC;;;;;;;;;;;;;AAKX;GAzDM;;QAKe,0aAAA,CAAA,YAAS;QACP,iIAAA,CAAA,YAAS;;;KAN1B;uCA2DS","debugId":null}},
    {"offset": {"line": 7267, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/deer/web/src/components/editor/image-upload.ts"],"sourcesContent":["// Copyright (c) 2025 Bytedance Ltd. and/or its affiliates\n// SPDX-License-Identifier: MIT\n\nimport { createImageUpload } from \"novel\";\nimport { toast } from \"sonner\";\n\nconst onUpload = (file: File) => {\n  const promise = fetch(\"/api/upload\", {\n    method: \"POST\",\n    headers: {\n      \"content-type\": file?.type || \"application/octet-stream\",\n      \"x-vercel-filename\": file?.name || \"image.png\",\n    },\n    body: file,\n  });\n\n  return new Promise((resolve, reject) => {\n    toast.promise(\n      promise.then(async (res) => {\n        // Successfully uploaded image\n        if (res.status === 200) {\n          const { url } = (await res.json()) as { url: string };\n          // preload the image\n          const image = new Image();\n          image.src = url;\n          image.onload = () => {\n            resolve(url);\n          };\n          // No blob store configured\n        } else if (res.status === 401) {\n          resolve(file);\n          throw new Error(\n            \"`BLOB_READ_WRITE_TOKEN` environment variable not found, reading image locally instead.\",\n          );\n          // Unknown error\n        } else {\n          throw new Error(\"Error uploading image. Please try again.\");\n        }\n      }),\n      {\n        loading: \"Uploading image...\",\n        success: \"Image uploaded successfully.\",\n        error: (e) => {\n          reject(e);\n          return e.message;\n        },\n      },\n    );\n  });\n};\n\nexport const uploadFn = createImageUpload({\n  onUpload,\n  validateFn: (file) => {\n    if (!file.type.includes(\"image/\")) {\n      toast.error(\"File type not supported.\");\n      return false;\n    }\n    if (file.size / 1024 / 1024 > 20) {\n      toast.error(\"File size too big (max 20MB).\");\n      return false;\n    }\n    return true;\n  },\n});\n"],"names":[],"mappings":"AAAA,0DAA0D;AAC1D,+BAA+B;;;;AAE/B;AACA;;;AAEA,MAAM,WAAW,CAAC;IAChB,MAAM,UAAU,MAAM,eAAe;QACnC,QAAQ;QACR,SAAS;YACP,gBAAgB,CAAA,iBAAA,2BAAA,KAAM,IAAI,KAAI;YAC9B,qBAAqB,CAAA,iBAAA,2BAAA,KAAM,IAAI,KAAI;QACrC;QACA,MAAM;IACR;IAEA,OAAO,IAAI,QAAQ,CAAC,SAAS;QAC3B,2QAAA,CAAA,QAAK,CAAC,OAAO,CACX,QAAQ,IAAI,CAAC,OAAO;YAClB,8BAA8B;YAC9B,IAAI,IAAI,MAAM,KAAK,KAAK;gBACtB,MAAM,EAAE,GAAG,EAAE,GAAI,MAAM,IAAI,IAAI;gBAC/B,oBAAoB;gBACpB,MAAM,QAAQ,IAAI;gBAClB,MAAM,GAAG,GAAG;gBACZ,MAAM,MAAM,GAAG;oBACb,QAAQ;gBACV;YACA,2BAA2B;YAC7B,OAAO,IAAI,IAAI,MAAM,KAAK,KAAK;gBAC7B,QAAQ;gBACR,MAAM,IAAI,MACR;YAEF,gBAAgB;YAClB,OAAO;gBACL,MAAM,IAAI,MAAM;YAClB;QACF,IACA;YACE,SAAS;YACT,SAAS;YACT,OAAO,CAAC;gBACN,OAAO;gBACP,OAAO,EAAE,OAAO;YAClB;QACF;IAEJ;AACF;AAEO,MAAM,WAAW,CAAA,GAAA,8WAAA,CAAA,oBAAiB,AAAD,EAAE;IACxC;IACA,YAAY,CAAC;QACX,IAAI,CAAC,KAAK,IAAI,CAAC,QAAQ,CAAC,WAAW;YACjC,2QAAA,CAAA,QAAK,CAAC,KAAK,CAAC;YACZ,OAAO;QACT;QACA,IAAI,KAAK,IAAI,GAAG,OAAO,OAAO,IAAI;YAChC,2QAAA,CAAA,QAAK,CAAC,KAAK,CAAC;YACZ,OAAO;QACT;QACA,OAAO;IACT;AACF","debugId":null}},
    {"offset": {"line": 7337, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/deer/web/src/components/editor/selectors/text-buttons.tsx"],"sourcesContent":["// Copyright (c) 2025 Bytedance Ltd. and/or its affiliates\n// SPDX-License-Identifier: MIT\n\nimport { Button } from \"../../ui/button\";\nimport { cn } from \"../../../lib/utils\";\nimport {\n  BoldIcon,\n  CodeIcon,\n  ItalicIcon,\n  StrikethroughIcon,\n  UnderlineIcon,\n} from \"lucide-react\";\nimport { EditorBubbleItem, useEditor } from \"novel\";\nimport type { SelectorItem } from \"./node-selector\";\n\nexport const TextButtons = () => {\n  const { editor } = useEditor();\n  if (!editor) return null;\n  const items: SelectorItem[] = [\n    {\n      name: \"bold\",\n      isActive: (editor) => editor.isActive(\"bold\"),\n      command: (editor) => editor.chain().focus().toggleBold().run(),\n      icon: BoldIcon,\n    },\n    {\n      name: \"italic\",\n      isActive: (editor) => editor.isActive(\"italic\"),\n      command: (editor) => editor.chain().focus().toggleItalic().run(),\n      icon: ItalicIcon,\n    },\n    {\n      name: \"underline\",\n      isActive: (editor) => editor.isActive(\"underline\"),\n      command: (editor) => editor.chain().focus().toggleUnderline().run(),\n      icon: UnderlineIcon,\n    },\n    {\n      name: \"strike\",\n      isActive: (editor) => editor.isActive(\"strike\"),\n      command: (editor) => editor.chain().focus().toggleStrike().run(),\n      icon: StrikethroughIcon,\n    },\n    {\n      name: \"code\",\n      isActive: (editor) => editor.isActive(\"code\"),\n      command: (editor) => editor.chain().focus().toggleCode().run(),\n      icon: CodeIcon,\n    },\n  ];\n  return (\n    <div className=\"flex\">\n      {items.map((item) => (\n        <EditorBubbleItem\n          key={item.name}\n          onSelect={(editor) => {\n            item.command(editor);\n          }}\n        >\n          <Button\n            size=\"sm\"\n            className=\"rounded-none\"\n            variant=\"ghost\"\n            type=\"button\"\n          >\n            <item.icon\n              className={cn(\"h-4 w-4\", {\n                \"text-blue-500\": item.isActive(editor),\n              })}\n            />\n          </Button>\n        </EditorBubbleItem>\n      ))}\n    </div>\n  );\n};\n"],"names":[],"mappings":"AAAA,0DAA0D;AAC1D,+BAA+B;;;;;AAE/B;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAOA;AAAA;;;;;;;AAGO,MAAM,cAAc;;IACzB,MAAM,EAAE,MAAM,EAAE,GAAG,CAAA,GAAA,0aAAA,CAAA,YAAS,AAAD;IAC3B,IAAI,CAAC,QAAQ,OAAO;IACpB,MAAM,QAAwB;QAC5B;YACE,MAAM;YACN,UAAU,CAAC,SAAW,OAAO,QAAQ,CAAC;YACtC,SAAS,CAAC,SAAW,OAAO,KAAK,GAAG,KAAK,GAAG,UAAU,GAAG,GAAG;YAC5D,MAAM,6RAAA,CAAA,WAAQ;QAChB;QACA;YACE,MAAM;YACN,UAAU,CAAC,SAAW,OAAO,QAAQ,CAAC;YACtC,SAAS,CAAC,SAAW,OAAO,KAAK,GAAG,KAAK,GAAG,YAAY,GAAG,GAAG;YAC9D,MAAM,iSAAA,CAAA,aAAU;QAClB;QACA;YACE,MAAM;YACN,UAAU,CAAC,SAAW,OAAO,QAAQ,CAAC;YACtC,SAAS,CAAC,SAAW,OAAO,KAAK,GAAG,KAAK,GAAG,eAAe,GAAG,GAAG;YACjE,MAAM,uSAAA,CAAA,gBAAa;QACrB;QACA;YACE,MAAM;YACN,UAAU,CAAC,SAAW,OAAO,QAAQ,CAAC;YACtC,SAAS,CAAC,SAAW,OAAO,KAAK,GAAG,KAAK,GAAG,YAAY,GAAG,GAAG;YAC9D,MAAM,+SAAA,CAAA,oBAAiB;QACzB;QACA;YACE,MAAM;YACN,UAAU,CAAC,SAAW,OAAO,QAAQ,CAAC;YACtC,SAAS,CAAC,SAAW,OAAO,KAAK,GAAG,KAAK,GAAG,UAAU,GAAG,GAAG;YAC5D,MAAM,6RAAA,CAAA,WAAQ;QAChB;KACD;IACD,qBACE,sYAAC;QAAI,WAAU;kBACZ,MAAM,GAAG,CAAC,CAAC,qBACV,sYAAC,8WAAA,CAAA,mBAAgB;gBAEf,UAAU,CAAC;oBACT,KAAK,OAAO,CAAC;gBACf;0BAEA,cAAA,sYAAC,qIAAA,CAAA,SAAM;oBACL,MAAK;oBACL,WAAU;oBACV,SAAQ;oBACR,MAAK;8BAEL,cAAA,sYAAC,KAAK,IAAI;wBACR,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,WAAW;4BACvB,iBAAiB,KAAK,QAAQ,CAAC;wBACjC;;;;;;;;;;;eAdC,KAAK,IAAI;;;;;;;;;;AAqBxB;GA5Da;;QACQ,0aAAA,CAAA,YAAS;;;KADjB","debugId":null}},
    {"offset": {"line": 7447, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/deer/web/src/components/editor/slash-command.tsx"],"sourcesContent":["// Copyright (c) 2025 Bytedance Ltd. and/or its affiliates\n// SPDX-License-Identifier: MIT\n\nimport {\n  CheckSquare,\n  Code,\n  Heading1,\n  Heading2,\n  Heading3,\n  List,\n  ListOrdered,\n  Text,\n  TextQuote,\n} from \"lucide-react\";\nimport { Command, createSuggestionItems, renderItems } from \"novel\";\n// import { uploadFn } from \"./image-upload\";\n\nexport const suggestionItems = createSuggestionItems([\n  {\n    title: \"Text\",\n    description: \"Just start typing with plain text.\",\n    searchTerms: [\"p\", \"paragraph\"],\n    icon: <Text size={18} />,\n    command: ({ editor, range }) => {\n      editor\n        .chain()\n        .focus()\n        .deleteRange(range)\n        .toggleNode(\"paragraph\", \"paragraph\")\n        .run();\n    },\n  },\n  {\n    title: \"To-do List\",\n    description: \"Track tasks with a to-do list.\",\n    searchTerms: [\"todo\", \"task\", \"list\", \"check\", \"checkbox\"],\n    icon: <CheckSquare size={18} />,\n    command: ({ editor, range }) => {\n      editor.chain().focus().deleteRange(range).toggleTaskList().run();\n    },\n  },\n  {\n    title: \"Heading 1\",\n    description: \"Big section heading.\",\n    searchTerms: [\"title\", \"big\", \"large\"],\n    icon: <Heading1 size={18} />,\n    command: ({ editor, range }) => {\n      editor\n        .chain()\n        .focus()\n        .deleteRange(range)\n        .setNode(\"heading\", { level: 1 })\n        .run();\n    },\n  },\n  {\n    title: \"Heading 2\",\n    description: \"Medium section heading.\",\n    searchTerms: [\"subtitle\", \"medium\"],\n    icon: <Heading2 size={18} />,\n    command: ({ editor, range }) => {\n      editor\n        .chain()\n        .focus()\n        .deleteRange(range)\n        .setNode(\"heading\", { level: 2 })\n        .run();\n    },\n  },\n  {\n    title: \"Heading 3\",\n    description: \"Small section heading.\",\n    searchTerms: [\"subtitle\", \"small\"],\n    icon: <Heading3 size={18} />,\n    command: ({ editor, range }) => {\n      editor\n        .chain()\n        .focus()\n        .deleteRange(range)\n        .setNode(\"heading\", { level: 3 })\n        .run();\n    },\n  },\n  {\n    title: \"Bullet List\",\n    description: \"Create a simple bullet list.\",\n    searchTerms: [\"unordered\", \"point\"],\n    icon: <List size={18} />,\n    command: ({ editor, range }) => {\n      editor.chain().focus().deleteRange(range).toggleBulletList().run();\n    },\n  },\n  {\n    title: \"Numbered List\",\n    description: \"Create a list with numbering.\",\n    searchTerms: [\"ordered\"],\n    icon: <ListOrdered size={18} />,\n    command: ({ editor, range }) => {\n      editor.chain().focus().deleteRange(range).toggleOrderedList().run();\n    },\n  },\n  {\n    title: \"Quote\",\n    description: \"Capture a quote.\",\n    searchTerms: [\"blockquote\"],\n    icon: <TextQuote size={18} />,\n    command: ({ editor, range }) =>\n      editor\n        .chain()\n        .focus()\n        .deleteRange(range)\n        .toggleNode(\"paragraph\", \"paragraph\")\n        .toggleBlockquote()\n        .run(),\n  },\n  {\n    title: \"Code\",\n    description: \"Capture a code snippet.\",\n    searchTerms: [\"codeblock\"],\n    icon: <Code size={18} />,\n    command: ({ editor, range }) =>\n      editor.chain().focus().deleteRange(range).toggleCodeBlock().run(),\n  },\n  // {\n  //   title: \"Image\",\n  //   description: \"Upload an image from your computer.\",\n  //   searchTerms: [\"photo\", \"picture\", \"media\"],\n  //   icon: <ImageIcon size={18} />,\n  //   command: ({ editor, range }) => {\n  //     editor.chain().focus().deleteRange(range).run();\n  //     // upload image\n  //     const input = document.createElement(\"input\");\n  //     input.type = \"file\";\n  //     input.accept = \"image/*\";\n  //     input.onchange = async () => {\n  //       if (input.files?.length) {\n  //         const file = input.files[0];\n  //         if (!file) return;\n  //         const pos = editor.view.state.selection.from;\n  //         uploadFn(file, editor.view, pos);\n  //       }\n  //     };\n  //     input.click();\n  //   },\n  // },\n  // {\n  //   title: \"Youtube\",\n  //   description: \"Embed a Youtube video.\",\n  //   searchTerms: [\"video\", \"youtube\", \"embed\"],\n  //   icon: <Youtube size={18} />,\n  //   command: ({ editor, range }) => {\n  //     const videoLink = prompt(\"Please enter Youtube Video Link\");\n  //     //From https://regexr.com/3dj5t\n  //     const ytRegex = new RegExp(\n  //       /^((?:https?:)?\\/\\/)?((?:www|m)\\.)?((?:youtube\\.com|youtu.be))(\\/(?:[\\w\\-]+\\?v=|embed\\/|v\\/)?)([\\w\\-]+)(\\S+)?$/,\n  //     );\n\n  //     if (videoLink && ytRegex.test(videoLink)) {\n  //       editor\n  //         .chain()\n  //         .focus()\n  //         .deleteRange(range)\n  //         .setYoutubeVideo({\n  //           src: videoLink,\n  //         })\n  //         .run();\n  //     } else {\n  //       if (videoLink !== null) {\n  //         alert(\"Please enter a correct Youtube Video Link\");\n  //       }\n  //     }\n  //   },\n  // },\n  // {\n  //   title: \"Twitter\",\n  //   description: \"Embed a Tweet.\",\n  //   searchTerms: [\"twitter\", \"embed\"],\n  //   icon: <Twitter size={18} />,\n  //   command: ({ editor, range }) => {\n  //     const tweetLink = prompt(\"Please enter Twitter Link\");\n  //     const tweetRegex = new RegExp(\n  //       /^https?:\\/\\/(www\\.)?x\\.com\\/([a-zA-Z0-9_]{1,15})(\\/status\\/(\\d+))?(\\/\\S*)?$/,\n  //     );\n\n  //     if (tweetLink && tweetRegex.test(tweetLink)) {\n  //       editor\n  //         .chain()\n  //         .focus()\n  //         .deleteRange(range)\n  //         .setTweet({\n  //           src: tweetLink,\n  //         })\n  //         .run();\n  //     } else {\n  //       if (tweetLink !== null) {\n  //         alert(\"Please enter a correct Twitter Link\");\n  //       }\n  //     }\n  //   },\n  // },\n]);\n\nexport const slashCommand = Command.configure({\n  suggestion: {\n    items: () => suggestionItems,\n    render: renderItems,\n  },\n});\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 7662, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/deer/web/src/components/editor/index.tsx"],"sourcesContent":["// Copyright (c) 2025 Bytedance Ltd. and/or its affiliates\n// SPDX-License-Identifier: MIT\n\n\"use client\";\n\nimport {\n  EditorCommand,\n  EditorCommandEmpty,\n  EditorCommandItem,\n  EditorCommandList,\n  EditorContent,\n  type EditorInstance,\n  EditorRoot,\n  ImageResizer,\n  type JSONContent,\n  handleCommandNavigation,\n  handleImageDrop,\n  handleImagePaste,\n} from \"novel\";\nimport type { Content } from \"@tiptap/react\";\nimport { useEffect, useState } from \"react\";\nimport { useDebouncedCallback } from \"use-debounce\";\nimport { defaultExtensions } from \"./extensions\";\nimport { ColorSelector } from \"./selectors/color-selector\";\nimport { LinkSelector } from \"./selectors/link-selector\";\nimport { MathSelector } from \"./selectors/math-selector\";\nimport { NodeSelector } from \"./selectors/node-selector\";\nimport { Separator } from \"../ui/separator\";\n\nimport GenerativeMenuSwitch from \"./generative/generative-menu-switch\";\nimport { uploadFn } from \"./image-upload\";\nimport { TextButtons } from \"./selectors/text-buttons\";\nimport { slashCommand, suggestionItems } from \"./slash-command\";\nimport { normalizeMathForEditor, unescapeLatexInMath } from \"~/core/utils/markdown\";\n// import { defaultEditorContent } from \"./content\";\n\nimport \"~/styles/prosemirror.css\";\n\nconst hljs = require(\"highlight.js\");\n\nconst extensions = [...defaultExtensions, slashCommand];\n\nexport interface ReportEditorProps {\n  content: Content;\n  onMarkdownChange?: (markdown: string) => void;\n}\n\nconst ReportEditor = ({ content, onMarkdownChange }: ReportEditorProps) => {\n  const [initialContent, setInitialContent] = useState<Content>(() => {\n    // Normalize math delimiters for editor consumption\n    if (typeof content === \"string\") {\n      return normalizeMathForEditor(content);\n    }\n    return content;\n  });\n  const [saveStatus, setSaveStatus] = useState(\"Saved\");\n\n  const [openNode, setOpenNode] = useState(false);\n  const [openColor, setOpenColor] = useState(false);\n  const [openLink, setOpenLink] = useState(false);\n  const [openAI, setOpenAI] = useState(false);\n\n  //Apply Codeblock Highlighting on the HTML from editor.getHTML()\n  const highlightCodeblocks = (content: string) => {\n    const doc = new DOMParser().parseFromString(content, \"text/html\");\n    doc.querySelectorAll(\"pre code\").forEach((el) => {\n      // @ts-ignore\n      // https://highlightjs.readthedocs.io/en/latest/api.html?highlight=highlightElement#highlightelement\n      hljs.highlightElement(el);\n    });\n    return new XMLSerializer().serializeToString(doc);\n  };\n\n  const debouncedUpdates = useDebouncedCallback(\n    async (editor: EditorInstance) => {\n      if (onMarkdownChange) {\n        let markdown = editor.storage.markdown.getMarkdown();\n        markdown = unescapeLatexInMath(markdown);\n        onMarkdownChange(markdown);\n      }\n      setSaveStatus(\"Saved\");\n    },\n    500,\n  );\n\n  if (!initialContent) return null;\n\n  return (\n    <div className=\"relative w-full\">\n      <EditorRoot>\n        <EditorContent\n          immediatelyRender={false}\n          initialContent={initialContent as JSONContent}\n          extensions={extensions}\n          className=\"border-muted relative h-full w-full\"\n          editorProps={{\n            handleDOMEvents: {\n              keydown: (_view, event) => handleCommandNavigation(event),\n            },\n            handlePaste: (view, event) =>\n              handleImagePaste(view, event, uploadFn),\n            handleDrop: (view, event, _slice, moved) =>\n              handleImageDrop(view, event, moved, uploadFn),\n            attributes: {\n              class:\n                \"prose prose-base prose-p:my-4 dark:prose-invert prose-headings:font-title font-default focus:outline-none max-w-full\",\n            },\n          }}\n          onUpdate={({ editor }) => {\n            debouncedUpdates(editor);\n            setSaveStatus(\"Unsaved\");\n          }}\n          slotAfter={<ImageResizer />}\n        >\n          <EditorCommand className=\"border-muted bg-background z-50 h-auto max-h-[330px] overflow-y-auto rounded-md border px-1 py-2 shadow-md transition-all\">\n            <EditorCommandEmpty className=\"text-muted-foreground px-2\">\n              No results\n            </EditorCommandEmpty>\n            <EditorCommandList>\n              {suggestionItems.map((item) => (\n                <EditorCommandItem\n                  value={item.title}\n                  onCommand={(val) => item.command?.(val)}\n                  className=\"hover:bg-accent aria-selected:bg-accent flex w-full items-center space-x-2 rounded-md px-2 py-1 text-left text-sm\"\n                  key={item.title}\n                >\n                  <div className=\"border-muted bg-background flex h-10 w-10 items-center justify-center rounded-md border\">\n                    {item.icon}\n                  </div>\n                  <div>\n                    <p className=\"font-medium\">{item.title}</p>\n                    <p className=\"text-muted-foreground text-xs\">\n                      {item.description}\n                    </p>\n                  </div>\n                </EditorCommandItem>\n              ))}\n            </EditorCommandList>\n          </EditorCommand>\n\n          <GenerativeMenuSwitch open={openAI} onOpenChange={setOpenAI}>\n            <Separator orientation=\"vertical\" />\n            <NodeSelector open={openNode} onOpenChange={setOpenNode} />\n            <Separator orientation=\"vertical\" />\n            <TextButtons />\n            <Separator orientation=\"vertical\" />\n            <ColorSelector open={openColor} onOpenChange={setOpenColor} />\n            <Separator orientation=\"vertical\" />\n            <LinkSelector open={openLink} onOpenChange={setOpenLink} />\n            <Separator orientation=\"vertical\" />\n            <MathSelector />\n          </GenerativeMenuSwitch>\n        </EditorContent>\n      </EditorRoot>\n    </div>\n  );\n};\n\nexport default ReportEditor;\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 7955, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/deer/web/src/app/chat/components/research-report-block.tsx"],"sourcesContent":["// Copyright (c) 2025 Bytedance Ltd. and/or its affiliates\n// SPDX-License-Identifier: MIT\n\nimport { useCallback, useRef } from \"react\";\n\nimport { LoadingAnimation } from \"~/components/deer-flow/loading-animation\";\nimport { Markdown } from \"~/components/deer-flow/markdown\";\nimport ReportEditor from \"~/components/editor\";\nimport { useReplay } from \"~/core/replay\";\nimport { useMessage, useStore } from \"~/core/store\";\nimport { cn } from \"~/lib/utils\";\n\nexport function ResearchReportBlock({\n  className,\n  messageId,\n  editing,\n}: {\n  className?: string;\n  researchId: string;\n  messageId: string;\n  editing: boolean;\n}) {\n  const message = useMessage(messageId);\n  const { isReplay } = useReplay();\n  const handleMarkdownChange = useCallback(\n    (markdown: string) => {\n      if (message) {\n        message.content = markdown;\n        useStore.setState({\n          messages: new Map(useStore.getState().messages).set(\n            message.id,\n            message,\n          ),\n        });\n      }\n    },\n    [message],\n  );\n  const contentRef = useRef<HTMLDivElement>(null);\n  const isCompleted = message?.isStreaming === false && message?.content !== \"\";\n  // TODO: scroll to top when completed, but it's not working\n  // useEffect(() => {\n  //   if (isCompleted && contentRef.current) {\n  //     setTimeout(() => {\n  //       contentRef\n  //         .current!.closest(\"[data-radix-scroll-area-viewport]\")\n  //         ?.scrollTo({\n  //           top: 0,\n  //           behavior: \"smooth\",\n  //         });\n  //     }, 500);\n  //   }\n  // }, [isCompleted]);\n\n  return (\n    <div ref={contentRef} className={cn(\"w-full pt-4 pb-8\", className)}>\n      {!isReplay && isCompleted && editing ? (\n        <ReportEditor\n          content={message?.content}\n          onMarkdownChange={handleMarkdownChange}\n        />\n      ) : (\n        <>\n          <Markdown animated checkLinkCredibility>\n            {message?.content}\n          </Markdown>\n          {message?.isStreaming && <LoadingAnimation className=\"my-12\" />}\n        </>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"AAAA,0DAA0D;AAC1D,+BAA+B;;;;;AAE/B;AAEA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;;;;;;;;;;AAEO,SAAS,oBAAoB,KASnC;QATmC,EAClC,SAAS,EACT,SAAS,EACT,OAAO,EAMR,GATmC;;IAUlC,MAAM,UAAU,CAAA,GAAA,gIAAA,CAAA,aAAU,AAAD,EAAE;IAC3B,MAAM,EAAE,QAAQ,EAAE,GAAG,CAAA,GAAA,iIAAA,CAAA,YAAS,AAAD;IAC7B,MAAM,uBAAuB,CAAA,GAAA,sWAAA,CAAA,cAAW,AAAD;iEACrC,CAAC;YACC,IAAI,SAAS;gBACX,QAAQ,OAAO,GAAG;gBAClB,gIAAA,CAAA,WAAQ,CAAC,QAAQ,CAAC;oBAChB,UAAU,IAAI,IAAI,gIAAA,CAAA,WAAQ,CAAC,QAAQ,GAAG,QAAQ,EAAE,GAAG,CACjD,QAAQ,EAAE,EACV;gBAEJ;YACF;QACF;gEACA;QAAC;KAAQ;IAEX,MAAM,aAAa,CAAA,GAAA,sWAAA,CAAA,SAAM,AAAD,EAAkB;IAC1C,MAAM,cAAc,CAAA,oBAAA,8BAAA,QAAS,WAAW,MAAK,SAAS,CAAA,oBAAA,8BAAA,QAAS,OAAO,MAAK;IAC3E,2DAA2D;IAC3D,oBAAoB;IACpB,6CAA6C;IAC7C,yBAAyB;IACzB,mBAAmB;IACnB,iEAAiE;IACjE,uBAAuB;IACvB,oBAAoB;IACpB,gCAAgC;IAChC,cAAc;IACd,eAAe;IACf,MAAM;IACN,qBAAqB;IAErB,qBACE,sYAAC;QAAI,KAAK;QAAY,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,oBAAoB;kBACrD,CAAC,YAAY,eAAe,wBAC3B,sYAAC,wIAAA,CAAA,UAAY;YACX,OAAO,EAAE,oBAAA,8BAAA,QAAS,OAAO;YACzB,kBAAkB;;;;;iCAGpB;;8BACE,sYAAC,iJAAA,CAAA,WAAQ;oBAAC,QAAQ;oBAAC,oBAAoB;8BACpC,oBAAA,8BAAA,QAAS,OAAO;;;;;;gBAElB,CAAA,oBAAA,8BAAA,QAAS,WAAW,mBAAI,sYAAC,6JAAA,CAAA,mBAAgB;oBAAC,WAAU;;;;;;;;;;;;;AAK/D;GA3DgB;;QAUE,gIAAA,CAAA,aAAU;QACL,iIAAA,CAAA,YAAS;;;KAXhB","debugId":null}},
    {"offset": {"line": 8065, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/deer/web/src/app/chat/components/research-block.tsx"],"sourcesContent":["// Copyright (c) 2025 Bytedance Ltd. and/or its affiliates\n// SPDX-License-Identifier: MIT\n\nimport { Check, Copy, Headphones, Pencil, Undo2, X, Download } from \"lucide-react\";\nimport { useTranslations } from \"next-intl\";\nimport { useCallback, useEffect, useState } from \"react\";\n\nimport { ScrollContainer } from \"~/components/deer-flow/scroll-container\";\nimport { Tooltip } from \"~/components/deer-flow/tooltip\";\nimport { Button } from \"~/components/ui/button\";\nimport { Card } from \"~/components/ui/card\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"~/components/ui/tabs\";\nimport { useReplay } from \"~/core/replay\";\nimport { closeResearch, listenToPodcast, useStore } from \"~/core/store\";\nimport { cn } from \"~/lib/utils\";\n\nimport { ResearchActivitiesBlock } from \"./research-activities-block\";\nimport { ResearchReportBlock } from \"./research-report-block\";\n\nexport function ResearchBlock({\n  className,\n  researchId = null,\n}: {\n  className?: string;\n  researchId: string | null;\n}) {\n  const t = useTranslations(\"chat.research\");\n  const reportId = useStore((state) =>\n    researchId ? state.researchReportIds.get(researchId) : undefined,\n  );\n  const [activeTab, setActiveTab] = useState(\"activities\");\n  const hasReport = useStore((state) =>\n    researchId ? state.researchReportIds.has(researchId) : false,\n  );\n  const reportStreaming = useStore((state) =>\n    reportId ? (state.messages.get(reportId)?.isStreaming ?? false) : false,\n  );\n  const { isReplay } = useReplay();\n  useEffect(() => {\n    if (hasReport) {\n      setActiveTab(\"report\");\n    }\n  }, [hasReport]);\n\n  const handleGeneratePodcast = useCallback(async () => {\n    if (!researchId) {\n      return;\n    }\n    await listenToPodcast(researchId);\n  }, [researchId]);\n\n  const [editing, setEditing] = useState(false);\n  const [copied, setCopied] = useState(false);\n  const handleCopy = useCallback(() => {\n    if (!reportId) {\n      return;\n    }\n    const report = useStore.getState().messages.get(reportId);\n    if (!report) {\n      return;\n    }\n    void navigator.clipboard.writeText(report.content);\n    setCopied(true);\n    setTimeout(() => {\n      setCopied(false);\n    }, 1000);\n  }, [reportId]);\n\n  // Download report as markdown\n  const handleDownload = useCallback(() => {\n    if (!reportId) {\n      return;\n    }\n    const report = useStore.getState().messages.get(reportId);\n    if (!report) {\n      return;\n    }\n    const now = new Date();\n    const pad = (n: number) => n.toString().padStart(2, '0');\n    const timestamp = `${now.getFullYear()}-${pad(now.getMonth() + 1)}-${pad(now.getDate())}_${pad(now.getHours())}-${pad(now.getMinutes())}-${pad(now.getSeconds())}`;\n    const filename = `research-report-${timestamp}.md`;\n    const blob = new Blob([report.content], { type: 'text/markdown' });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = filename;\n    document.body.appendChild(a);\n    a.click();\n    setTimeout(() => {\n      try {\n        if (a.parentNode) {\n          a.parentNode.removeChild(a);\n        }\n      } finally {\n        URL.revokeObjectURL(url);\n      }\n    }, 0);\n  }, [reportId]);\n\n    \n  const handleEdit = useCallback(() => {\n    setEditing((editing) => !editing);\n  }, []);\n\n  // When the research id changes, set the active tab to activities\n  useEffect(() => {\n    if (!hasReport) {\n      setActiveTab(\"activities\");\n    }\n  }, [hasReport, researchId]);\n\n  return (\n    <div className={cn(\"h-full w-full\", className)}>\n      <Card className={cn(\"relative h-full w-full pt-4\", className)}>\n        <div className=\"absolute right-4 flex h-9 items-center justify-center\">\n          {hasReport && !reportStreaming && (\n            <>\n              <Tooltip title={t(\"generatePodcast\")}>\n                <Button\n                  className=\"text-gray-400\"\n                  size=\"icon\"\n                  variant=\"ghost\"\n                  disabled={isReplay}\n                  onClick={handleGeneratePodcast}\n                >\n                  <Headphones />\n                </Button>\n              </Tooltip>\n              <Tooltip title={t(\"edit\")}>\n                <Button\n                  className=\"text-gray-400\"\n                  size=\"icon\"\n                  variant=\"ghost\"\n                  disabled={isReplay}\n                  onClick={handleEdit}\n                >\n                  {editing ? <Undo2 /> : <Pencil />}\n                </Button>\n              </Tooltip>\n              <Tooltip title={t(\"copy\")}>\n                <Button\n                  className=\"text-gray-400\"\n                  size=\"icon\"\n                  variant=\"ghost\"\n                  onClick={handleCopy}\n                >\n                  {copied ? <Check /> : <Copy />}\n                </Button>\n              </Tooltip>\n              <Tooltip title={t(\"downloadReport\")}>\n                <Button\n                  className=\"text-gray-400\"\n                  size=\"icon\"\n                  variant=\"ghost\"\n                  onClick={handleDownload}\n                >\n                  <Download />\n                </Button>\n              </Tooltip>\n            </>\n          )}\n          <Tooltip title={t(\"close\")}>\n            <Button\n              className=\"text-gray-400\"\n              size=\"sm\"\n              variant=\"ghost\"\n              onClick={() => {\n                closeResearch();\n              }}\n            >\n              <X />\n            </Button>\n          </Tooltip>\n        </div>\n        <Tabs\n          className=\"flex h-full w-full flex-col\"\n          value={activeTab}\n          onValueChange={(value) => setActiveTab(value)}\n        >\n          <div className=\"flex w-full justify-center\">\n            <TabsList className=\"\">\n              <TabsTrigger\n                className=\"px-8\"\n                value=\"report\"\n                disabled={!hasReport}\n              >\n                {t(\"report\")}\n              </TabsTrigger>\n              <TabsTrigger className=\"px-8\" value=\"activities\">\n                {t(\"activities\")}\n              </TabsTrigger>\n            </TabsList>\n          </div>\n          <TabsContent\n            className=\"h-full min-h-0 flex-grow px-8\"\n            value=\"report\"\n            forceMount\n            hidden={activeTab !== \"report\"}\n          >\n            <ScrollContainer\n              className=\"px-5pb-20 h-full\"\n              scrollShadowColor=\"var(--card)\"\n              autoScrollToBottom={!hasReport || reportStreaming}\n            >\n              {reportId && researchId && (\n                <ResearchReportBlock\n                  className=\"mt-4\"\n                  researchId={researchId}\n                  messageId={reportId}\n                  editing={editing}\n                />\n              )}\n            </ScrollContainer>\n          </TabsContent>\n          <TabsContent\n            className=\"h-full min-h-0 flex-grow px-8\"\n            value=\"activities\"\n            forceMount\n            hidden={activeTab !== \"activities\"}\n          >\n            <ScrollContainer\n              className=\"h-full\"\n              scrollShadowColor=\"var(--card)\"\n              autoScrollToBottom={!hasReport || reportStreaming}\n            >\n              {researchId && (\n                <ResearchActivitiesBlock\n                  className=\"mt-4\"\n                  researchId={researchId}\n                />\n              )}\n            </ScrollContainer>\n          </TabsContent>\n        </Tabs>\n      </Card>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 8502, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/deer/web/src/app/chat/main.tsx"],"sourcesContent":["// Copyright (c) 2025 Bytedance Ltd. and/or its affiliates\n// SPDX-License-Identifier: MIT\n\n\"use client\";\n\nimport { useMemo } from \"react\";\n\nimport { useStore } from \"~/core/store\";\nimport { cn } from \"~/lib/utils\";\n\nimport { MessagesBlock } from \"./components/messages-block\";\nimport { ResearchBlock } from \"./components/research-block\";\n\nexport default function Main() {\n  const openResearchId = useStore((state) => state.openResearchId);\n  const doubleColumnMode = useMemo(\n    () => openResearchId !== null,\n    [openResearchId],\n  );\n  return (\n    <div\n      className={cn(\n        \"flex h-full w-full justify-center-safe px-4 pt-12 pb-4 text-[15px] md:text-[16px]\",\n        doubleColumnMode && \"gap-8\",\n      )}\n    >\n      <MessagesBlock\n        className={cn(\n          \"shrink-0 transition-all duration-300 ease-out\",\n          !doubleColumnMode &&\n            `w-[768px] translate-x-[min(max(calc((100vw-538px)*0.75),575px)/2,960px/2)]`,\n          doubleColumnMode && `w-[538px]`,\n        )}\n      />\n      <ResearchBlock\n        className={cn(\n          \"w-[min(max(calc((100vw-538px)*0.75),575px),960px)] pb-4 transition-all duration-300 ease-out\",\n          !doubleColumnMode && \"scale-0\",\n          doubleColumnMode && \"\",\n        )}\n        researchId={openResearchId}\n      />\n    </div>\n  );\n}\n"],"names":[],"mappings":"AAAA,0DAA0D;AAC1D,+BAA+B;;;;;AAI/B;AAEA;AAAA;AACA;AAEA;AACA;;;AARA;;;;;;AAUe,SAAS;;IACtB,MAAM,iBAAiB,CAAA,GAAA,gIAAA,CAAA,WAAQ,AAAD;yCAAE,CAAC,QAAU,MAAM,cAAc;;IAC/D,MAAM,mBAAmB,CAAA,GAAA,sWAAA,CAAA,UAAO,AAAD;0CAC7B,IAAM,mBAAmB;yCACzB;QAAC;KAAe;IAElB,qBACE,sYAAC;QACC,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,qFACA,oBAAoB;;0BAGtB,sYAAC,yJAAA,CAAA,gBAAa;gBACZ,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,iDACA,CAAC,oBACE,8EACH,oBAAqB;;;;;;0BAGzB,sYAAC,yJAAA,CAAA,gBAAa;gBACZ,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,gGACA,CAAC,oBAAoB,WACrB,oBAAoB;gBAEtB,YAAY;;;;;;;;;;;;AAIpB;GA/BwB;;QACC,gIAAA,CAAA,WAAQ;;;KADT","debugId":null}}]
}