{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/components/deer-flow/rainbow-text.module.css [app-client] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"animated\": \"rainbow-text-module__D-e5SG__animated\",\n  \"textShine\": \"rainbow-text-module__D-e5SG__textShine\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA"}},
    {"offset": {"line": 14, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/Craft-Agent/web/src/components/deer-flow/rainbow-text.tsx"],"sourcesContent":["// Copyright (c) 2025 Bytedance Ltd. and/or its affiliates\n// SPDX-License-Identifier: MIT\n\nimport { cn } from \"~/lib/utils\";\n\nimport styles from \"./rainbow-text.module.css\";\n\nexport function RainbowText({\n  animated,\n  className,\n  children,\n}: {\n  animated?: boolean;\n  className?: string;\n  children?: React.ReactNode;\n}) {\n  return (\n    <span className={cn(animated && styles.animated, className)}>\n      {children}\n    </span>\n  );\n}\n"],"names":[],"mappings":"AAAA,0DAA0D;AAC1D,+BAA+B;;;;;AAE/B;AAEA;;;;AAEO,SAAS,YAAY,KAQ3B;QAR2B,EAC1B,QAAQ,EACR,SAAS,EACT,QAAQ,EAKT,GAR2B;IAS1B,qBACE,sYAAC;QAAK,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,YAAY,mKAAA,CAAA,UAAM,CAAC,QAAQ,EAAE;kBAC9C;;;;;;AAGP;KAdgB","debugId":null}},
    {"offset": {"line": 48, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/Craft-Agent/web/src/components/ui/card.tsx"],"sourcesContent":["// Copyright (c) 2025 Bytedance Ltd. and/or its affiliates\n// SPDX-License-Identifier: MIT\n\nimport * as React from \"react\"\n\nimport { cn } from \"~/lib/utils\"\n\nfunction Card({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card\"\n      className={cn(\n        \"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-header\"\n      className={cn(\n        \"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardTitle({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-title\"\n      className={cn(\"leading-none font-semibold\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardDescription({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-description\"\n      className={cn(\"text-muted-foreground text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardAction({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-action\"\n      className={cn(\n        \"col-start-2 row-span-2 row-start-1 self-start justify-self-end\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-content\"\n      className={cn(\"px-6\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-footer\"\n      className={cn(\"flex items-center px-6 [.border-t]:pt-6\", className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardAction,\n  CardDescription,\n  CardContent,\n}\n"],"names":[],"mappings":"AAAA,0DAA0D;AAC1D,+BAA+B;;;;;;;;;;;AAI/B;;;AAEA,SAAS,KAAK,KAAoD;QAApD,EAAE,SAAS,EAAE,GAAG,OAAoC,GAApD;IACZ,qBACE,sYAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,qFACA;QAED,GAAG,KAAK;;;;;;AAGf;KAXS;AAaT,SAAS,WAAW,KAAoD;QAApD,EAAE,SAAS,EAAE,GAAG,OAAoC,GAApD;IAClB,qBACE,sYAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,8JACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,UAAU,KAAoD;QAApD,EAAE,SAAS,EAAE,GAAG,OAAoC,GAApD;IACjB,qBACE,sYAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,gBAAgB,KAAoD;QAApD,EAAE,SAAS,EAAE,GAAG,OAAoC,GAApD;IACvB,qBACE,sYAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,WAAW,KAAoD;QAApD,EAAE,SAAS,EAAE,GAAG,OAAoC,GAApD;IAClB,qBACE,sYAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,kEACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,YAAY,KAAoD;QAApD,EAAE,SAAS,EAAE,GAAG,OAAoC,GAApD;IACnB,qBACE,sYAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,QAAQ;QACrB,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,WAAW,KAAoD;QAApD,EAAE,SAAS,EAAE,GAAG,OAAoC,GAApD;IAClB,qBACE,sYAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,2CAA2C;QACxD,GAAG,KAAK;;;;;;AAGf;MARS","debugId":null}},
    {"offset": {"line": 172, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/Craft-Agent/web/src/core/api/hooks.ts"],"sourcesContent":["// Copyright (c) 2025 Bytedance Ltd. and/or its affiliates\n// SPDX-License-Identifier: MIT\n\nimport { useEffect, useRef, useState } from \"react\";\n\nimport { env } from \"~/env\";\n\nimport type { CraftAgentConfig } from \"../config\";\nimport { useReplay } from \"../replay\";\n\nimport { fetchReplayTitle } from \"./chat\";\nimport { resolveServiceURL } from \"./resolve-service-url\";\n\nexport function useReplayMetadata() {\n  const { isReplay } = useReplay();\n  const [title, setTitle] = useState<string | null>(null);\n  const isLoading = useRef(false);\n  const [error, setError] = useState<boolean>(false);\n  useEffect(() => {\n    if (!isReplay) {\n      return;\n    }\n    if (title || isLoading.current) {\n      return;\n    }\n    isLoading.current = true;\n    fetchReplayTitle()\n      .then((title) => {\n        setError(false);\n        setTitle(title ?? null);\n        if (title) {\n          document.title = `${title} - Craft-Agent`;\n        }\n      })\n      .catch(() => {\n        setError(true);\n        setTitle(\"Error: the replay is not available.\");\n        document.title = \"Craft-Agent\";\n      })\n      .finally(() => {\n        isLoading.current = false;\n      });\n  }, [isLoading, isReplay, title]);\n  return { title, isLoading, hasError: error };\n}\n\nconst DEFAULT_CONFIG: CraftAgentConfig = {\n  rag: { provider: \"\" },\n  models: { basic: [], reasoning: [] },\n};\n\nlet configCache: CraftAgentConfig | null = null;\nlet configPromise: Promise<CraftAgentConfig> | null = null;\n\nexport function useConfig(enabled: boolean = true): {\n  config: CraftAgentConfig;\n  loading: boolean;\n} {\n  const [loading, setLoading] = useState(enabled);\n  const [config, setConfig] = useState<CraftAgentConfig>(DEFAULT_CONFIG);\n\n  useEffect(() => {\n    if (!enabled) {\n      setLoading(false);\n      return;\n    }\n\n    if (env.NEXT_PUBLIC_STATIC_WEBSITE_ONLY) {\n      setLoading(false);\n      return;\n    }\n\n    const fetchConfigWithRetry = async (): Promise<CraftAgentConfig> => {\n      const maxRetries = 2;\n      let lastError: Error | null = null;\n\n      for (let attempt = 0; attempt <= maxRetries; attempt++) {\n        try {\n          const res = await fetch(resolveServiceURL(\"./config\"), {\n            signal: AbortSignal.timeout(5000), // 5 second timeout\n          });\n\n          if (!res.ok) {\n            throw new Error(`HTTP ${res.status}: ${res.statusText}`);\n          }\n\n          const configData: CraftAgentConfig = await res.json();\n          return configData; // Success, exit retry loop\n        } catch (err) {\n          lastError = err instanceof Error ? err : new Error(String(err));\n\n          // Log attempt details\n          if (attempt === 0) {\n            const apiUrl = resolveServiceURL(\"./config\");\n            console.warn(\n              `[Config] Failed to fetch from ${apiUrl}: ${lastError.message}`,\n            );\n          }\n\n          // Wait before retrying (exponential backoff: 100ms, 500ms)\n          if (attempt < maxRetries) {\n            const delay = Math.pow(2, attempt) * 100;\n            await new Promise((resolve) => setTimeout(resolve, delay));\n          }\n        }\n      }\n\n      // All retries failed, use default config\n      console.warn(\n        `[Config] Using default config after ${maxRetries + 1} attempts. Last error: ${lastError?.message ?? \"Unknown\"}`,\n      );\n      return DEFAULT_CONFIG;\n    };\n\n    const loadConfig = async () => {\n      try {\n        if (!configPromise) {\n          configPromise = fetchConfigWithRetry().then((cfg) => {\n            configCache = cfg;\n            return cfg;\n          });\n        }\n\n        const cfg = await configPromise;\n        setConfig(cfg);\n      } catch (error) {\n        console.warn(\n          \"[Config] Using default config because fetch failed in hook:\",\n          error,\n        );\n        setConfig(DEFAULT_CONFIG);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    if (configCache) {\n      setConfig(configCache);\n      setLoading(false);\n      return;\n    }\n\n    void loadConfig();\n  }, [enabled]);\n\n  return { config, loading };\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 349, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/Craft-Agent/web/src/components/deer-flow/icons/detective.tsx"],"sourcesContent":["export function Detective({ className }: { className?: string }) {\n  return (\n    <svg\n      className={className}\n      version=\"1.1\"\n      width=\"800px\"\n      height=\"800px\"\n      viewBox=\"0 0 512 512\"\n    >\n      <g fill=\"currentcolor\">\n        <path\n          d=\"M392.692,257.322c-1.172-8.125-2.488-16.98-3.807-25.984c-5.856-39.012-12.59-81.688-14.86-87.832\n\t\tc-4.318-11.715-18.371-44.723-68.217-25.984c-15.738,5.926-18.812,11.93-41.648,8.93c-17.273-2.27-28.326-15.59-52.336-24.668\n\t\tc-49.844-18.883-71.584,11.711-75.902,23.422c-2.27,6.148-9.004,67.121-14.86,106.133c-1.39,8.86-2.633,17.566-3.804,25.621\n\t\tc37.256,7.535,84.174,12.879,138.705,12.879C309.541,269.837,355.801,264.716,392.692,257.322z\"\n        />\n        <path\n          d=\"M443.707,306.509c-8.051-2.196-16.834-4.246-26.057-6.148c-1.83-0.805-3.66-1.535-5.49-2.27h-0.072\n\t\tc-46.918,10.394-102.254,15.664-156.125,15.664c-53.652,0-108.768-5.27-155.541-15.516c-1.316,0.512-2.707,1.098-4.098,1.684\n\t\tc-8.858,1.828-17.348,3.73-25.106,5.781l-0.148,0.074C27.008,317.49,0,333.372,0,350.939c0,36.012,114.549,65.289,256.035,65.289\n\t\tc141.34,0,255.965-29.278,255.965-65.289C512,333.74,486.016,318.22,443.707,306.509z\"\n        />\n      </g>\n    </svg>\n  );\n}\n"],"names":[],"mappings":";;;;;AAAO,SAAS,UAAU,KAAqC;QAArC,EAAE,SAAS,EAA0B,GAArC;IACxB,qBACE,sYAAC;QACC,WAAW;QACX,SAAQ;QACR,OAAM;QACN,QAAO;QACP,SAAQ;kBAER,cAAA,sYAAC;YAAE,MAAK;;8BACN,sYAAC;oBACC,GAAE;;;;;;8BAKJ,sYAAC;oBACC,GAAE;;;;;;;;;;;;;;;;;AAQZ;KAzBgB","debugId":null}},
    {"offset": {"line": 403, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/Craft-Agent/web/src/components/deer-flow/resource-mentions.tsx"],"sourcesContent":["// Copyright (c) 2025 Bytedance Ltd. and/or its affiliates\n// SPDX-License-Identifier: MIT\n\nimport { useTranslations } from \"next-intl\";\nimport { forwardRef, useEffect, useImperativeHandle, useState } from \"react\";\nimport type { Resource } from \"~/core/messages\";\nimport { cn } from \"~/lib/utils\";\n\nexport interface ResourceMentionsProps {\n  items: Array<Resource>;\n  command: (item: { id: string; label: string }) => void;\n}\n\nexport const ResourceMentions = forwardRef<\n  { onKeyDown: (args: { event: KeyboardEvent }) => boolean },\n  ResourceMentionsProps\n>((props, ref) => {\n  const t = useTranslations(\"common\")\n  const [selectedIndex, setSelectedIndex] = useState(0);\n\n  const selectItem = (index: number) => {\n    const item = props.items[index];\n\n    if (item) {\n      props.command({ id: item.uri, label: item.title });\n    }\n  };\n\n  const upHandler = () => {\n    setSelectedIndex(\n      (selectedIndex + props.items.length - 1) % props.items.length,\n    );\n  };\n\n  const downHandler = () => {\n    setSelectedIndex((selectedIndex + 1) % props.items.length);\n  };\n\n  const enterHandler = () => {\n    selectItem(selectedIndex);\n  };\n\n  useEffect(() => setSelectedIndex(0), [props.items]);\n\n  useImperativeHandle(ref, () => ({\n    onKeyDown: ({ event }) => {\n      if (event.key === \"ArrowUp\") {\n        upHandler();\n        return true;\n      }\n\n      if (event.key === \"ArrowDown\") {\n        downHandler();\n        return true;\n      }\n\n      if (event.key === \"Enter\") {\n        enterHandler();\n        return true;\n      }\n\n      return false;\n    },\n  }));\n\n  return (\n    <div className=\"bg-card border-var(--border) relative flex flex-col gap-1 overflow-auto rounded-md border p-2 shadow\">\n      {props.items.length ? (\n        props.items.map((item, index) => (\n          <button\n            className={cn(\n              \"focus-visible:ring-ring hover:bg-accent hover:text-accent-foreground inline-flex h-9 w-full items-center justify-start gap-2 rounded-md px-4 py-2 text-sm whitespace-nowrap transition-colors focus-visible:ring-1 focus-visible:outline-none disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n              selectedIndex === index &&\n                \"bg-secondary text-secondary-foreground\",\n            )}\n            key={index}\n            onClick={() => selectItem(index)}\n          >\n            {item.title}\n          </button>\n        ))\n      ) : (\n        <div className=\"items-center justify-center text-gray-500\">\n          {t(\"noResult\")}\n        </div>\n      )}\n    </div>\n  );\n});\n"],"names":[],"mappings":"AAAA,0DAA0D;AAC1D,+BAA+B;;;;;AAE/B;AACA;AAEA;;;;;;AAOO,MAAM,iCAAmB,GAAA,CAAA,GAAA,sWAAA,CAAA,aAAU,AAAD,UAGvC,CAAC,OAAO;;IACR,MAAM,IAAI,CAAA,GAAA,8ZAAA,CAAA,kBAAe,AAAD,EAAE;IAC1B,MAAM,CAAC,eAAe,iBAAiB,GAAG,CAAA,GAAA,sWAAA,CAAA,WAAQ,AAAD,EAAE;IAEnD,MAAM,aAAa,CAAC;QAClB,MAAM,OAAO,MAAM,KAAK,CAAC,MAAM;QAE/B,IAAI,MAAM;YACR,MAAM,OAAO,CAAC;gBAAE,IAAI,KAAK,GAAG;gBAAE,OAAO,KAAK,KAAK;YAAC;QAClD;IACF;IAEA,MAAM,YAAY;QAChB,iBACE,CAAC,gBAAgB,MAAM,KAAK,CAAC,MAAM,GAAG,CAAC,IAAI,MAAM,KAAK,CAAC,MAAM;IAEjE;IAEA,MAAM,cAAc;QAClB,iBAAiB,CAAC,gBAAgB,CAAC,IAAI,MAAM,KAAK,CAAC,MAAM;IAC3D;IAEA,MAAM,eAAe;QACnB,WAAW;IACb;IAEA,CAAA,GAAA,sWAAA,CAAA,YAAS,AAAD;sCAAE,IAAM,iBAAiB;qCAAI;QAAC,MAAM,KAAK;KAAC;IAElD,CAAA,GAAA,sWAAA,CAAA,sBAAmB,AAAD,EAAE;gDAAK,IAAM,CAAC;gBAC9B,SAAS;4DAAE;4BAAC,EAAE,KAAK,EAAE;wBACnB,IAAI,MAAM,GAAG,KAAK,WAAW;4BAC3B;4BACA,OAAO;wBACT;wBAEA,IAAI,MAAM,GAAG,KAAK,aAAa;4BAC7B;4BACA,OAAO;wBACT;wBAEA,IAAI,MAAM,GAAG,KAAK,SAAS;4BACzB;4BACA,OAAO;wBACT;wBAEA,OAAO;oBACT;;YACF,CAAC;;IAED,qBACE,sYAAC;QAAI,WAAU;kBACZ,MAAM,KAAK,CAAC,MAAM,GACjB,MAAM,KAAK,CAAC,GAAG,CAAC,CAAC,MAAM,sBACrB,sYAAC;gBACC,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,8VACA,kBAAkB,SAChB;gBAGJ,SAAS,IAAM,WAAW;0BAEzB,KAAK,KAAK;eAHN;;;;0EAOT,sYAAC;YAAI,WAAU;sBACZ,EAAE;;;;;;;;;;;AAKb;;QAvEY,8ZAAA,CAAA,kBAAe;;;;QAAf,8ZAAA,CAAA,kBAAe","debugId":null}},
    {"offset": {"line": 511, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/Craft-Agent/web/src/components/deer-flow/resource-suggestion.tsx"],"sourcesContent":["// Copyright (c) 2025 Bytedance Ltd. and/or its affiliates\n// SPDX-License-Identifier: MIT\n\nimport type { MentionOptions } from \"@tiptap/extension-mention\";\nimport { ReactRenderer } from \"@tiptap/react\";\nimport {\n  ResourceMentions,\n  type ResourceMentionsProps,\n} from \"./resource-mentions\";\nimport type { Instance, Props } from \"tippy.js\";\nimport tippy from \"tippy.js\";\nimport { resolveServiceURL } from \"~/core/api/resolve-service-url\";\nimport type { Resource } from \"~/core/messages\";\n\nexport const resourceSuggestion: MentionOptions[\"suggestion\"] = {\n  items: ({ query }) => {\n    return fetch(resolveServiceURL(`rag/resources?query=${query}`), {\n      method: \"GET\",\n    })\n      .then((res) => res.json())\n      .then((res) => {\n        return res.resources as Array<Resource>;\n      })\n      .catch((err) => {\n        return [];\n      });\n  },\n\n  render: () => {\n    let reactRenderer: ReactRenderer<\n      { onKeyDown: (args: { event: KeyboardEvent }) => boolean },\n      ResourceMentionsProps\n    >;\n    let popup: Instance<Props>[] | null = null;\n\n    return {\n      onStart: (props) => {\n        reactRenderer = new ReactRenderer(ResourceMentions, {\n          props,\n          editor: props.editor,\n        });\n\n        const clientRect = props.clientRect || (() => {\n          const selection = props.editor.state.selection;\n          const coords = props.editor.view.coordsAtPos(selection.from);\n          return {\n            top: coords.top,\n            left: coords.left,\n            right: coords.right,\n            bottom: coords.bottom,\n            width: 0,\n            height: 0,\n          };\n        });\n\n        popup = tippy(\"body\", {\n          getReferenceClientRect: clientRect as any,\n          appendTo: () => document.body,\n          content: reactRenderer.element,\n          showOnCreate: true,\n          interactive: true,\n          trigger: \"manual\",\n          placement: \"top-start\",\n        });\n      },\n\n      onUpdate(props) {\n        if (reactRenderer) {\n          reactRenderer.updateProps(props);\n        }\n\n        if (popup?.[0] && !popup[0].state.isDestroyed) {\n          const clientRect = props.clientRect || (() => {\n            const selection = props.editor.state.selection;\n            const coords = props.editor.view.coordsAtPos(selection.from);\n            return {\n              top: coords.top,\n              left: coords.left,\n              right: coords.right,\n              bottom: coords.bottom,\n              width: 0,\n              height: 0,\n            };\n          });\n          \n          popup[0].setProps({\n            getReferenceClientRect: clientRect as any,\n          });\n        }\n      },\n\n      onKeyDown(props) {\n        if (props.event.key === \"Escape\") {\n          popup?.[0]?.hide();\n\n          return true;\n        }\n\n        return reactRenderer.ref?.onKeyDown(props) ?? false;\n      },\n\n      onExit() {\n        popup?.[0]?.destroy();\n        reactRenderer.destroy();\n      },\n    };\n  },\n};\n"],"names":[],"mappings":"AAAA,0DAA0D;AAC1D,+BAA+B;;;;AAG/B;AACA;AAKA;AACA;;;;;AAGO,MAAM,qBAAmD;IAC9D,OAAO;YAAC,EAAE,KAAK,EAAE;QACf,OAAO,MAAM,CAAA,GAAA,kJAAA,CAAA,oBAAiB,AAAD,EAAE,AAAC,uBAA4B,OAAN,SAAU;YAC9D,QAAQ;QACV,GACG,IAAI,CAAC,CAAC,MAAQ,IAAI,IAAI,IACtB,IAAI,CAAC,CAAC;YACL,OAAO,IAAI,SAAS;QACtB,GACC,KAAK,CAAC,CAAC;YACN,OAAO,EAAE;QACX;IACJ;IAEA,QAAQ;QACN,IAAI;QAIJ,IAAI,QAAkC;QAEtC,OAAO;YACL,SAAS,CAAC;gBACR,gBAAgB,IAAI,yXAAA,CAAA,gBAAa,CAAC,6JAAA,CAAA,mBAAgB,EAAE;oBAClD;oBACA,QAAQ,MAAM,MAAM;gBACtB;gBAEA,MAAM,aAAa,MAAM,UAAU,IAAI,CAAC;oBACtC,MAAM,YAAY,MAAM,MAAM,CAAC,KAAK,CAAC,SAAS;oBAC9C,MAAM,SAAS,MAAM,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,UAAU,IAAI;oBAC3D,OAAO;wBACL,KAAK,OAAO,GAAG;wBACf,MAAM,OAAO,IAAI;wBACjB,OAAO,OAAO,KAAK;wBACnB,QAAQ,OAAO,MAAM;wBACrB,OAAO;wBACP,QAAQ;oBACV;gBACF,CAAC;gBAED,QAAQ,CAAA,GAAA,8MAAA,CAAA,UAAK,AAAD,EAAE,QAAQ;oBACpB,wBAAwB;oBACxB,UAAU,IAAM,SAAS,IAAI;oBAC7B,SAAS,cAAc,OAAO;oBAC9B,cAAc;oBACd,aAAa;oBACb,SAAS;oBACT,WAAW;gBACb;YACF;YAEA,UAAS,KAAK;gBACZ,IAAI,eAAe;oBACjB,cAAc,WAAW,CAAC;gBAC5B;gBAEA,IAAI,CAAA,kBAAA,4BAAA,KAAO,CAAC,EAAE,KAAI,CAAC,KAAK,CAAC,EAAE,CAAC,KAAK,CAAC,WAAW,EAAE;oBAC7C,MAAM,aAAa,MAAM,UAAU,IAAI,CAAC;wBACtC,MAAM,YAAY,MAAM,MAAM,CAAC,KAAK,CAAC,SAAS;wBAC9C,MAAM,SAAS,MAAM,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,UAAU,IAAI;wBAC3D,OAAO;4BACL,KAAK,OAAO,GAAG;4BACf,MAAM,OAAO,IAAI;4BACjB,OAAO,OAAO,KAAK;4BACnB,QAAQ,OAAO,MAAM;4BACrB,OAAO;4BACP,QAAQ;wBACV;oBACF,CAAC;oBAED,KAAK,CAAC,EAAE,CAAC,QAAQ,CAAC;wBAChB,wBAAwB;oBAC1B;gBACF;YACF;YAEA,WAAU,KAAK;oBAON;gBANP,IAAI,MAAM,KAAK,CAAC,GAAG,KAAK,UAAU;wBAChC;oBAAA,kBAAA,6BAAA,UAAA,KAAO,CAAC,EAAE,cAAV,8BAAA,QAAY,IAAI;oBAEhB,OAAO;gBACT;oBAEO;gBAAP,OAAO,CAAA,gCAAA,qBAAA,cAAc,GAAG,cAAjB,yCAAA,mBAAmB,SAAS,CAAC,oBAA7B,0CAAA,+BAAuC;YAChD;YAEA;oBACE;gBAAA,kBAAA,6BAAA,UAAA,KAAO,CAAC,EAAE,cAAV,8BAAA,QAAY,OAAO;gBACnB,cAAc,OAAO;YACvB;QACF;IACF;AACF","debugId":null}},
    {"offset": {"line": 615, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/Craft-Agent/web/src/components/deer-flow/message-input.tsx"],"sourcesContent":["// Copyright (c) 2025 Bytedance Ltd. and/or its affiliates\n// SPDX-License-Identifier: MIT\n\n\"use client\";\n\nimport Mention from \"@tiptap/extension-mention\";\nimport { Editor, Extension, type Content } from \"@tiptap/react\";\nimport {\n  EditorContent,\n  type EditorInstance,\n  EditorRoot,\n  type JSONContent,\n  StarterKit,\n  Placeholder,\n} from \"novel\";\nimport { Markdown } from \"tiptap-markdown\";\nimport { useDebouncedCallback } from \"use-debounce\";\nimport { useTranslations } from \"next-intl\";\n\nimport \"~/styles/prosemirror.css\";\nimport { resourceSuggestion } from \"./resource-suggestion\";\nimport React, { forwardRef, useEffect, useMemo, useRef } from \"react\";\nimport type { Resource } from \"~/core/messages\";\nimport { LoadingOutlined } from \"@ant-design/icons\";\nimport type { CraftAgentConfig } from \"~/core/config\";\n\nexport interface MessageInputRef {\n  focus: () => void;\n  submit: () => void;\n  setContent: (content: string) => void;\n}\n\nexport interface MessageInputProps {\n  className?: string;\n  placeholder?: string;\n  loading?: boolean;\n  config?: CraftAgentConfig | null;\n  onChange?: (markdown: string) => void;\n  onEnter?: (message: string, resources: Array<Resource>) => void;\n}\n\nfunction formatMessage(content: JSONContent) {\n  if (content.content) {\n    const output: {\n      text: string;\n      resources: Array<Resource>;\n    } = {\n      text: \"\",\n      resources: [],\n    };\n    for (const node of content.content) {\n      const { text, resources } = formatMessage(node);\n      output.text += text;\n      output.resources.push(...resources);\n    }\n    return output;\n  } else {\n    return formatItem(content);\n  }\n}\n\nfunction formatItem(item: JSONContent): {\n  text: string;\n  resources: Array<Resource>;\n} {\n  if (item.type === \"text\") {\n    return { text: item.text ?? \"\", resources: [] };\n  }\n  if (item.type === \"mention\") {\n    return {\n      text: `[${item.attrs?.label}](${item.attrs?.id})`,\n      resources: [\n        { uri: item.attrs?.id ?? \"\", title: item.attrs?.label ?? \"\" },\n      ],\n    };\n  }\n  return { text: \"\", resources: [] };\n}\n\nconst MessageInput = forwardRef<MessageInputRef, MessageInputProps>(\n  (\n    {\n      className,\n      placeholder,\n      loading,\n      config,\n      onChange,\n      onEnter,\n    }: MessageInputProps,\n    ref,\n  ) => {\n    const t = useTranslations(\"messageInput\");\n    const editorRef = useRef<Editor>(null);\n    const handleEnterRef = useRef<\n      ((message: string, resources: Array<Resource>) => void) | undefined\n    >(onEnter);\n    const debouncedUpdates = useDebouncedCallback(\n      async (editor: EditorInstance) => {\n        if (onChange) {\n          // Get the plain text content for prompt enhancement\n          const { text } = formatMessage(editor.getJSON() ?? []);\n          onChange(text);\n        }\n      },\n      200,\n    );\n\n    React.useImperativeHandle(ref, () => ({\n      focus: () => {\n        editorRef.current?.view.focus();\n      },\n      submit: () => {\n        if (onEnter) {\n          const { text, resources } = formatMessage(\n            editorRef.current?.getJSON() ?? [],\n          );\n          onEnter(text, resources);\n        }\n        editorRef.current?.commands.clearContent();\n      },\n      setContent: (content: string) => {\n        if (editorRef.current) {\n          editorRef.current.commands.setContent(content);\n        }\n      },\n    }));\n\n    useEffect(() => {\n      handleEnterRef.current = onEnter;\n    }, [onEnter]);\n\n    const placeholderText = useMemo(\n      () =>\n        placeholder ??\n        (config?.rag?.provider ? t(\"placeholderWithRag\") : t(\"placeholder\")),\n      [config?.rag?.provider, t, placeholder],\n    );\n\n    const extensions = useMemo(() => {\n      const extensions = [\n        StarterKit,\n        Markdown.configure({\n          html: true,\n          tightLists: true,\n          tightListClass: \"tight\",\n          bulletListMarker: \"-\",\n          linkify: false,\n          breaks: false,\n          transformPastedText: false,\n          transformCopiedText: false,\n        }),\n        Placeholder.configure({\n          showOnlyCurrent: false,\n          placeholder: placeholderText,\n          emptyEditorClass: \"placeholder\",\n        }),\n        Extension.create({\n          name: \"keyboardHandler\",\n          addKeyboardShortcuts() {\n            return {\n              Enter: () => {\n                if (handleEnterRef.current) {\n                  const { text, resources } = formatMessage(\n                    this.editor.getJSON() ?? [],\n                  );\n                  handleEnterRef.current(text, resources);\n                }\n                return this.editor.commands.clearContent();\n              },\n            };\n          },\n        }),\n      ];\n      if (config?.rag?.provider) {\n        extensions.push(\n          Mention.configure({\n            HTMLAttributes: {\n              class: \"mention\",\n            },\n            suggestion: resourceSuggestion,\n          }) as Extension,\n        );\n      }\n      return extensions;\n    }, [config, placeholderText]);\n\n    if (loading) {\n      return (\n        <div className={className}>\n          <LoadingOutlined />\n        </div>\n      );\n    }\n\n    return (\n      <div className={className}>\n        <EditorRoot>\n          <EditorContent\n            immediatelyRender={false}\n            extensions={extensions}\n            className=\"border-muted h-full w-full overflow-auto break-words\"\n            editorProps={{\n              attributes: {\n                class:\n                  \"prose prose-base dark:prose-invert inline-editor font-default focus:outline-none max-w-full\",\n              },\n              transformPastedHTML: transformPastedHTML,\n            }}\n            onCreate={({ editor }) => {\n              editorRef.current = editor;\n            }}\n            onUpdate={({ editor }) => {\n              debouncedUpdates(editor);\n            }}\n          ></EditorContent>\n        </EditorRoot>\n      </div>\n    );\n  },\n);\n\nfunction transformPastedHTML(html: string) {\n  try {\n    // Strip HTML from user-pasted content\n    const tempEl = document.createElement(\"div\");\n    tempEl.innerHTML = html;\n\n    return tempEl.textContent || tempEl.innerText || \"\";\n  } catch (error) {\n    console.error(\"Error transforming pasted HTML\", error);\n\n    return \"\";\n  }\n}\n\nexport default MessageInput;\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 887, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/Craft-Agent/web/src/components/deer-flow/report-style-dialog.tsx"],"sourcesContent":["// Copyright (c) 2025 Bytedance Ltd. and/or its affiliates\n// SPDX-License-Identifier: MIT\n\nimport { useTranslations } from \"next-intl\";\nimport { useState } from \"react\";\nimport { Check, FileText, Newspaper, Users, GraduationCap, TrendingUp } from \"lucide-react\";\n\nimport { Button } from \"~/components/ui/button\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogHeader,\n  DialogTitle,\n  DialogTrigger,\n} from \"~/components/ui/dialog\";\nimport { setReportStyle, useSettingsStore } from \"~/core/store\";\nimport { cn } from \"~/lib/utils\";\n\nimport { Tooltip } from \"./tooltip\";\n\nconst REPORT_STYLES = [\n  {\n    value: \"academic\" as const,\n    labelKey: \"academic\",\n    descriptionKey: \"academicDesc\",\n    icon: GraduationCap,\n  },\n  {\n    value: \"popular_science\" as const,\n    labelKey: \"popularScience\",\n    descriptionKey: \"popularScienceDesc\",\n    icon: FileText,\n  },\n  {\n    value: \"news\" as const,\n    labelKey: \"news\",\n    descriptionKey: \"newsDesc\",\n    icon: Newspaper,\n  },\n  {\n    value: \"social_media\" as const,\n    labelKey: \"socialMedia\",\n    descriptionKey: \"socialMediaDesc\",\n    icon: Users,\n  },\n  {\n    value: \"strategic_investment\" as const,\n    labelKey: \"strategicInvestment\",\n    descriptionKey: \"strategicInvestmentDesc\",\n    icon: TrendingUp,\n  },\n];\n\nexport function ReportStyleDialog() {\n  const t = useTranslations(\"settings.reportStyle\");\n  const [open, setOpen] = useState(false);\n  const currentStyle = useSettingsStore((state) => state.general.reportStyle);\n\n  const handleStyleChange = (\n    style: \"academic\" | \"popular_science\" | \"news\" | \"social_media\" | \"strategic_investment\",\n  ) => {\n    setReportStyle(style);\n    setOpen(false);\n  };\n\n  const currentStyleConfig =\n    REPORT_STYLES.find((style) => style.value === currentStyle) ||\n    REPORT_STYLES[0]!;\n  const CurrentIcon = currentStyleConfig.icon;\n\n  return (\n    <Dialog open={open} onOpenChange={setOpen}>\n      <Tooltip\n        className=\"max-w-60\"\n        title={\n          <div>\n            <h3 className=\"mb-2 font-bold\">\n              {t(\"writingStyle\")}: {t(currentStyleConfig.labelKey)}\n            </h3>\n            <p>{t(\"chooseDesc\")}</p>\n          </div>\n        }\n      >\n        <DialogTrigger asChild>\n          <Button\n            className=\"!border-brand !text-brand rounded-2xl\"\n            variant=\"outline\"\n          >\n            <CurrentIcon className=\"h-4 w-4\" /> {t(currentStyleConfig.labelKey)}\n          </Button>\n        </DialogTrigger>\n      </Tooltip>\n      <DialogContent className=\"sm:max-w-[500px]\">\n        <DialogHeader>\n          <DialogTitle>{t(\"chooseTitle\")}</DialogTitle>\n          <DialogDescription>{t(\"chooseDesc\")}</DialogDescription>\n        </DialogHeader>\n        <div className=\"grid gap-3 py-4\">\n          {REPORT_STYLES.map((style) => {\n            const Icon = style.icon;\n            const isSelected = currentStyle === style.value;\n\n            return (\n              <button\n                key={style.value}\n                className={cn(\n                  \"hover:bg-accent flex items-start gap-3 rounded-lg border p-4 text-left transition-colors\",\n                  isSelected && \"border-primary bg-accent\",\n                )}\n                onClick={() => handleStyleChange(style.value)}\n              >\n                <Icon className=\"mt-0.5 h-5 w-5 shrink-0\" />\n                <div className=\"flex-1 space-y-1\">\n                  <div className=\"flex items-center gap-2\">\n                    <h4 className=\"font-medium\">{t(style.labelKey)}</h4>\n                    {isSelected && <Check className=\"text-primary h-4 w-4\" />}\n                  </div>\n                  <p className=\"text-muted-foreground text-sm\">\n                    {t(style.descriptionKey)}\n                  </p>\n                </div>\n              </button>\n            );\n          })}\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1151, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/Craft-Agent/web/src/components/magicui/border-beam.tsx"],"sourcesContent":["\"use client\";\n\nimport { cn } from \"~/lib/utils\";\nimport { motion, type MotionStyle, type Transition } from \"motion/react\";\n\ninterface BorderBeamProps {\n  /**\n   * The size of the border beam.\n   */\n  size?: number;\n  /**\n   * The duration of the border beam.\n   */\n  duration?: number;\n  /**\n   * The delay of the border beam.\n   */\n  delay?: number;\n  /**\n   * The color of the border beam from.\n   */\n  colorFrom?: string;\n  /**\n   * The color of the border beam to.\n   */\n  colorTo?: string;\n  /**\n   * The motion transition of the border beam.\n   */\n  transition?: Transition;\n  /**\n   * The class name of the border beam.\n   */\n  className?: string;\n  /**\n   * The style of the border beam.\n   */\n  style?: React.CSSProperties;\n  /**\n   * Whether to reverse the animation direction.\n   */\n  reverse?: boolean;\n  /**\n   * The initial offset position (0-100).\n   */\n  initialOffset?: number;\n}\n\nexport const BorderBeam = ({\n  className,\n  size = 50,\n  delay = 0,\n  duration = 6,\n  colorFrom = \"#ffaa40\",\n  colorTo = \"#9c40ff\",\n  transition,\n  style,\n  reverse = false,\n  initialOffset = 0,\n}: BorderBeamProps) => {\n  return (\n    <div className=\"pointer-events-none absolute inset-0 rounded-[inherit] border border-transparent [mask-image:linear-gradient(transparent,transparent),linear-gradient(#000,#000)] [mask-composite:intersect] [mask-clip:padding-box,border-box]\">\n      <motion.div\n        className={cn(\n          \"absolute aspect-square\",\n          \"bg-gradient-to-l from-[var(--color-from)] via-[var(--color-to)] to-transparent\",\n          className,\n        )}\n        style={\n          {\n            width: size,\n            offsetPath: `rect(0 auto auto 0 round ${size}px)`,\n            \"--color-from\": colorFrom,\n            \"--color-to\": colorTo,\n            ...style,\n          } as MotionStyle\n        }\n        initial={{ offsetDistance: `${initialOffset}%` }}\n        animate={{\n          offsetDistance: reverse\n            ? [`${100 - initialOffset}%`, `${-initialOffset}%`]\n            : [`${initialOffset}%`, `${100 + initialOffset}%`],\n        }}\n        transition={{\n          repeat: Infinity,\n          ease: \"linear\",\n          duration,\n          delay: -delay,\n          ...transition,\n        }}\n      />\n    </div>\n  );\n};\n"],"names":[],"mappings":";;;;AAEA;AACA;AAHA;;;;AAgDO,MAAM,aAAa;QAAC,EACzB,SAAS,EACT,OAAO,EAAE,EACT,QAAQ,CAAC,EACT,WAAW,CAAC,EACZ,YAAY,SAAS,EACrB,UAAU,SAAS,EACnB,UAAU,EACV,KAAK,EACL,UAAU,KAAK,EACf,gBAAgB,CAAC,EACD;IAChB,qBACE,sYAAC;QAAI,WAAU;kBACb,cAAA,sYAAC,sVAAA,CAAA,SAAM,CAAC,GAAG;YACT,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,0BACA,kFACA;YAEF,OACE;gBACE,OAAO;gBACP,YAAY,AAAC,4BAAgC,OAAL,MAAK;gBAC7C,gBAAgB;gBAChB,cAAc;gBACd,GAAG,KAAK;YACV;YAEF,SAAS;gBAAE,gBAAgB,AAAC,GAAgB,OAAd,eAAc;YAAG;YAC/C,SAAS;gBACP,gBAAgB,UACZ;oBAAE,GAAsB,OAApB,MAAM,eAAc;oBAAK,GAAiB,OAAf,CAAC,eAAc;iBAAG,GACjD;oBAAE,GAAgB,OAAd,eAAc;oBAAK,GAAsB,OAApB,MAAM,eAAc;iBAAG;YACtD;YACA,YAAY;gBACV,QAAQ;gBACR,MAAM;gBACN;gBACA,OAAO,CAAC;gBACR,GAAG,UAAU;YACf;;;;;;;;;;;AAIR;KA7Ca","debugId":null}},
    {"offset": {"line": 1216, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/Craft-Agent/web/src/app/chat/components/input-box.tsx"],"sourcesContent":["// Copyright (c) 2025 Bytedance Ltd. and/or its affiliates\n// SPDX-License-Identifier: MIT\n\nimport { MagicWandIcon } from \"@radix-ui/react-icons\";\nimport { AnimatePresence, motion } from \"framer-motion\";\nimport { ArrowUp, Lightbulb, X } from \"lucide-react\";\nimport { useTranslations } from \"next-intl\";\nimport { useCallback, useRef, useState } from \"react\";\n\nimport { Detective } from \"~/components/deer-flow/icons/detective\";\nimport MessageInput, {\n  type MessageInputRef,\n} from \"~/components/deer-flow/message-input\";\nimport { ReportStyleDialog } from \"~/components/deer-flow/report-style-dialog\";\nimport { Tooltip } from \"~/components/deer-flow/tooltip\";\nimport { BorderBeam } from \"~/components/magicui/border-beam\";\nimport { Button } from \"~/components/ui/button\";\nimport { enhancePrompt } from \"~/core/api\";\nimport { useConfig } from \"~/core/api/hooks\";\nimport type { Option, Resource } from \"~/core/messages\";\nimport {\n  setEnableDeepThinking,\n  setEnableBackgroundInvestigation,\n  useSettingsStore,\n  useStore,\n} from \"~/core/store\";\nimport { cn } from \"~/lib/utils\";\n\nexport function InputBox({\n  className,\n  responding,\n  feedback,\n  onSend,\n  onCancel,\n  onRemoveFeedback,\n  showModeToggles = true,\n  placeholder,\n  enableConfig = true,\n}: {\n  className?: string;\n  size?: \"large\" | \"normal\";\n  responding?: boolean;\n  feedback?: { option: Option } | null;\n  onSend?: (\n    message: string,\n    options?: {\n      interruptFeedback?: string;\n      resources?: Array<Resource>;\n    },\n  ) => void;\n  onCancel?: () => void;\n  onRemoveFeedback?: () => void;\n  showModeToggles?: boolean;\n  placeholder?: string;\n  enableConfig?: boolean;\n}) {\n  const t = useTranslations(\"chat.inputBox\");\n  const tCommon = useTranslations(\"common\");\n  const enableDeepThinking = useSettingsStore(\n    (state) => state.general.enableDeepThinking,\n  );\n  const backgroundInvestigation = useSettingsStore(\n    (state) => state.general.enableBackgroundInvestigation,\n  );\n  const { config, loading } = useConfig(enableConfig);\n  const reportStyle = useSettingsStore((state) => state.general.reportStyle);\n  const containerRef = useRef<HTMLDivElement>(null);\n  const inputRef = useRef<MessageInputRef>(null);\n  const feedbackRef = useRef<HTMLDivElement>(null);\n\n  // Listen to inputContent from store\n  const inputContent = useStore((state) => state.inputContent);\n  const setInputContent = useStore((state) => state.setInputContent);\n\n  // Effect: Update input when store content changes\n  useState(() => {\n    // This is actually better as useEffect, but since we are in a component body...\n    // Let's use a proper useEffect\n  });\n  \n  // Using useEffect to sync store content to input\n  // eslint-disable-next-line react-hooks/rules-of-hooks\n  const React = require(\"react\");\n  React.useEffect(() => {\n    if (inputContent && inputRef.current) {\n      const currentVal = inputRef.current.getContent?.() || \"\";\n      // If content is different, append or set?\n      // The requirement is \"add to input box\". So we append.\n      // But store might just set it. Let's assume store sets the *increment* or *full new content*?\n      // To keep it simple: if store has content, we append it to current input, then clear store.\n      \n      // Wait, usually this pattern means \"set the value\".\n      // If we want to append, the caller should manage that or we append here.\n      // Let's append here to be safe for \"add element info\" use case.\n      \n      const newVal = currentVal ? `${currentVal}\\n${inputContent}` : inputContent;\n      inputRef.current.setContent(newVal);\n      setCurrentPrompt(newVal);\n      \n      // Clear the store so we don't re-add it\n      setInputContent(\"\");\n    }\n  }, [inputContent, setInputContent]);\n\n  // Enhancement state\n  const [isEnhancing, setIsEnhancing] = useState(false);\n  const [isEnhanceAnimating, setIsEnhanceAnimating] = useState(false);\n  const [currentPrompt, setCurrentPrompt] = useState(\"\");\n\n  const handleSendMessage = useCallback(\n    (message: string, resources: Array<Resource>) => {\n      if (responding) {\n        onCancel?.();\n      } else {\n        if (message.trim() === \"\") {\n          return;\n        }\n        if (onSend) {\n          onSend(message, {\n            interruptFeedback: feedback?.option.value,\n            resources,\n          });\n          onRemoveFeedback?.();\n          // Clear enhancement animation after sending\n          setIsEnhanceAnimating(false);\n        }\n      }\n    },\n    [responding, onCancel, onSend, feedback, onRemoveFeedback],\n  );\n\n  const handleEnhancePrompt = useCallback(async () => {\n    if (currentPrompt.trim() === \"\" || isEnhancing) {\n      return;\n    }\n\n    setIsEnhancing(true);\n    setIsEnhanceAnimating(true);\n\n    try {\n      const enhancedPrompt = await enhancePrompt({\n        prompt: currentPrompt,\n        report_style: reportStyle.toUpperCase(),\n      });\n\n      // Add a small delay for better UX\n      await new Promise((resolve) => setTimeout(resolve, 500));\n\n      // Update the input with the enhanced prompt with animation\n      if (inputRef.current) {\n        inputRef.current.setContent(enhancedPrompt);\n        setCurrentPrompt(enhancedPrompt);\n      }\n\n      // Keep animation for a bit longer to show the effect\n      setTimeout(() => {\n        setIsEnhanceAnimating(false);\n      }, 1000);\n    } catch (error) {\n      console.error(\"Failed to enhance prompt:\", error);\n      setIsEnhanceAnimating(false);\n      // Could add toast notification here\n    } finally {\n      setIsEnhancing(false);\n    }\n  }, [currentPrompt, isEnhancing, reportStyle]);\n\n  return (\n    <div\n      className={cn(\n        \"bg-card relative flex h-full w-full flex-col rounded-[24px] border\",\n        className,\n      )}\n      ref={containerRef}\n    >\n      <div className=\"w-full\">\n        <AnimatePresence>\n          {feedback && (\n            <motion.div\n              ref={feedbackRef}\n              className=\"bg-background border-brand absolute top-0 left-0 mt-2 ml-4 flex items-center justify-center gap-1 rounded-2xl border px-2 py-0.5\"\n              initial={{ opacity: 0, scale: 0 }}\n              animate={{ opacity: 1, scale: 1 }}\n              exit={{ opacity: 0, scale: 0 }}\n              transition={{ duration: 0.2, ease: \"easeInOut\" }}\n            >\n              <div className=\"text-brand flex h-full w-full items-center justify-center text-sm opacity-90\">\n                {feedback.option.text}\n              </div>\n              <X\n                className=\"cursor-pointer opacity-60\"\n                size={16}\n                onClick={onRemoveFeedback}\n              />\n            </motion.div>\n          )}\n          {isEnhanceAnimating && (\n            <motion.div\n              className=\"pointer-events-none absolute inset-0 z-20\"\n              initial={{ opacity: 0 }}\n              animate={{ opacity: 1 }}\n              exit={{ opacity: 0 }}\n              transition={{ duration: 0.3 }}\n            >\n              <div className=\"relative h-full w-full\">\n                {/* Sparkle effect overlay */}\n                <motion.div\n                  className=\"absolute inset-0 rounded-[24px] bg-gradient-to-r from-blue-500/10 via-purple-500/10 to-blue-500/10\"\n                  animate={{\n                    background: [\n                      \"linear-gradient(45deg, rgba(59, 130, 246, 0.1), rgba(147, 51, 234, 0.1), rgba(59, 130, 246, 0.1))\",\n                      \"linear-gradient(225deg, rgba(147, 51, 234, 0.1), rgba(59, 130, 246, 0.1), rgba(147, 51, 234, 0.1))\",\n                      \"linear-gradient(45deg, rgba(59, 130, 246, 0.1), rgba(147, 51, 234, 0.1), rgba(59, 130, 246, 0.1))\",\n                    ],\n                  }}\n                  transition={{ duration: 2, repeat: Infinity }}\n                />\n                {/* Floating sparkles */}\n                {[...Array(6)].map((_, i) => (\n                  <motion.div\n                    key={i}\n                    className=\"absolute h-2 w-2 rounded-full bg-blue-400\"\n                    style={{\n                      left: `${20 + i * 12}%`,\n                      top: `${30 + (i % 2) * 40}%`,\n                    }}\n                    animate={{\n                      y: [-10, -20, -10],\n                      opacity: [0, 1, 0],\n                      scale: [0.5, 1, 0.5],\n                    }}\n                    transition={{\n                      duration: 1.5,\n                      repeat: Infinity,\n                      delay: i * 0.2,\n                    }}\n                  />\n                ))}\n              </div>\n            </motion.div>\n          )}\n        </AnimatePresence>\n        <MessageInput\n          className={cn(\n            \"h-24 px-4 pt-5\",\n            feedback && \"pt-9\",\n            isEnhanceAnimating && \"transition-all duration-500\",\n          )}\n          ref={inputRef}\n          loading={loading}\n          config={config}\n          placeholder={placeholder}\n          onEnter={handleSendMessage}\n          onChange={setCurrentPrompt}\n        />\n      </div>\n      <div className=\"flex items-center px-4 py-2\">\n        {showModeToggles && (\n          <div className=\"flex grow gap-2\">\n            {config?.models?.reasoning && config.models.reasoning.length > 0 && (\n              <Tooltip\n                className=\"max-w-60\"\n                title={\n                  <div>\n                    <h3 className=\"mb-2 font-bold\">\n                      {t(\"deepThinkingTooltip.title\", {\n                        status: enableDeepThinking ? t(\"on\") : t(\"off\"),\n                      })}\n                    </h3>\n                    <p>\n                      {t(\"deepThinkingTooltip.description\", {\n                        model: config.models.reasoning[0] ?? \"\",\n                      })}\n                    </p>\n                  </div>\n                }\n              >\n                <Button\n                  className={cn(\n                    \"rounded-2xl\",\n                    enableDeepThinking && \"!border-brand !text-brand\",\n                  )}\n                  variant=\"outline\"\n                  onClick={() => {\n                    setEnableDeepThinking(!enableDeepThinking);\n                  }}\n                >\n                  <Lightbulb /> {t(\"deepThinking\")}\n                </Button>\n              </Tooltip>\n            )}\n\n            <Tooltip\n              className=\"max-w-60\"\n              title={\n                <div>\n                  <h3 className=\"mb-2 font-bold\">\n                    {t(\"investigationTooltip.title\", {\n                      status: backgroundInvestigation ? t(\"on\") : t(\"off\"),\n                    })}\n                  </h3>\n                  <p>{t(\"investigationTooltip.description\")}</p>\n                </div>\n              }\n            >\n              <Button\n                className={cn(\n                  \"rounded-2xl\",\n                  backgroundInvestigation && \"!border-brand !text-brand\",\n                )}\n                variant=\"outline\"\n                onClick={() =>\n                  setEnableBackgroundInvestigation(!backgroundInvestigation)\n                }\n              >\n                <Detective /> {t(\"investigation\")}\n              </Button>\n            </Tooltip>\n            <ReportStyleDialog />\n          </div>\n        )}\n        <div\n          className={cn(\n            \"flex shrink-0 items-center gap-2\",\n            !showModeToggles && \"ml-auto\",\n          )}\n        >\n          <Tooltip title={t(\"enhancePrompt\")}>\n            <Button\n              variant=\"ghost\"\n              size=\"icon\"\n              className={cn(\n                \"hover:bg-accent h-10 w-10\",\n                isEnhancing && \"animate-pulse\",\n              )}\n              onClick={handleEnhancePrompt}\n              disabled={isEnhancing || currentPrompt.trim() === \"\"}\n            >\n              {isEnhancing ? (\n                <div className=\"flex h-10 w-10 items-center justify-center\">\n                  <div className=\"bg-foreground h-3 w-3 animate-bounce rounded-full opacity-70\" />\n                </div>\n              ) : (\n                <MagicWandIcon className=\"text-brand\" />\n              )}\n            </Button>\n          </Tooltip>\n          <Tooltip title={responding ? tCommon(\"stop\") : tCommon(\"send\")}>\n            <Button\n              variant=\"outline\"\n              size=\"icon\"\n              className={cn(\"h-10 w-10 rounded-full\")}\n              onClick={() => inputRef.current?.submit()}\n            >\n              {responding ? (\n                <div className=\"flex h-10 w-10 items-center justify-center\">\n                  <div className=\"bg-foreground h-4 w-4 rounded-sm opacity-70\" />\n                </div>\n              ) : (\n                <ArrowUp />\n              )}\n            </Button>\n          </Tooltip>\n        </div>\n      </div>\n      {isEnhancing && (\n        <>\n          <BorderBeam\n            duration={5}\n            size={250}\n            className=\"from-transparent via-red-500 to-transparent\"\n          />\n          <BorderBeam\n            duration={5}\n            delay={3}\n            size={250}\n            className=\"from-transparent via-blue-500 to-transparent\"\n          />\n        </>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1811, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/components/deer-flow/loading-animation.module.css [app-client] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"bouncing-animation\": \"loading-animation-module__o3q3XG__bouncing-animation\",\n  \"loadingAnimation\": \"loading-animation-module__o3q3XG__loadingAnimation\",\n  \"sm\": \"loading-animation-module__o3q3XG__sm\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 1822, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/Craft-Agent/web/src/components/deer-flow/loading-animation.tsx"],"sourcesContent":["// Copyright (c) 2025 Bytedance Ltd. and/or its affiliates\n// SPDX-License-Identifier: MIT\n\nimport { cn } from \"~/lib/utils\";\n\nimport styles from \"./loading-animation.module.css\";\n\nexport function LoadingAnimation({\n  className,\n  size = \"normal\",\n}: {\n  className?: string;\n  size?: \"normal\" | \"sm\";\n}) {\n  return (\n    <div\n      className={cn(\n        styles.loadingAnimation,\n        size === \"sm\" && styles.sm,\n        className,\n      )}\n    >\n      <div></div>\n      <div></div>\n      <div></div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"AAAA,0DAA0D;AAC1D,+BAA+B;;;;;AAE/B;AAEA;;;;AAEO,SAAS,iBAAiB,KAMhC;QANgC,EAC/B,SAAS,EACT,OAAO,QAAQ,EAIhB,GANgC;IAO/B,qBACE,sYAAC;QACC,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,wKAAA,CAAA,UAAM,CAAC,gBAAgB,EACvB,SAAS,QAAQ,wKAAA,CAAA,UAAM,CAAC,EAAE,EAC1B;;0BAGF,sYAAC;;;;;0BACD,sYAAC;;;;;0BACD,sYAAC;;;;;;;;;;;AAGP;KApBgB","debugId":null}},
    {"offset": {"line": 1872, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/Craft-Agent/web/src/core/rehype/rehype-split-words-into-spans.ts"],"sourcesContent":["// Copyright (c) 2025 Bytedance Ltd. and/or its affiliates\n// SPDX-License-Identifier: MIT\n\nimport type { Element, Root, ElementContent } from \"hast\";\nimport { visit } from \"unist-util-visit\";\nimport type { BuildVisitor } from \"unist-util-visit\";\n\nexport function rehypeSplitWordsIntoSpans() {\n  return (tree: Root) => {\n    visit(tree, \"element\", ((node: Element) => {\n      if (\n        [\"p\", \"h1\", \"h2\", \"h3\", \"h4\", \"h5\", \"h6\", \"li\", \"strong\"].includes(\n          node.tagName,\n        ) &&\n        node.children\n      ) {\n        const newChildren: Array<ElementContent> = [];\n        node.children.forEach((child) => {\n          if (child.type === \"text\") {\n            const segmenter = new Intl.Segmenter(\"zh\", { granularity: \"word\" });\n            const segments = segmenter.segment(child.value);\n            const words = Array.from(segments)\n              .map((segment) => segment.segment)\n              .filter(Boolean);\n            words.forEach((word: string) => {\n              newChildren.push({\n                type: \"element\",\n                tagName: \"span\",\n                properties: {\n                  className: \"animate-fade-in\",\n                },\n                children: [{ type: \"text\", value: word }],\n              });\n            });\n          } else {\n            newChildren.push(child);\n          }\n        });\n        node.children = newChildren;\n      }\n    }) as BuildVisitor<Root, \"element\">);\n  };\n}\n"],"names":[],"mappings":"AAAA,0DAA0D;AAC1D,+BAA+B;;;;AAG/B;;AAGO,SAAS;IACd,OAAO,CAAC;QACN,CAAA,GAAA,4OAAA,CAAA,QAAK,AAAD,EAAE,MAAM,WAAY,CAAC;YACvB,IACE;gBAAC;gBAAK;gBAAM;gBAAM;gBAAM;gBAAM;gBAAM;gBAAM;gBAAM;aAAS,CAAC,QAAQ,CAChE,KAAK,OAAO,KAEd,KAAK,QAAQ,EACb;gBACA,MAAM,cAAqC,EAAE;gBAC7C,KAAK,QAAQ,CAAC,OAAO,CAAC,CAAC;oBACrB,IAAI,MAAM,IAAI,KAAK,QAAQ;wBACzB,MAAM,YAAY,IAAI,KAAK,SAAS,CAAC,MAAM;4BAAE,aAAa;wBAAO;wBACjE,MAAM,WAAW,UAAU,OAAO,CAAC,MAAM,KAAK;wBAC9C,MAAM,QAAQ,MAAM,IAAI,CAAC,UACtB,GAAG,CAAC,CAAC,UAAY,QAAQ,OAAO,EAChC,MAAM,CAAC;wBACV,MAAM,OAAO,CAAC,CAAC;4BACb,YAAY,IAAI,CAAC;gCACf,MAAM;gCACN,SAAS;gCACT,YAAY;oCACV,WAAW;gCACb;gCACA,UAAU;oCAAC;wCAAE,MAAM;wCAAQ,OAAO;oCAAK;iCAAE;4BAC3C;wBACF;oBACF,OAAO;wBACL,YAAY,IAAI,CAAC;oBACnB;gBACF;gBACA,KAAK,QAAQ,GAAG;YAClB;QACF;IACF;AACF","debugId":null}},
    {"offset": {"line": 1934, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/Craft-Agent/web/src/core/rehype/index.ts"],"sourcesContent":["// Copyright (c) 2025 Bytedance Ltd. and/or its affiliates\n// SPDX-License-Identifier: MIT\n\nexport * from \"./rehype-split-words-into-spans\";\n"],"names":[],"mappings":"AAAA,0DAA0D;AAC1D,+BAA+B;;AAE/B","debugId":null}},
    {"offset": {"line": 1955, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/Craft-Agent/web/src/core/markdown/katex.ts"],"sourcesContent":["// Copyright (c) 2025 Bytedance Ltd. and/or its affiliates\n// SPDX-License-Identifier: MIT\n\nimport type { Options as RehypeKatexOptions } from \"rehype-katex\";\n\nimport \"katex/contrib/mhchem\";\n\nconst macros = {\n  \"\\\\vect\": \"\\\\mathbf{#1}\",\n  \"\\\\mat\": \"\\\\mathbf{#1}\",\n  \"\\\\grad\": \"\\\\nabla #1\",\n  \"\\\\div\": \"\\\\nabla \\\\cdot #1\",\n  \"\\\\curl\": \"\\\\nabla \\\\times #1\",\n  \"\\\\dv\": \"\\\\frac{d #1}{d #2}\",\n  \"\\\\pdv\": \"\\\\frac{\\\\partial #1}{\\\\partial #2}\",\n  \"\\\\pdvN\": \"\\\\frac{\\\\partial^{#3} #1}{\\\\partial #2^{#3}}\",\n  \"\\\\abs\": \"\\\\left|#1\\\\right|\",\n  \"\\\\norm\": \"\\\\left\\\\lVert#1\\\\right\\\\rVert\",\n  \"\\\\set\": \"\\\\left\\\\{#1\\\\right\\\\}\",\n  \"\\\\bra\": \"\\\\left\\\\langle#1\\\\right|\",\n  \"\\\\ket\": \"\\\\left|#1\\\\right\\\\rangle\",\n  \"\\\\braket\": \"\\\\left\\\\langle#1\\\\middle|#2\\\\right\\\\rangle\",\n  \"\\\\matrix\": \"\\\\begin{pmatrix}#1\\\\end{pmatrix}\",\n} as const;\n\nexport const katexOptions: RehypeKatexOptions = {\n  macros,\n  strict: \"ignore\",\n  trust: (context) => context.command === \"\\\\htmlClass\" || context.command === \"\\\\href\",\n};\n\nexport type KatexMacroKey = keyof typeof macros;\n"],"names":[],"mappings":"AAAA,0DAA0D;AAC1D,+BAA+B;;;;AAI/B;;AAEA,MAAM,SAAS;IACb,UAAU;IACV,SAAS;IACT,UAAU;IACV,SAAS;IACT,UAAU;IACV,QAAQ;IACR,SAAS;IACT,UAAU;IACV,SAAS;IACT,UAAU;IACV,SAAS;IACT,SAAS;IACT,SAAS;IACT,YAAY;IACZ,YAAY;AACd;AAEO,MAAM,eAAmC;IAC9C;IACA,QAAQ;IACR,OAAO,CAAC,UAAY,QAAQ,OAAO,KAAK,iBAAiB,QAAQ,OAAO,KAAK;AAC/E","debugId":null}},
    {"offset": {"line": 1993, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/Craft-Agent/web/src/core/utils/markdown.ts"],"sourcesContent":["export function autoFixMarkdown(markdown: string): string {\n  return autoCloseTrailingLink(markdown);\n}\n\n/**\n * Unescape markdown-escaped characters within math delimiters\n * tiptap-markdown escapes special characters like *, _, [, ] which corrupts math formulas\n * This function restores the original LaTeX by unescaping within $...$ and $$...$$\n */\nexport function unescapeLatexInMath(markdown: string): string {\n  let result = markdown;\n\n  // Process inline math: $...$\n  result = result.replace(/\\$([^\\$]+?)\\$/g, (match, mathContent) => {\n    const unescaped = unescapeMarkdownSpecialChars(mathContent);\n    return `$${unescaped}$`;\n  });\n\n  // Process display math: $$...$$\n  result = result.replace(/\\$\\$([\\s\\S]+?)\\$\\$/g, (match, mathContent) => {\n    const unescaped = unescapeMarkdownSpecialChars(mathContent);\n    return `$$${unescaped}$$`;\n  });\n\n  return result;\n}\n\n/**\n * Reverse markdown escaping for special characters\n * Order matters: process \\\\ last to avoid re-escaping\n */\nfunction unescapeMarkdownSpecialChars(text: string): string {\n  return text\n    .replace(/\\\\\\*/g, '*')      // \\*  *\n    .replace(/\\\\_/g, '_')       // \\_  _\n    .replace(/\\\\\\[/g, '[')      // \\[  [\n    .replace(/\\\\\\]/g, ']')      // \\]  ]\n    .replace(/\\\\\\{/g, '{')      // \\{  {\n    .replace(/\\\\\\}/g, '}')      // \\}  }\n    .replace(/\\\\\\\\/g, '\\\\');    // \\\\  \\\n}\n\n/**\n * Normalize math delimiters for editor consumption\n * Converts display delimiters (\\[...\\], \\\\[...\\\\]) to $$ format\n * Converts inline delimiters (\\(...\\), \\\\(...\\\\)) to $ format\n * This ensures consistent format before loading into Tiptap editor\n */\nexport function normalizeMathForEditor(markdown: string): string {\n  let normalized = markdown;\n  \n  // Convert display math - handle double backslash first to avoid conflicts\n  normalized = normalized\n    .replace(/\\\\\\\\\\[([^\\]]*)\\\\\\\\\\]/g, (_match, content) => `$$${content}$$`)  // \\\\[...\\\\]  $$...$$\n    .replace(/\\\\\\[([^\\]]*)\\\\\\]/g, (_match, content) => `$$${content}$$`);  // \\[...\\]  $$...$$\n  \n  // Convert inline math - handle double backslash first to avoid conflicts\n  normalized = normalized\n    .replace(/\\\\\\\\\\(([^)]*)\\\\\\\\\\)/g, (_match, content) => `$${content}$`)  // \\\\(...\\\\)  $...$\n    .replace(/\\\\\\(([^)]*)\\\\\\)/g, (_match, content) => `$${content}$`);    // \\(...\\)  $...$\n  \n  // Replace double backslashes with single in math contexts\n  // For inline math: $...$\n  normalized = normalized.replace(\n    /\\$([^\\$]+?)\\$/g,\n    (match, mathContent) => {\n      return `$${mathContent.replace(/\\\\\\\\/g, '\\\\')}$`;\n    }\n  );\n  \n  // For display math: $$...$$\n  normalized = normalized.replace(\n    /\\$\\$([\\s\\S]+?)\\$\\$/g,\n    (match, mathContent) => {\n      return `$$${mathContent.replace(/\\\\\\\\/g, '\\\\')}$$`;\n    }\n  );\n\n  return normalized;\n}\n\n/**\n * Normalize math delimiters for display consumption\n * Ensures all math delimiters are in $$ format for remarkMath/rehypeKatex\n * This is used by the Markdown display component\n */\nexport function normalizeMathForDisplay(markdown: string): string {\n  let normalized = markdown;\n  \n  // Convert all LaTeX-style delimiters to $$\n  // Both display and inline math use $$ for display component (remarkMath handles both)\n  // Handle double backslash first to avoid conflicts\n  normalized = normalized\n    .replace(/\\\\\\\\\\[([^\\]]*)\\\\\\\\\\]/g, (_match, content) => `$$${content}$$`)  // \\\\[...\\\\]  $$...$$\n    .replace(/\\\\\\[([^\\]]*)\\\\\\]/g, (_match, content) => `$$${content}$$`)      // \\[...\\]  $$...$$\n    .replace(/\\\\\\\\\\(([^)]*)\\\\\\\\\\)/g, (_match, content) => `$$${content}$$`)   // \\\\(...\\\\)  $$...$$\n    .replace(/\\\\\\(([^)]*)\\\\\\)/g, (_match, content) => `$$${content}$$`);       // \\(...\\)  $$...$$\n  \n  // Replace double backslashes with single in math contexts\n  // For inline math: $...$\n  normalized = normalized.replace(\n    /\\$([^\\$]+?)\\$/g,\n    (match, mathContent) => {\n      return `$${mathContent.replace(/\\\\\\\\/g, '\\\\')}$`;\n    }\n  );\n  \n  // For display math: $$...$$\n  normalized = normalized.replace(\n    /\\$\\$([\\s\\S]+?)\\$\\$/g,\n    (match, mathContent) => {\n      return `$$${mathContent.replace(/\\\\\\\\/g, '\\\\')}$$`;\n    }\n  );\n    \n  return normalized;\n}\n\nfunction autoCloseTrailingLink(markdown: string): string {\n  // Fix unclosed Markdown links or images\n  let fixedMarkdown: string = markdown;\n\n  // Fix unclosed image syntax ![...](...)\n  fixedMarkdown = fixedMarkdown.replace(\n    /!\\[([^\\]]*)\\]\\(([^)]*)$/g,\n    (match: string, altText: string, url: string): string => {\n      return `![${altText}](${url})`;\n    },\n  );\n\n  // Fix unclosed link syntax [...](...)\n  fixedMarkdown = fixedMarkdown.replace(\n    /\\[([^\\]]*)\\]\\(([^)]*)$/g,\n    (match: string, linkText: string, url: string): string => {\n      return `[${linkText}](${url})`;\n    },\n  );\n\n  // Fix unclosed image syntax ![...]\n  fixedMarkdown = fixedMarkdown.replace(\n    /!\\[([^\\]]*)$/g,\n    (match: string, altText: string): string => {\n      return `![${altText}]`;\n    },\n  );\n\n  // Fix unclosed link syntax [...]\n  fixedMarkdown = fixedMarkdown.replace(\n    /\\[([^\\]]*)$/g,\n    (match: string, linkText: string): string => {\n      return `[${linkText}]`;\n    },\n  );\n\n  // Fix unclosed images or links missing \")\"\n  fixedMarkdown = fixedMarkdown.replace(\n    /!\\[([^\\]]*)\\]\\(([^)]*)$/g,\n    (match: string, altText: string, url: string): string => {\n      return `![${altText}](${url})`;\n    },\n  );\n\n  fixedMarkdown = fixedMarkdown.replace(\n    /\\[([^\\]]*)\\]\\(([^)]*)$/g,\n    (match: string, linkText: string, url: string): string => {\n      return `[${linkText}](${url})`;\n    },\n  );\n\n  return fixedMarkdown;\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2104, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/Craft-Agent/web/src/components/deer-flow/image.tsx"],"sourcesContent":["// Copyright (c) 2025 Bytedance Ltd. and/or its affiliates\n// SPDX-License-Identifier: MIT\n\nimport { memo, useCallback, useEffect, useState } from \"react\";\n\nimport { cn } from \"~/lib/utils\";\n\nimport { Tooltip } from \"./tooltip\";\n\nfunction Image({\n  className,\n  imageClassName,\n  imageTransition,\n  src,\n  alt,\n  fallback = null,\n}: {\n  className?: string;\n  imageClassName?: string;\n  imageTransition?: boolean;\n  src: string;\n  alt: string;\n  fallback?: React.ReactNode;\n}) {\n  const [, setIsLoading] = useState(true);\n  const [isError, setIsError] = useState(false);\n\n  useEffect(() => {\n    setIsError(false);\n    setIsLoading(true);\n  }, [src]);\n\n  const handleLoad = useCallback(() => {\n    setIsError(false);\n    setIsLoading(false);\n  }, []);\n  const handleError = useCallback(\n    (e: React.SyntheticEvent<HTMLImageElement>) => {\n      e.currentTarget.style.display = \"none\";\n      console.warn(`Markdown: Image \"${e.currentTarget.src}\" failed to load`);\n      setIsError(true);\n    },\n    [],\n  );\n  return (\n    <span className={cn(\"block w-fit overflow-hidden\", className)}>\n      {isError || !src ? (\n        fallback\n      ) : (\n        <Tooltip title={alt ?? \"No caption\"}>\n          <img\n            className={cn(\n              \"size-full object-cover\",\n              imageTransition && \"transition-all duration-200 ease-out\",\n              imageClassName,\n            )}\n            src={src}\n            alt={alt}\n            onLoad={handleLoad}\n            onError={handleError}\n          />\n        </Tooltip>\n      )}\n    </span>\n  );\n}\n\nexport default memo(Image);\n"],"names":[],"mappings":"AAAA,0DAA0D;AAC1D,+BAA+B;;;;;AAE/B;AAEA;AAEA;;;;;;AAEA,SAAS,MAAM,KAcd;QAdc,EACb,SAAS,EACT,cAAc,EACd,eAAe,EACf,GAAG,EACH,GAAG,EACH,WAAW,IAAI,EAQhB,GAdc;;IAeb,MAAM,GAAG,aAAa,GAAG,CAAA,GAAA,sWAAA,CAAA,WAAQ,AAAD,EAAE;IAClC,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,sWAAA,CAAA,WAAQ,AAAD,EAAE;IAEvC,CAAA,GAAA,sWAAA,CAAA,YAAS,AAAD;2BAAE;YACR,WAAW;YACX,aAAa;QACf;0BAAG;QAAC;KAAI;IAER,MAAM,aAAa,CAAA,GAAA,sWAAA,CAAA,cAAW,AAAD;yCAAE;YAC7B,WAAW;YACX,aAAa;QACf;wCAAG,EAAE;IACL,MAAM,cAAc,CAAA,GAAA,sWAAA,CAAA,cAAW,AAAD;0CAC5B,CAAC;YACC,EAAE,aAAa,CAAC,KAAK,CAAC,OAAO,GAAG;YAChC,QAAQ,IAAI,CAAC,AAAC,oBAAuC,OAApB,EAAE,aAAa,CAAC,GAAG,EAAC;YACrD,WAAW;QACb;yCACA,EAAE;IAEJ,qBACE,sYAAC;QAAK,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,+BAA+B;kBAChD,WAAW,CAAC,MACX,yBAEA,sYAAC,gJAAA,CAAA,UAAO;YAAC,OAAO,gBAAA,iBAAA,MAAO;sBACrB,cAAA,sYAAC;gBACC,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,0BACA,mBAAmB,wCACnB;gBAEF,KAAK;gBACL,KAAK;gBACL,QAAQ;gBACR,SAAS;;;;;;;;;;;;;;;;AAMrB;GAxDS;KAAA;2DA0DM,CAAA,GAAA,sWAAA,CAAA,OAAI,AAAD,EAAE","debugId":null}},
    {"offset": {"line": 2185, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/Craft-Agent/web/src/components/deer-flow/link.tsx"],"sourcesContent":["import { useMemo } from \"react\";\nimport { useStore, useToolCalls } from \"~/core/store\";\nimport { parseJSON } from \"~/core/utils/json\";\nimport { Tooltip } from \"./tooltip\";\nimport { WarningFilled } from \"@ant-design/icons\";\nimport { useTranslations } from \"next-intl\";\n\nexport const Link = ({\n  href,\n  children,\n  checkLinkCredibility = false,\n}: {\n  href: string | undefined;\n  children: React.ReactNode;\n  checkLinkCredibility: boolean;\n}) => {\n  const toolCalls = useToolCalls();\n  const responding = useStore((state) => state.responding);\n\n  const credibleLinks = useMemo(() => {\n    const links = new Set<string>();\n    if (!checkLinkCredibility) return links;\n\n    (toolCalls || []).forEach((call) => {\n      if (call && call.name === \"web_search\" && call.result) {\n        try {\n          const result = parseJSON(call.result, []) as Array<{ url: string }>;\n          if (Array.isArray(result)) {\n            result.forEach((r) => {\n              if (r && typeof r.url === 'string') {\n                // encodeURI is used to handle the case where the link contains chinese or other special characters\n                links.add(encodeURI(r.url));\n                links.add(r.url);\n              }\n            });\n          }\n        } catch (error) {\n          console.warn('Failed to parse web_search result:', error);\n        }\n      }\n    });\n    return links;\n  }, [toolCalls]);\n\n  const isCredible = useMemo(() => {\n    return checkLinkCredibility && href && !responding\n      ? credibleLinks.has(href)\n      : true;\n  }, [credibleLinks, href, responding, checkLinkCredibility]);\n\n  const t = useTranslations(\"common\");\n  return (\n    <span className=\"inline-flex items-center gap-1.5\">\n      <a href={href} target=\"_blank\" rel=\"noopener noreferrer\">\n        {children}\n      </a>\n      {!isCredible && (\n        <Tooltip title={t(\"linkNotReliable\")} delayDuration={300}>\n          <WarningFilled className=\"text-sx transition-colors hover:!text-yellow-500\" />\n        </Tooltip>\n      )}\n    </span>\n  );\n};\n"],"names":[],"mappings":";;;;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;;;;;;;;;AAEO,MAAM,OAAO;QAAC,EACnB,IAAI,EACJ,QAAQ,EACR,uBAAuB,KAAK,EAK7B;;IACC,MAAM,YAAY,CAAA,GAAA,gIAAA,CAAA,eAAY,AAAD;IAC7B,MAAM,aAAa,CAAA,GAAA,gIAAA,CAAA,WAAQ,AAAD;qCAAE,CAAC,QAAU,MAAM,UAAU;;IAEvD,MAAM,gBAAgB,CAAA,GAAA,sWAAA,CAAA,UAAO,AAAD;uCAAE;YAC5B,MAAM,QAAQ,IAAI;YAClB,IAAI,CAAC,sBAAsB,OAAO;YAElC,CAAC,aAAa,EAAE,EAAE,OAAO;+CAAC,CAAC;oBACzB,IAAI,QAAQ,KAAK,IAAI,KAAK,gBAAgB,KAAK,MAAM,EAAE;wBACrD,IAAI;4BACF,MAAM,SAAS,CAAA,GAAA,+HAAA,CAAA,YAAS,AAAD,EAAE,KAAK,MAAM,EAAE,EAAE;4BACxC,IAAI,MAAM,OAAO,CAAC,SAAS;gCACzB,OAAO,OAAO;mEAAC,CAAC;wCACd,IAAI,KAAK,OAAO,EAAE,GAAG,KAAK,UAAU;4CAClC,mGAAmG;4CACnG,MAAM,GAAG,CAAC,UAAU,EAAE,GAAG;4CACzB,MAAM,GAAG,CAAC,EAAE,GAAG;wCACjB;oCACF;;4BACF;wBACF,EAAE,OAAO,OAAO;4BACd,QAAQ,IAAI,CAAC,sCAAsC;wBACrD;oBACF;gBACF;;YACA,OAAO;QACT;sCAAG;QAAC;KAAU;IAEd,MAAM,aAAa,CAAA,GAAA,sWAAA,CAAA,UAAO,AAAD;oCAAE;YACzB,OAAO,wBAAwB,QAAQ,CAAC,aACpC,cAAc,GAAG,CAAC,QAClB;QACN;mCAAG;QAAC;QAAe;QAAM;QAAY;KAAqB;IAE1D,MAAM,IAAI,CAAA,GAAA,8ZAAA,CAAA,kBAAe,AAAD,EAAE;IAC1B,qBACE,sYAAC;QAAK,WAAU;;0BACd,sYAAC;gBAAE,MAAM;gBAAM,QAAO;gBAAS,KAAI;0BAChC;;;;;;YAEF,CAAC,4BACA,sYAAC,gJAAA,CAAA,UAAO;gBAAC,OAAO,EAAE;gBAAoB,eAAe;0BACnD,cAAA,sYAAC,yWAAA,CAAA,gBAAa;oBAAC,WAAU;;;;;;;;;;;;;;;;;AAKnC;GAxDa;;QASO,gIAAA,CAAA,eAAY;QACX,gIAAA,CAAA,WAAQ;QAiCjB,8ZAAA,CAAA,kBAAe;;;KA3Cd","debugId":null}},
    {"offset": {"line": 2307, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/Craft-Agent/web/src/components/deer-flow/markdown.tsx"],"sourcesContent":["// Copyright (c) 2025 Bytedance Ltd. and/or its affiliates\n// SPDX-License-Identifier: MIT\n\nimport { Check, Copy } from \"lucide-react\";\nimport { useMemo, useState } from \"react\";\nimport ReactMarkdown, {\n  type Options as ReactMarkdownOptions,\n} from \"react-markdown\";\nimport rehypeKatex from \"rehype-katex\";\nimport remarkGfm from \"remark-gfm\";\nimport remarkMath from \"remark-math\";\nimport \"katex/dist/katex.min.css\";\n\nimport { Button } from \"~/components/ui/button\";\nimport { rehypeSplitWordsIntoSpans } from \"~/core/rehype\";\nimport { katexOptions } from \"~/core/markdown/katex\";\nimport { autoFixMarkdown, normalizeMathForDisplay } from \"~/core/utils/markdown\";\nimport { cn } from \"~/lib/utils\";\n\nimport Image from \"./image\";\nimport { Tooltip } from \"./tooltip\";\nimport { Link } from \"./link\";\n\nexport function Markdown({\n  className,\n  children,\n  style,\n  enableCopy,\n  animated = false,\n  checkLinkCredibility = false,\n  ...props\n}: ReactMarkdownOptions & {\n  className?: string;\n  enableCopy?: boolean;\n  style?: React.CSSProperties;\n  animated?: boolean;\n  checkLinkCredibility?: boolean;\n}) {\n  const components: ReactMarkdownOptions[\"components\"] = useMemo(() => {\n    return {\n      a: ({ href, children }) => (\n        <Link href={href} checkLinkCredibility={checkLinkCredibility}>\n          {children}\n        </Link>\n      ),\n      img: ({ src, alt }) => (\n        <a href={src as string} target=\"_blank\" rel=\"noopener noreferrer\">\n          <Image className=\"rounded\" src={src as string} alt={alt ?? \"\"} />\n        </a>\n      ),\n    };\n  }, [checkLinkCredibility]);\n\n  const rehypePlugins = useMemo<NonNullable<ReactMarkdownOptions[\"rehypePlugins\"]>>(() => {\n    const plugins: NonNullable<ReactMarkdownOptions[\"rehypePlugins\"]> = [[\n      rehypeKatex,\n      katexOptions,\n    ]];\n    if (animated) {\n      plugins.push(rehypeSplitWordsIntoSpans);\n    }\n    return plugins;\n  }, [animated]);\n  return (\n    <div className={cn(className, \"prose dark:prose-invert\")} style={style}>\n      <ReactMarkdown\n        remarkPlugins={[remarkGfm, remarkMath]}\n        rehypePlugins={rehypePlugins}\n        components={components}\n        {...props}\n      >\n        {autoFixMarkdown(\n          dropMarkdownQuote(normalizeMathForDisplay(children ?? \"\")) ?? \"\",\n        )}\n      </ReactMarkdown>\n      {enableCopy && typeof children === \"string\" && (\n        <div className=\"flex\">\n          <CopyButton content={children} />\n        </div>\n      )}\n    </div>\n  );\n}\n\nfunction CopyButton({ content }: { content: string }) {\n  const [copied, setCopied] = useState(false);\n  return (\n    <Tooltip title=\"Copy\">\n      <Button\n        variant=\"outline\"\n        size=\"sm\"\n        className=\"rounded-full\"\n        onClick={async () => {\n          try {\n            await navigator.clipboard.writeText(content);\n            setCopied(true);\n            setTimeout(() => {\n              setCopied(false);\n            }, 1000);\n          } catch (error) {\n            console.error(error);\n          }\n        }}\n      >\n        {copied ? (\n          <Check className=\"h-4 w-4\" />\n        ) : (\n          <Copy className=\"h-4 w-4\" />\n        )}{\" \"}\n      </Button>\n    </Tooltip>\n  );\n}\n\n\n\nfunction dropMarkdownQuote(markdown?: string | null): string | null {\n  if (!markdown) return null;\n\n  const patternsToRemove = [\n    { prefix: \"```markdown\\n\", suffix: \"\\n```\", prefixLen: 12 },\n    { prefix: \"```text\\n\", suffix: \"\\n```\", prefixLen: 8 },\n    { prefix: \"```\\n\", suffix: \"\\n```\", prefixLen: 4 },\n  ];\n\n  let result = markdown;\n  \n  for (const { prefix, suffix, prefixLen } of patternsToRemove) {\n    if (result.startsWith(prefix) && !result.endsWith(suffix)) {\n      result = result.slice(prefixLen);\n      break;  // remove prefix without suffix only once\n    }\n  }\n  \n  let changed = true;\n\n  while (changed) {\n    changed = false;\n    \n    for (const { prefix, suffix, prefixLen } of patternsToRemove) {\n      let startIndex = 0;\n      while ((startIndex = result.indexOf(prefix, startIndex)) !== -1) {\n        const endIndex = result.indexOf(suffix, startIndex + prefixLen);\n        if (endIndex !== -1) {\n          // only remove fully matched code blocks\n          const before = result.slice(0, startIndex);\n          const content = result.slice(startIndex + prefixLen, endIndex);\n          const after = result.slice(endIndex + suffix.length);\n          result = before + content + after;\n          changed = true;\n          startIndex = before.length + content.length;\n        } else {\n          startIndex += prefixLen;\n        }\n      }\n    }\n  }\n  \n  return result;\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2563, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/Craft-Agent/web/src/components/deer-flow/rolling-text.tsx"],"sourcesContent":["// Copyright (c) 2025 Bytedance Ltd. and/or its affiliates\n// SPDX-License-Identifier: MIT\n\nimport { motion, AnimatePresence } from \"framer-motion\";\n\nimport { cn } from \"~/lib/utils\";\n\nexport function RollingText({\n  className,\n  children,\n}: {\n  className?: string;\n  children?: string | string[];\n}) {\n  return (\n    <span\n      className={cn(\n        \"relative flex h-[2em] items-center overflow-hidden\",\n        className,\n      )}\n    >\n      <AnimatePresence mode=\"popLayout\">\n        <motion.div\n          className=\"absolute w-fit\"\n          style={{ transition: \"all 0.3s ease-in-out\" }}\n          initial={{ y: \"100%\", opacity: 0 }}\n          animate={{ y: \"0%\", opacity: 1 }}\n          exit={{ y: \"-100%\", opacity: 0 }}\n          transition={{ duration: 0.3, ease: \"easeInOut\" }}\n        >\n          {children}\n        </motion.div>\n      </AnimatePresence>\n    </span>\n  );\n}\n"],"names":[],"mappings":"AAAA,0DAA0D;AAC1D,+BAA+B;;;;;AAE/B;AAAA;AAEA;;;;AAEO,SAAS,YAAY,KAM3B;QAN2B,EAC1B,SAAS,EACT,QAAQ,EAIT,GAN2B;IAO1B,qBACE,sYAAC;QACC,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,sDACA;kBAGF,cAAA,sYAAC,uUAAA,CAAA,kBAAe;YAAC,MAAK;sBACpB,cAAA,sYAAC,wUAAA,CAAA,SAAM,CAAC,GAAG;gBACT,WAAU;gBACV,OAAO;oBAAE,YAAY;gBAAuB;gBAC5C,SAAS;oBAAE,GAAG;oBAAQ,SAAS;gBAAE;gBACjC,SAAS;oBAAE,GAAG;oBAAM,SAAS;gBAAE;gBAC/B,MAAM;oBAAE,GAAG;oBAAS,SAAS;gBAAE;gBAC/B,YAAY;oBAAE,UAAU;oBAAK,MAAM;gBAAY;0BAE9C;;;;;;;;;;;;;;;;AAKX;KA5BgB","debugId":null}},
    {"offset": {"line": 2631, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/Craft-Agent/web/src/components/ui/scroll-area.tsx"],"sourcesContent":["\"use client\";\n\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\";\nimport * as React from \"react\";\n\nimport { cn } from \"~/lib/utils\";\n\nfunction ScrollArea({\n  className,\n  children,\n  ref,\n  ...props\n}: React.ComponentProps<typeof ScrollAreaPrimitive.Root>) {\n  return (\n    <ScrollAreaPrimitive.Root\n      data-slot=\"scroll-area\"\n      className={cn(\"relative\", className)}\n      {...props}\n    >\n      <ScrollAreaPrimitive.Viewport\n        data-slot=\"scroll-area-viewport\"\n        className=\"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1\"\n        // https://github.com/stackblitz-labs/use-stick-to-bottom/issues/15\n        ref={ref}\n      >\n        {children}\n      </ScrollAreaPrimitive.Viewport>\n      <ScrollBar />\n      <ScrollAreaPrimitive.Corner />\n    </ScrollAreaPrimitive.Root>\n  );\n}\n\nfunction ScrollBar({\n  className,\n  orientation = \"vertical\",\n  ...props\n}: React.ComponentProps<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>) {\n  return (\n    <ScrollAreaPrimitive.ScrollAreaScrollbar\n      data-slot=\"scroll-area-scrollbar\"\n      orientation={orientation}\n      className={cn(\n        \"flex touch-none p-px transition-colors select-none\",\n        orientation === \"vertical\" &&\n          \"h-full w-2.5 border-l border-l-transparent\",\n        orientation === \"horizontal\" &&\n          \"h-2.5 flex-col border-t border-t-transparent\",\n        className,\n      )}\n      {...props}\n    >\n      <ScrollAreaPrimitive.ScrollAreaThumb\n        data-slot=\"scroll-area-thumb\"\n        className=\"bg-border relative flex-1 rounded-full\"\n      />\n    </ScrollAreaPrimitive.ScrollAreaScrollbar>\n  );\n}\n\nexport { ScrollArea, ScrollBar };\n"],"names":[],"mappings":";;;;;AAEA;AAGA;AALA;;;;AAOA,SAAS,WAAW,KAKoC;QALpC,EAClB,SAAS,EACT,QAAQ,EACR,GAAG,EACH,GAAG,OACmD,GALpC;IAMlB,qBACE,sYAAC,iYAAA,CAAA,OAAwB;QACvB,aAAU;QACV,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,YAAY;QACzB,GAAG,KAAK;;0BAET,sYAAC,iYAAA,CAAA,WAA4B;gBAC3B,aAAU;gBACV,WAAU;gBACV,mEAAmE;gBACnE,KAAK;0BAEJ;;;;;;0BAEH,sYAAC;;;;;0BACD,sYAAC,iYAAA,CAAA,SAA0B;;;;;;;;;;;AAGjC;KAxBS;AA0BT,SAAS,UAAU,KAIoD;QAJpD,EACjB,SAAS,EACT,cAAc,UAAU,EACxB,GAAG,OACkE,GAJpD;IAKjB,qBACE,sYAAC,iYAAA,CAAA,sBAAuC;QACtC,aAAU;QACV,aAAa;QACb,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,sDACA,gBAAgB,cACd,8CACF,gBAAgB,gBACd,gDACF;QAED,GAAG,KAAK;kBAET,cAAA,sYAAC,iYAAA,CAAA,kBAAmC;YAClC,aAAU;YACV,WAAU;;;;;;;;;;;AAIlB;MAzBS","debugId":null}},
    {"offset": {"line": 2713, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/Craft-Agent/web/src/components/deer-flow/scroll-container.tsx"],"sourcesContent":["// Copyright (c) 2025 Bytedance Ltd. and/or its affiliates\n// SPDX-License-Identifier: MIT\n\nimport {\n  useEffect,\n  useImperativeHandle,\n  useLayoutEffect,\n  useRef,\n  type ReactNode,\n  type RefObject,\n} from \"react\";\nimport { useStickToBottom } from \"use-stick-to-bottom\";\n\nimport { ScrollArea } from \"~/components/ui/scroll-area\";\nimport { cn } from \"~/lib/utils\";\n\nexport interface ScrollContainerProps {\n  className?: string;\n  children?: ReactNode;\n  scrollShadow?: boolean;\n  scrollShadowColor?: string;\n  autoScrollToBottom?: boolean;\n  ref?: RefObject<ScrollContainerRef | null>;\n}\n\nexport interface ScrollContainerRef {\n  scrollToBottom(): void;\n}\n\nexport function ScrollContainer({\n  className,\n  children,\n  scrollShadow = true,\n  scrollShadowColor = \"var(--background)\",\n  autoScrollToBottom = false,\n  ref,\n}: ScrollContainerProps) {\n  const { scrollRef, contentRef, scrollToBottom, isAtBottom } =\n    useStickToBottom({ initial: \"instant\" });\n  useImperativeHandle(ref, () => ({\n    scrollToBottom() {\n      if (isAtBottom) {\n        scrollToBottom();\n      }\n    },\n  }));\n\n  const tempScrollRef = useRef<HTMLElement>(null);\n  const tempContentRef = useRef<HTMLElement>(null);\n  useEffect(() => {\n    if (!autoScrollToBottom) {\n      tempScrollRef.current = scrollRef.current;\n      tempContentRef.current = contentRef.current;\n      scrollRef.current = null;\n      contentRef.current = null;\n    } else if (tempScrollRef.current && tempContentRef.current) {\n      scrollRef.current = tempScrollRef.current;\n      contentRef.current = tempContentRef.current;\n    }\n  }, [autoScrollToBottom, contentRef, scrollRef]);\n\n  return (\n    <div className={cn(\"relative\", className)}>\n      {scrollShadow && (\n        <>\n          <div\n            className={cn(\n              \"absolute top-0 right-0 left-0 z-10 h-10 bg-gradient-to-t\",\n              `from-transparent to-[var(--scroll-shadow-color)]`,\n            )}\n            style={\n              {\n                \"--scroll-shadow-color\": scrollShadowColor,\n              } as React.CSSProperties\n            }\n          ></div>\n          <div\n            className={cn(\n              \"absolute right-0 bottom-0 left-0 z-10 h-10 bg-gradient-to-b\",\n              `from-transparent to-[var(--scroll-shadow-color)]`,\n            )}\n            style={\n              {\n                \"--scroll-shadow-color\": scrollShadowColor,\n              } as React.CSSProperties\n            }\n          ></div>\n        </>\n      )}\n      <ScrollArea ref={scrollRef} className=\"h-full w-full\">\n        <div className=\"h-fit w-full\" ref={contentRef}>\n          {children}\n        </div>\n      </ScrollArea>\n    </div>\n  );\n}\n"],"names":[],"mappings":"AAAA,0DAA0D;AAC1D,+BAA+B;;;;;AAE/B;AAQA;AAEA;AACA;;;;;;;AAeO,SAAS,gBAAgB,KAOT;QAPS,EAC9B,SAAS,EACT,QAAQ,EACR,eAAe,IAAI,EACnB,oBAAoB,mBAAmB,EACvC,qBAAqB,KAAK,EAC1B,GAAG,EACkB,GAPS;;IAQ9B,MAAM,EAAE,SAAS,EAAE,UAAU,EAAE,cAAc,EAAE,UAAU,EAAE,GACzD,CAAA,GAAA,0QAAA,CAAA,mBAAgB,AAAD,EAAE;QAAE,SAAS;IAAU;IACxC,CAAA,GAAA,sWAAA,CAAA,sBAAmB,AAAD,EAAE;+CAAK,IAAM,CAAC;gBAC9B;oBACE,IAAI,YAAY;wBACd;oBACF;gBACF;YACF,CAAC;;IAED,MAAM,gBAAgB,CAAA,GAAA,sWAAA,CAAA,SAAM,AAAD,EAAe;IAC1C,MAAM,iBAAiB,CAAA,GAAA,sWAAA,CAAA,SAAM,AAAD,EAAe;IAC3C,CAAA,GAAA,sWAAA,CAAA,YAAS,AAAD;qCAAE;YACR,IAAI,CAAC,oBAAoB;gBACvB,cAAc,OAAO,GAAG,UAAU,OAAO;gBACzC,eAAe,OAAO,GAAG,WAAW,OAAO;gBAC3C,UAAU,OAAO,GAAG;gBACpB,WAAW,OAAO,GAAG;YACvB,OAAO,IAAI,cAAc,OAAO,IAAI,eAAe,OAAO,EAAE;gBAC1D,UAAU,OAAO,GAAG,cAAc,OAAO;gBACzC,WAAW,OAAO,GAAG,eAAe,OAAO;YAC7C;QACF;oCAAG;QAAC;QAAoB;QAAY;KAAU;IAE9C,qBACE,sYAAC;QAAI,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,YAAY;;YAC5B,8BACC;;kCACE,sYAAC;wBACC,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,4DACC;wBAEH,OACE;4BACE,yBAAyB;wBAC3B;;;;;;kCAGJ,sYAAC;wBACC,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,+DACC;wBAEH,OACE;4BACE,yBAAyB;wBAC3B;;;;;;;;0BAKR,sYAAC,6IAAA,CAAA,aAAU;gBAAC,KAAK;gBAAW,WAAU;0BACpC,cAAA,sYAAC;oBAAI,WAAU;oBAAe,KAAK;8BAChC;;;;;;;;;;;;;;;;;AAKX;GAnEgB;;QASZ,0QAAA,CAAA,mBAAgB;;;KATJ","debugId":null}},
    {"offset": {"line": 2831, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/Craft-Agent/web/src/components/ui/collapsible.tsx"],"sourcesContent":["\"use client\"\n\nimport * as CollapsiblePrimitive from \"@radix-ui/react-collapsible\"\n\nfunction Collapsible({\n  ...props\n}: React.ComponentProps<typeof CollapsiblePrimitive.Root>) {\n  return <CollapsiblePrimitive.Root data-slot=\"collapsible\" {...props} />\n}\n\nfunction CollapsibleTrigger({\n  ...props\n}: React.ComponentProps<typeof CollapsiblePrimitive.CollapsibleTrigger>) {\n  return (\n    <CollapsiblePrimitive.CollapsibleTrigger\n      data-slot=\"collapsible-trigger\"\n      {...props}\n    />\n  )\n}\n\nfunction CollapsibleContent({\n  ...props\n}: React.ComponentProps<typeof CollapsiblePrimitive.CollapsibleContent>) {\n  return (\n    <CollapsiblePrimitive.CollapsibleContent\n      data-slot=\"collapsible-content\"\n      {...props}\n    />\n  )\n}\n\nexport { Collapsible, CollapsibleTrigger, CollapsibleContent }\n"],"names":[],"mappings":";;;;;;AAEA;AAFA;;;AAIA,SAAS,YAAY,KAEoC;QAFpC,EACnB,GAAG,OACoD,GAFpC;IAGnB,qBAAO,sYAAC,2XAAA,CAAA,OAAyB;QAAC,aAAU;QAAe,GAAG,KAAK;;;;;;AACrE;KAJS;AAMT,SAAS,mBAAmB,KAE2C;QAF3C,EAC1B,GAAG,OACkE,GAF3C;IAG1B,qBACE,sYAAC,2XAAA,CAAA,qBAAuC;QACtC,aAAU;QACT,GAAG,KAAK;;;;;;AAGf;MATS;AAWT,SAAS,mBAAmB,KAE2C;QAF3C,EAC1B,GAAG,OACkE,GAF3C;IAG1B,qBACE,sYAAC,2XAAA,CAAA,qBAAuC;QACtC,aAAU;QACT,GAAG,KAAK;;;;;;AAGf;MATS","debugId":null}},
    {"offset": {"line": 2891, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/Craft-Agent/web/src/app/chat/components/message-list-view.tsx"],"sourcesContent":["// Copyright (c) 2025 Bytedance Ltd. and/or its affiliates\n// SPDX-License-Identifier: MIT\n\nimport { LoadingOutlined } from \"@ant-design/icons\";\nimport { motion } from \"framer-motion\";\nimport {\n  Download,\n  Headphones,\n  ChevronDown,\n  ChevronRight,\n  Lightbulb,\n  Wrench,\n  FileText,\n  Code2,\n  ChevronUp,\n} from \"lucide-react\";\nimport { useTranslations } from \"next-intl\";\nimport React, { useCallback, useMemo, useRef, useState } from \"react\";\n\nimport { LoadingAnimation } from \"~/components/deer-flow/loading-animation\";\nimport { Markdown } from \"~/components/deer-flow/markdown\";\nimport { RainbowText } from \"~/components/deer-flow/rainbow-text\";\nimport { RollingText } from \"~/components/deer-flow/rolling-text\";\nimport {\n  ScrollContainer,\n  type ScrollContainerRef,\n} from \"~/components/deer-flow/scroll-container\";\nimport { Tooltip } from \"~/components/deer-flow/tooltip\";\nimport { Button } from \"~/components/ui/button\";\nimport {\n  Card,\n  CardContent,\n  CardFooter,\n  CardHeader,\n  CardTitle,\n} from \"~/components/ui/card\";\nimport {\n  Collapsible,\n  CollapsibleContent,\n  CollapsibleTrigger,\n} from \"~/components/ui/collapsible\";\nimport type { Message, Option, ToolCallRuntime } from \"~/core/messages\";\nimport {\n  closeResearch,\n  openResearch,\n  useLastFeedbackMessageId,\n  useLastInterruptMessage,\n  useMessage,\n  useRenderableMessageIds,\n  useResearchMessage,\n  useStore,\n} from \"~/core/store\";\nimport { parseJSON } from \"~/core/utils\";\nimport { cn } from \"~/lib/utils\";\n\nexport function MessageListView({\n  className,\n  onFeedback,\n  onSendMessage,\n}: {\n  className?: string;\n  onFeedback?: (feedback: { option: Option }) => void;\n  onSendMessage?: (\n    message: string,\n    options?: { interruptFeedback?: string },\n  ) => void;\n}) {\n  const scrollContainerRef = useRef<ScrollContainerRef>(null);\n  // Use renderable message IDs to avoid React key warnings from duplicate or non-rendering messages\n  const messageIds = useRenderableMessageIds();\n  const interruptMessage = useLastInterruptMessage();\n  const waitingForFeedbackMessageId = useLastFeedbackMessageId();\n  const responding = useStore((state) => state.responding);\n  const noOngoingResearch = useStore(\n    (state) => state.ongoingResearchId === null,\n  );\n  const ongoingResearchIsOpen = useStore(\n    (state) => state.ongoingResearchId === state.openResearchId,\n  );\n\n  const handleToggleResearch = useCallback(() => {\n    // Fix the issue where auto-scrolling to the bottom\n    // occasionally fails when toggling research.\n    const timer = setTimeout(() => {\n      if (scrollContainerRef.current) {\n        scrollContainerRef.current.scrollToBottom();\n      }\n    }, 500);\n    return () => {\n      clearTimeout(timer);\n    };\n  }, []);\n\n  return (\n    <ScrollContainer\n      className={cn(\"flex h-full w-full flex-col overflow-hidden\", className)}\n      scrollShadowColor=\"var(--app-background)\"\n      autoScrollToBottom\n      ref={scrollContainerRef}\n    >\n      <ul className=\"flex flex-col\">\n        {messageIds.map((messageId) => (\n          <MessageListItem\n            key={messageId}\n            messageId={messageId}\n            waitForFeedback={waitingForFeedbackMessageId === messageId}\n            interruptMessage={interruptMessage}\n            onFeedback={onFeedback}\n            onSendMessage={onSendMessage}\n            onToggleResearch={handleToggleResearch}\n          />\n        ))}\n        \n        {/* \n            Fallback for WebGen interrupt: \n            Force render the edit card if there is an active WebGen interrupt.\n            We relax the ID check to ensure it shows up even if ID matching fails.\n            The card inside MessageListItem checks for ID match, so if that fails, this one picks it up.\n            If both match (unlikely given the issue), we might have two cards, but that is better than zero.\n        */}\n        {interruptMessage && \n         (interruptMessage.finishReason === \"interrupt\") && (\n           <li className=\"mt-3 px-4 w-full animate-in fade-in slide-in-from-bottom-4 pb-8\">\n             <WebGenEditCard\n               message={interruptMessage}\n               interruptMessage={interruptMessage}\n               onFeedback={onFeedback}\n               waitForFeedback={true} \n               onSendMessage={onSendMessage}\n             />\n           </li>\n        )}\n\n        <div className=\"flex h-8 w-full shrink-0\"></div>\n      </ul>\n      {responding && (noOngoingResearch || !ongoingResearchIsOpen) && (\n        <LoadingAnimation className=\"ml-4\" />\n      )}\n    </ScrollContainer>\n  );\n}\n\nfunction MessageListItem({\n  className,\n  messageId,\n  waitForFeedback,\n  interruptMessage,\n  onFeedback,\n  onSendMessage,\n  onToggleResearch,\n}: {\n  className?: string;\n  messageId: string;\n  waitForFeedback?: boolean;\n  onFeedback?: (feedback: { option: Option }) => void;\n  interruptMessage?: Message | null;\n  onSendMessage?: (\n    message: string,\n    options?: { interruptFeedback?: string },\n  ) => void;\n  onToggleResearch?: () => void;\n}) {\n  const message = useMessage(messageId);\n  const researchIds = useStore((state) => state.researchIds);\n  const startOfResearch = useMemo(() => {\n    return researchIds.includes(messageId);\n  }, [researchIds, messageId]);\n  if (message) {\n    if (\n      message.role === \"user\" ||\n      message.agent === \"coordinator\" ||\n      message.agent === \"planner\" ||\n      message.agent === \"podcast\" ||\n      message.agent === \"outline\" ||\n      message.agent === \"web_source\" ||\n      message.agent === \"codegen\" ||\n      startOfResearch\n    ) {\n      let content: React.ReactNode;\n      if (message.agent === \"planner\") {\n        content = (\n          <div className=\"w-full px-4\">\n            <PlanCard\n              message={message}\n              waitForFeedback={waitForFeedback}\n              interruptMessage={interruptMessage}\n              onFeedback={onFeedback}\n              onSendMessage={onSendMessage}\n            />\n          </div>\n        );\n      } else if (message.agent === \"podcast\") {\n        content = (\n          <div className=\"w-full px-4\">\n            <PodcastCard message={message} />\n          </div>\n        );\n      } else if (message.agent === \"outline\") {\n        content = (\n          <div className=\"flex w-full flex-col px-4 items-start\">\n            <ArtifactCard\n              message={message}\n              title=\"Project Outline\"\n              type=\"document\"\n              renderMode=\"raw\"\n              defaultExpanded={true}\n              className=\"w-[85%]\"\n              toolCalls={message.toolCalls}\n            />\n          </div>\n        );\n      } else if (message.agent === \"codegen\") {\n        content = (\n          <div className=\"flex w-full flex-col px-4 items-start\">\n            <ArtifactCard\n              message={message}\n              title=\"Generated Code\"\n              type=\"code\"\n              renderMode=\"raw\"\n              defaultExpanded={true}\n              className=\"w-[85%]\"\n              toolCalls={message.toolCalls}\n            />\n            {/* If this message has an active interrupt (e.g. finished generation), show the edit card */}\n            {interruptMessage && interruptMessage.id === messageId && (\n               <div className=\"w-full mt-4\">\n                 <WebGenEditCard\n                   message={message}\n                   interruptMessage={interruptMessage}\n                   onFeedback={onFeedback}\n                   waitForFeedback={waitForFeedback}\n                   onSendMessage={onSendMessage}\n                 />\n               </div>\n            )}\n          </div>\n        );\n      } else if ((message.agent as string) === \"edit\" || (interruptMessage && interruptMessage.id === messageId && interruptMessage.options && interruptMessage.options.length > 0)) {\n         // Handle WebGen Edit Interrupt\n         // We match either by agent name 'edit' or by interrupt content/id pattern if agent name isn't propagated perfectly on interrupts\n         content = (\n           <div className=\"w-full px-4\">\n             <WebGenEditCard\n               message={message}\n               interruptMessage={interruptMessage}\n               onFeedback={onFeedback}\n               waitForFeedback={waitForFeedback}\n               onSendMessage={onSendMessage}\n             />\n           </div>\n         );\n      } else if (startOfResearch) {\n        content = (\n          <div className=\"w-full px-4\">\n            <ResearchCard\n              researchId={message.id}\n              onToggleResearch={onToggleResearch}\n            />\n          </div>\n        );\n      } else {\n        const hasMainContent = Boolean(message.content && message.content.trim() !== \"\");\n        const reasoningContent = message.reasoningContent;\n        const isThinking = Boolean(reasoningContent && !hasMainContent);\n        \n        // For generic assistant messages (including web_source or other helpers), \n        // wrap them in a card as well, but open by default and using Markdown rendering.\n        content = (\n          <div\n            className={cn(\n              \"flex w-full flex-col px-4\",\n              message.role === \"user\" ? \"items-end\" : \"items-start\",\n              className,\n            )}\n          >\n            {/* We reuse ArtifactCard for assistant messages to keep style consistent */}\n            {message.role === \"assistant\" ? (\n              <ArtifactCard\n                message={message}\n                title={message.agent === \"web_source\" ? \"Resource Plan\" : \"Assistant Response\"}\n                type=\"document\"\n                renderMode=\"raw\"\n                defaultExpanded={true}\n                className=\"w-[85%]\"\n                toolCalls={message.toolCalls}\n              />\n            ) : (\n              /* User messages keep the bubble style */\n              message.content && (\n                <MessageBubble message={message}>\n                  <div className=\"flex w-full flex-col break-words\">\n                    <Markdown\n                      className={cn(\n                        message.role === \"user\" &&\n                          \"prose-invert not-dark:text-secondary dark:text-inherit\",\n                      )}\n                    >\n                      {message?.content}\n                    </Markdown>\n                  </div>\n                </MessageBubble>\n              )\n            )}\n          </div>\n        );\n      }\n      if (content) {\n        return (\n          <motion.li\n            className=\"mt-3\"\n            key={messageId}\n            initial={{ opacity: 0, y: 24 }}\n            animate={{ opacity: 1, y: 0 }}\n            style={{ transition: \"all 0.2s ease-out\" }}\n            transition={{\n              duration: 0.2,\n              ease: \"easeOut\",\n            }}\n          >\n            {content}\n          </motion.li>\n        );\n      }\n    }\n    return null;\n  }\n}\n\nfunction MessageBubble({\n  className,\n  message,\n  children,\n}: {\n  className?: string;\n  message: Message;\n  children: React.ReactNode;\n}) {\n  return (\n    <div\n      className={cn(\n        \"group flex w-auto max-w-[90vw] flex-col rounded-2xl px-4 py-3 break-words\",\n        message.role === \"user\" && \"bg-brand rounded-ee-none\",\n        message.role === \"assistant\" && \"bg-card rounded-es-none\",\n        className,\n      )}\n      style={{ wordBreak: \"break-all\" }}\n    >\n      {children}\n    </div>\n  );\n}\n\nfunction ResearchCard({\n  className,\n  researchId,\n  onToggleResearch,\n}: {\n  className?: string;\n  researchId: string;\n  onToggleResearch?: () => void;\n}) {\n  const t = useTranslations(\"chat.research\");\n  const reportId = useStore((state) => state.researchReportIds.get(researchId));\n  const hasReport = reportId !== undefined;\n  const reportGenerating = useStore(\n    (state) => hasReport && state.messages.get(reportId)!.isStreaming,\n  );\n  const openResearchId = useStore((state) => state.openResearchId);\n  const state = useMemo(() => {\n    if (hasReport) {\n      return reportGenerating ? t(\"generatingReport\") : t(\"reportGenerated\");\n    }\n    return t(\"researching\");\n  }, [hasReport, reportGenerating, t]);\n  const msg = useResearchMessage(researchId);\n  const title = useMemo(() => {\n    if (msg) {\n      return parseJSON(msg.content ?? \"\", { title: \"\" }).title;\n    }\n    return undefined;\n  }, [msg]);\n  const handleOpen = useCallback(() => {\n    if (openResearchId === researchId) {\n      closeResearch();\n    } else {\n      openResearch(researchId);\n    }\n    onToggleResearch?.();\n  }, [openResearchId, researchId, onToggleResearch]);\n  return (\n    <Card className={cn(\"w-full\", className)}>\n      <CardHeader>\n        <CardTitle>\n          <RainbowText animated={state !== t(\"reportGenerated\")}>\n            {title !== undefined && title !== \"\" ? title : t(\"deepResearch\")}\n          </RainbowText>\n        </CardTitle>\n      </CardHeader>\n      <CardFooter>\n        <div className=\"flex w-full\">\n          <RollingText className=\"text-muted-foreground flex-grow text-sm\">\n            {state}\n          </RollingText>\n          <Button\n            variant={!openResearchId ? \"default\" : \"outline\"}\n            onClick={handleOpen}\n          >\n            {researchId !== openResearchId ? t(\"open\") : t(\"close\")}\n          </Button>\n        </div>\n      </CardFooter>\n    </Card>\n  );\n}\n\nfunction ThoughtBlock({\n  className,\n  content,\n  isStreaming,\n  hasMainContent,\n  contentChunks,\n}: {\n  className?: string;\n  content: string;\n  isStreaming?: boolean;\n  hasMainContent?: boolean;\n  contentChunks?: string[];\n}) {\n  const t = useTranslations(\"chat.research\");\n  const [isOpen, setIsOpen] = useState(true);\n\n  const [hasAutoCollapsed, setHasAutoCollapsed] = useState(false);\n\n  React.useEffect(() => {\n    if (hasMainContent && !hasAutoCollapsed) {\n      setIsOpen(false);\n      setHasAutoCollapsed(true);\n    }\n  }, [hasMainContent, hasAutoCollapsed]);\n\n  if (!content || content.trim() === \"\") {\n    return null;\n  }\n\n  // Split content into static (previous chunks) and streaming (current chunk)\n  const chunks = contentChunks ?? [];\n  const staticContent = chunks.slice(0, -1).join(\"\");\n  const streamingChunk = isStreaming && chunks.length > 0 ? (chunks[chunks.length - 1] ?? \"\") : \"\";\n  const hasStreamingContent = isStreaming && streamingChunk.length > 0;\n\n  return (\n    <div className={cn(\"mb-6 w-full\", className)}>\n      <Collapsible open={isOpen} onOpenChange={setIsOpen}>\n        <CollapsibleTrigger asChild>\n          <Button\n            variant=\"ghost\"\n            className={cn(\n              \"h-auto w-full justify-start rounded-xl border px-6 py-4 text-left transition-all duration-200\",\n              \"hover:bg-accent hover:text-accent-foreground\",\n              isStreaming\n                ? \"border-primary/20 bg-primary/5 shadow-sm\"\n                : \"border-border bg-card\",\n            )}\n          >\n            <div className=\"flex w-full items-center gap-3\">\n              <Lightbulb\n                size={18}\n                className={cn(\n                  \"shrink-0 transition-colors duration-200\",\n                  isStreaming ? \"text-primary\" : \"text-muted-foreground\",\n                )}\n              />\n              <span\n                className={cn(\n                  \"leading-none font-semibold transition-colors duration-200\",\n                  isStreaming ? \"text-primary\" : \"text-foreground\",\n                )}\n              >\n                {t(\"deepThinking\")}\n              </span>\n              {isStreaming && <LoadingAnimation className=\"ml-2 scale-75\" />}\n              <div className=\"flex-grow\" />\n              {isOpen ? (\n                <ChevronDown\n                  size={16}\n                  className=\"text-muted-foreground transition-transform duration-200\"\n                />\n              ) : (\n                <ChevronRight\n                  size={16}\n                  className=\"text-muted-foreground transition-transform duration-200\"\n                />\n              )}\n            </div>\n          </Button>\n        </CollapsibleTrigger>\n        <CollapsibleContent className=\"data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:slide-up-2 data-[state=open]:slide-down-2 mt-3\">\n          <Card\n            className={cn(\n              \"transition-all duration-200\",\n              isStreaming ? \"border-primary/20 bg-primary/5\" : \"border-border\",\n            )}\n          >\n            <CardContent>\n              <div className=\"flex h-40 w-full overflow-y-auto\">\n                <ScrollContainer\n                  className={cn(\n                    \"flex h-full w-full flex-col overflow-hidden\",\n                    className,\n                  )}\n                  scrollShadow={false}\n                  autoScrollToBottom\n                >\n                  {staticContent && (\n                    <Markdown\n                      className={cn(\n                        \"prose dark:prose-invert max-w-none transition-colors duration-200\",\n                        \"opacity-80\",\n                      )}\n                      animated={false}\n                    >\n                      {staticContent}\n                    </Markdown>\n                  )}\n                  {hasStreamingContent && (\n                    <Markdown\n                      className={cn(\n                        \"prose dark:prose-invert max-w-none transition-colors duration-200\",\n                        \"prose-primary\",\n                      )}\n                      animated={true}\n                    >\n                      {streamingChunk}\n                    </Markdown>\n                  )}\n                  {!hasStreamingContent && (\n                    <Markdown\n                      className={cn(\n                        \"prose dark:prose-invert max-w-none transition-colors duration-200\",\n                        isStreaming ? \"prose-primary\" : \"opacity-80\",\n                      )}\n                      animated={false}\n                    >\n                      {content}\n                    </Markdown>\n                  )}\n                </ScrollContainer>\n              </div>\n            </CardContent>\n          </Card>\n        </CollapsibleContent>\n      </Collapsible>\n    </div>\n  );\n}\n\nconst GREETINGS = [\"Cool\", \"Sounds great\", \"Looks good\", \"Great\", \"Awesome\"];\nfunction PlanCard({\n  className,\n  message,\n  interruptMessage,\n  onFeedback,\n  waitForFeedback,\n  onSendMessage,\n}: {\n  className?: string;\n  message: Message;\n  interruptMessage?: Message | null;\n  onFeedback?: (feedback: { option: Option }) => void;\n  onSendMessage?: (\n    message: string,\n    options?: { interruptFeedback?: string },\n  ) => void;\n  waitForFeedback?: boolean;\n}) {\n  const t = useTranslations(\"chat.research\");\n  const plan = useMemo<{\n    title?: string;\n    thought?: string;\n    steps?: { title?: string; description?: string; tools?: string[] }[];\n  }>(() => {\n    return parseJSON(message.content ?? \"\", {});\n  }, [message.content]);\n\n  const reasoningContent = message.reasoningContent;\n  const hasMainContent = Boolean(\n    message.content && message.content.trim() !== \"\",\n  );\n\n  // \n  const isThinking = Boolean(reasoningContent && !hasMainContent);\n\n  // \n  const shouldShowPlan = hasMainContent;\n  const handleAccept = useCallback(async () => {\n    if (onSendMessage) {\n      onSendMessage(\n        `${GREETINGS[Math.floor(Math.random() * GREETINGS.length)]}! ${Math.random() > 0.5 ? \"Let's get started.\" : \"Let's start.\"}`,\n        {\n          interruptFeedback: \"accepted\",\n        },\n      );\n    }\n  }, [onSendMessage]);\n  return (\n    <div className={cn(\"w-full\", className)}>\n      {reasoningContent && (\n        <ThoughtBlock\n          content={reasoningContent}\n          isStreaming={isThinking}\n          hasMainContent={hasMainContent}\n          contentChunks={message.reasoningContentChunks}\n        />\n      )}\n      {shouldShowPlan && (\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ duration: 0.3, ease: \"easeOut\" }}\n        >\n          <Card className=\"w-full\">\n            <CardHeader>\n              <CardTitle>\n                <Markdown animated={false}>\n                  {`### ${\n                    plan.title !== undefined && plan.title !== \"\"\n                      ? plan.title\n                      : t(\"deepResearch\")\n                  }`}\n                </Markdown>\n              </CardTitle>\n            </CardHeader>\n            <CardContent>\n              <div style={{ wordBreak: 'break-all', whiteSpace: 'normal' }}>\n                <Markdown className=\"opacity-80\" animated={false}>\n                  {plan.thought}\n                </Markdown>\n                {plan.steps && (\n                  <ul className=\"my-2 flex list-decimal flex-col gap-4 border-l-[2px] pl-8\">\n                    {plan.steps.map((step, i) => (\n                      <li key={`step-${i}`} style={{ wordBreak: 'break-all', whiteSpace: 'normal' }}>\n                        <div className=\"flex items-start gap-2\">\n                          <div className=\"flex-1\">\n                            <h3 className=\"mb flex items-center gap-2 text-lg font-medium\">\n                              <Markdown animated={false}>\n                                {step.title}\n                              </Markdown>\n                              {step.tools && step.tools.length > 0 && (\n                                <Tooltip\n                                  title={`Uses ${step.tools.length} MCP tool${step.tools.length > 1 ? \"s\" : \"\"}`}\n                                >\n                                  <div className=\"flex items-center gap-1 rounded-full bg-blue-100 px-2 py-1 text-xs text-blue-800\">\n                                    <Wrench size={12} />\n                                    <span>{step.tools.length}</span>\n                                  </div>\n                                </Tooltip>\n                              )}\n                            </h3>\n                            <div className=\"text-muted-foreground text-sm\" style={{ wordBreak: 'break-all', whiteSpace: 'normal' }}>\n                              <Markdown animated={false}>\n                                {step.description}\n                              </Markdown>\n                            </div>\n                            {step.tools && step.tools.length > 0 && (\n                              <ToolsDisplay tools={step.tools} />\n                            )}\n                          </div>\n                        </div>\n                      </li>\n                    ))}\n                  </ul>\n                )}\n              </div>\n            </CardContent>\n            <CardFooter className=\"flex justify-end\">\n              {!message.isStreaming && interruptMessage?.options?.length && (\n                <motion.div\n                  className=\"flex gap-2\"\n                  initial={{ opacity: 0, y: 12 }}\n                  animate={{ opacity: 1, y: 0 }}\n                  transition={{ duration: 0.3, delay: 0.3 }}\n                >\n                  {interruptMessage?.options.map((option) => (\n                    <Button\n                      key={option.value}\n                      variant={\n                        option.value === \"accepted\" ? \"default\" : \"outline\"\n                      }\n                      disabled={!waitForFeedback}\n                      onClick={() => {\n                        if (option.value === \"accepted\") {\n                          void handleAccept();\n                        } else {\n                          onFeedback?.({\n                            option,\n                          });\n                        }\n                      }}\n                    >\n                      {option.text}\n                    </Button>\n                  ))}\n                </motion.div>\n              )}\n            </CardFooter>\n          </Card>\n        </motion.div>\n      )}\n    </div>\n  );\n}\n\nfunction PodcastCard({\n  className,\n  message,\n}: {\n  className?: string;\n  message: Message;\n}) {\n  const data = useMemo(() => {\n    return JSON.parse(message.content ?? \"\");\n  }, [message.content]);\n  const title = useMemo<string | undefined>(() => data?.title, [data]);\n  const audioUrl = useMemo<string | undefined>(() => data?.audioUrl, [data]);\n  const isGenerating = useMemo(() => {\n    return message.isStreaming;\n  }, [message.isStreaming]);\n  const hasError = useMemo(() => {\n    return data?.error !== undefined;\n  }, [data]);\n  const [isPlaying, setIsPlaying] = useState(false);\n  return (\n    <Card className={cn(\"w-[508px]\", className)}>\n      <CardHeader>\n        <div className=\"text-muted-foreground flex items-center justify-between text-sm\">\n          <div className=\"flex items-center gap-2\">\n            {isGenerating ? <LoadingOutlined /> : <Headphones size={16} />}\n            {!hasError ? (\n              <RainbowText animated={isGenerating}>\n                {isGenerating\n                  ? \"Generating podcast...\"\n                  : isPlaying\n                    ? \"Now playing podcast...\"\n                    : \"Podcast\"}\n              </RainbowText>\n            ) : (\n              <div className=\"text-red-500\">\n                Error when generating podcast. Please try again.\n              </div>\n            )}\n          </div>\n          {!hasError && !isGenerating && (\n            <div className=\"flex\">\n              <Tooltip title=\"Download podcast\">\n                <Button variant=\"ghost\" size=\"icon\" asChild>\n                  <a\n                    href={audioUrl}\n                    download={`${(title ?? \"podcast\").replaceAll(\" \", \"-\")}.mp3`}\n                  >\n                    <Download size={16} />\n                  </a>\n                </Button>\n              </Tooltip>\n            </div>\n          )}\n        </div>\n        <CardTitle>\n          <div className=\"text-lg font-medium\">\n            <RainbowText animated={isGenerating}>{title}</RainbowText>\n          </div>\n        </CardTitle>\n      </CardHeader>\n      <CardContent>\n        {audioUrl ? (\n          <audio\n            className=\"w-full\"\n            src={audioUrl}\n            controls\n            onPlay={() => setIsPlaying(true)}\n            onPause={() => setIsPlaying(false)}\n          />\n        ) : (\n          <div className=\"w-full\"></div>\n        )}\n      </CardContent>\n    </Card>\n  );\n}\n\nfunction ArtifactCard({\n  message,\n  title,\n  type = \"document\",\n  renderMode = \"raw\",\n  defaultExpanded = false,\n  className,\n  toolCalls,\n}: {\n  message: Message;\n  title: string;\n  type?: \"document\" | \"code\";\n  renderMode?: \"raw\" | \"markdown\";\n  defaultExpanded?: boolean;\n  className?: string;\n  toolCalls?: ToolCallRuntime[];\n}) {\n  const [expanded, setExpanded] = useState(defaultExpanded);\n  const [hasAutoCollapsed, setHasAutoCollapsed] = useState(false);\n  const contentRef = useRef<HTMLDivElement | null>(null);\n\n  // Simple heuristic for summary: first 100 chars or first line\n  const summary = useMemo(() => {\n    const content = message.content || \"\";\n    // Get first non-empty line that is NOT a code block delimiter\n    const lines = content.split(\"\\n\").filter((line) => {\n      const trimmed = line.trim();\n      return trimmed !== \"\" && !trimmed.startsWith(\"```\");\n    });\n    const firstLine = lines[0] || \"Content generated.\";\n    return firstLine.replace(/^#+\\s*/, \"\").slice(0, 100); // Remove markdown headers\n  }, [message.content]);\n\n  const reasoningContent = message.reasoningContent;\n  const hasMainContent = Boolean(\n    message.content && message.content.trim() !== \"\",\n  );\n  const isThinking = Boolean(reasoningContent && !hasMainContent);\n\n  //  WebGen / \n  // - defaultExpanded = true\n  // - \n  //   \n  React.useEffect(() => {\n    if (\n      defaultExpanded &&\n      !message.isStreaming &&\n      expanded &&\n      !hasAutoCollapsed\n    ) {\n      setExpanded(false);\n      setHasAutoCollapsed(true);\n    }\n  }, [defaultExpanded, message.isStreaming, expanded, hasAutoCollapsed]);\n\n  React.useEffect(() => {\n    if (!expanded) return;\n    if (!message.isStreaming) return;\n    const el = contentRef.current;\n    if (!el) return;\n    el.scrollTop = el.scrollHeight;\n  }, [message.content, message.isStreaming, expanded]);\n\n  return (\n    <div className=\"flex w-full flex-col\">\n      {reasoningContent && (\n        <div className=\"w-[85%] mb-2\">\n          <ThoughtBlock\n            content={reasoningContent}\n            isStreaming={isThinking}\n            hasMainContent={hasMainContent}\n            contentChunks={message.reasoningContentChunks}\n          />\n        </div>\n      )}\n\n      {toolCalls && toolCalls.length > 0 && (\n        <div className=\"w-[85%] mb-2\">\n          <ToolCallsBlock toolCalls={toolCalls} />\n        </div>\n      )}\n      \n      {/* Only show the artifact card if there is main content */}\n      {hasMainContent && (\n        <Card className={cn(\"w-full overflow-hidden transition-all hover:border-primary/50\", className)}>\n          <div className=\"flex items-center p-4 gap-4\">\n            <div className=\"flex h-10 w-10 shrink-0 items-center justify-center rounded-lg bg-primary/10 text-primary\">\n              {type === \"code\" ? <Code2 size={20} /> : <FileText size={20} />}\n            </div>\n            <div className=\"flex-grow min-w-0 flex flex-col gap-0.5\">\n              <h3 className=\"font-medium text-sm truncate\">{title}</h3>\n              <p className=\"text-xs text-muted-foreground truncate\">\n                {summary}\n                {message.isStreaming && <span className=\"ml-2 animate-pulse\">Generating...</span>}\n              </p>\n            </div>\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              className=\"h-8 w-8 p-0 hover:bg-muted\"\n              onClick={() => setExpanded(!expanded)}\n            >\n              {expanded ? <ChevronUp size={16} /> : <ChevronDown size={16} />}\n            </Button>\n          </div>\n\n          {expanded && (\n            <div\n              ref={contentRef}\n              className=\"border-t bg-muted/30 p-4 max-h-[400px] overflow-y-auto text-sm\"\n            >\n              {renderMode === \"raw\" ? (\n                <pre className=\"whitespace-pre-wrap font-mono text-sm leading-relaxed text-foreground/90\">\n                  {message.content || \"\"}\n                </pre>\n              ) : (\n                <Markdown className=\"prose-sm dark:prose-invert\">\n                  {message.content || \"\"}\n                </Markdown>\n              )}\n            </div>\n          )}\n        </Card>\n      )}\n    </div>\n  );\n}\n\nfunction ToolsDisplay({ tools }: { tools: string[] }) {\n  return (\n    <div className=\"mt-2 flex flex-wrap gap-1\">\n      {tools.map((tool, index) => (\n        <span\n          key={index}\n          className=\"rounded-md bg-muted px-2 py-1 text-xs font-mono text-muted-foreground\"\n        >\n          {tool}\n        </span>\n      ))}\n    </div>\n  );\n}\n\nfunction ToolCallsBlock({ toolCalls }: { toolCalls: ToolCallRuntime[] }) {\n  return (\n    <div className=\"flex flex-col gap-2\">\n      {toolCalls.map((toolCall) => {\n        // Infer running state from the absence of a result\n        const isRunning = toolCall.result === undefined;\n        return (\n          <motion.div\n            key={toolCall.id}\n            initial={{ opacity: 0, y: 5 }}\n            animate={{ opacity: 1, y: 0 }}\n            className=\"flex items-center gap-3 rounded-lg border border-border/50 bg-muted/30 px-3 py-2 text-sm\"\n          >\n            <div className=\"flex h-5 w-5 shrink-0 items-center justify-center\">\n              {isRunning ? (\n                <div className=\"relative flex h-2.5 w-2.5\">\n                  <span className=\"animate-ping absolute inline-flex h-full w-full rounded-full bg-primary opacity-75\"></span>\n                  <span className=\"relative inline-flex h-2.5 w-2.5 rounded-full bg-primary\"></span>\n                </div>\n              ) : (\n                <div className=\"flex h-4 w-4 items-center justify-center rounded-full bg-primary/10 text-primary\">\n                  <svg\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                    viewBox=\"0 0 24 24\"\n                    fill=\"none\"\n                    stroke=\"currentColor\"\n                    strokeWidth=\"3\"\n                    strokeLinecap=\"round\"\n                    strokeLinejoin=\"round\"\n                    className=\"h-2.5 w-2.5\"\n                  >\n                    <polyline points=\"20 6 9 17 4 12\" />\n                  </svg>\n                </div>\n              )}\n            </div>\n            <div className=\"flex flex-col gap-0.5\">\n              <div className=\"flex items-center gap-2\">\n                <span className=\"font-mono text-xs font-medium text-foreground/80\">\n                  {toolCall.name}\n                </span>\n                <span className=\"text-xs text-muted-foreground\">\n                  {isRunning ? \"Running...\" : \"Completed\"}\n                </span>\n              </div>\n              {toolCall.args && Object.keys(toolCall.args).length > 0 && (\n                <div className=\"text-xs text-muted-foreground/70 font-mono truncate max-w-md\">\n                  {(() => {\n                    const args = toolCall.args as Record<string, any>;\n                    const primary = args.TargetFile || args.file_path || args.url || args.query || args.command || args.explanation;\n                    if (primary && typeof primary === 'string') return primary;\n                    try {\n                      return JSON.stringify(args).slice(0, 100);\n                    } catch (e) {\n                      return \"Args...\";\n                    }\n                  })()}\n                </div>\n              )}\n            </div>\n          </motion.div>\n        );\n      })}\n    </div>\n  );\n}\n\nfunction WebGenEditCard({\n  className,\n  message,\n  interruptMessage,\n  onFeedback,\n  waitForFeedback,\n  onSendMessage,\n}: {\n  className?: string;\n  message: Message;\n  interruptMessage?: Message | null;\n  onFeedback?: (feedback: { option: Option }) => void;\n  onSendMessage?: (\n    message: string,\n    options?: { interruptFeedback?: string },\n  ) => void;\n  waitForFeedback?: boolean;\n}) {\n  const handleAction = useCallback(async (value: string, text: string) => {\n    // Map \"edit_plan\" (default from backend interrupt if not customized) to \"EDIT_CODE\"\n    // and \"accepted\" to \"DONE\".\n    let feedbackValue = value;\n    if (value === \"edit_plan\" || text === \"Continue Editing\") feedbackValue = \"EDIT_CODE\";\n    if (value === \"accepted\" || text === \"Finish\") feedbackValue = \"DONE\";\n\n    if (feedbackValue === \"EDIT_CODE\") {\n      // For editing, we want the user to input text.\n      // So we use onFeedback to set the input box state, allowing user to type instructions.\n      if (onFeedback) {\n        onFeedback({ \n          option: { \n            value: feedbackValue, \n            text: \"Continue Editing\" // Label shown in input box\n          } \n        });\n      }\n    } else {\n      // For finishing, we can send immediately without content.\n      if (onSendMessage) {\n        onSendMessage(\n          text, \n          {\n            interruptFeedback: feedbackValue,\n          },\n        );\n      }\n    }\n  }, [onSendMessage, onFeedback]);\n\n  return (\n    <div className={cn(\"w-full\", className)}>\n      <motion.div\n        initial={{ opacity: 0, y: 20 }}\n        animate={{ opacity: 1, y: 0 }}\n        transition={{ duration: 0.3, ease: \"easeOut\" }}\n      >\n        <Card className=\"w-full border-primary/20 bg-primary/5\">\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2 text-lg\">\n              <Lightbulb className=\"text-primary\" size={20} />\n              <span>Code Generation Confirmation</span>\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-sm text-muted-foreground\">\n              <Markdown animated={false}>\n                {message.content || \"Code generation is complete. Please choose to continue editing or finish.\"}\n              </Markdown>\n            </div>\n          </CardContent>\n          <CardFooter className=\"flex justify-end gap-2\">\n            {!message.isStreaming && interruptMessage && (\n              <motion.div\n                className=\"flex gap-2\"\n                initial={{ opacity: 0, y: 12 }}\n                animate={{ opacity: 1, y: 0 }}\n                transition={{ duration: 0.3, delay: 0.3 }}\n              >\n                <Button\n                  variant=\"outline\"\n                  disabled={!waitForFeedback}\n                  onClick={() => handleAction(\"edit_plan\", \"Continue Editing\")}\n                >\n                  Continue Editing\n                </Button>\n                <Button\n                  variant=\"default\"\n                  disabled={!waitForFeedback}\n                  onClick={() => handleAction(\"accepted\", \"Finish\")}\n                >\n                  Finish\n                </Button>\n              </motion.div>\n            )}\n          </CardFooter>\n        </Card>\n      </motion.div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 4652, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/Craft-Agent/web/src/app/chat/components/vibe-home.tsx"],"sourcesContent":["\"use client\";\n\nimport React from \"react\";\n\nimport { useTheme } from \"next-themes\";\nimport type { Option, Resource } from \"~/core/messages\";\nimport { cn } from \"~/lib/utils\";\n\nimport { InputBox } from \"./input-box\";\n\nexport interface VibeHomeProps {\n  className?: string;\n  responding?: boolean;\n  feedback?: { option: Option } | null;\n  onSend?: (\n    message: string,\n    options?: {\n      interruptFeedback?: string;\n      resources?: Array<Resource>;\n    },\n  ) => void | Promise<void>;\n  onCancel?: () => void;\n  onRemoveFeedback?: () => void;\n}\n\nexport function VibeHome({\n  className,\n  responding,\n  feedback,\n  onSend,\n  onCancel,\n  onRemoveFeedback,\n}: VibeHomeProps) {\n  const { resolvedTheme = \"dark\" } = useTheme();\n  return (\n    <div\n      className={cn(\n        \"relative flex h-full w-full items-center justify-center overflow-hidden bg-background\",\n        resolvedTheme === \"light\" ? \"text-black\" : \"text-white\",\n        className,\n      )}\n    >\n      {/* background glow */}\n      <div className=\"pointer-events-none absolute inset-0 overflow-hidden\">\n        <div className=\"absolute top-10 left-10 h-64 w-64 rounded-full bg-gradient-to-br from-[#0071e3]/10 to-transparent blur-3xl\" />\n        <div className=\"absolute bottom-10 right-10 h-64 w-64 rounded-full bg-gradient-to-tl from-[#00d4ff]/10 to-transparent blur-3xl\" />\n      </div>\n\n      <div className=\"relative z-10 w-full max-w-3xl px-4 py-8 md:px-0 md:py-10\">\n        {/* title */}\n        <div className=\"apple-animate-in text-center space-y-3 md:space-y-4\">\n          <div className=\"space-y-1\">\n            <h1\n              className={cn(\n                \"mb-2 text-5xl font-black leading-[0.85] tracking-tighter md:text-[5rem]\",\n                resolvedTheme === \"light\" ? \"text-black\" : \"text-white\",\n              )}\n              style={{ fontFamily: \"system-ui, -apple-system, sans-serif\" }}\n            >\n              Craft-Agent\n            </h1>\n            <h2\n              className={cn(\n                \"-mt-2 text-xl font-light italic leading-none tracking-wide md:text-[2.2rem]\",\n                resolvedTheme === \"light\" ? \"text-zinc-700\" : \"text-zinc-300\",\n              )}\n              style={{ fontFamily: \"Georgia, serif\" }}\n            >\n              Research Studio\n            </h2>\n          </div>\n          <p\n            className={cn(\n              \"mx-auto max-w-2xl px-4 pt-3 text-sm font-light leading-relaxed md:px-0 md:text-lg\",\n              resolvedTheme === \"light\" ? \"text-zinc-600\" : \"text-zinc-400\",\n            )}\n            style={{ fontFamily: \"system-ui, sans-serif\" }}\n          >\n             Craft-Agent \n          </p>\n        </div>\n\n        {/* centered chat-style input box */}\n        <div className=\"apple-animate-in apple-animate-delay-1 mt-8 md:mt-10\">\n          <InputBox\n            className=\"mx-auto w-full max-w-3xl\"\n            responding={responding}\n            feedback={feedback}\n            onSend={onSend}\n            onCancel={onCancel}\n            onRemoveFeedback={onRemoveFeedback}\n          />\n        </div>\n\n        {/* footer */}\n        <footer\n          className={cn(\n            \"apple-animate-in apple-animate-delay-2 mt-8 py-4 text-center text-xs font-light md:mt-12 md:text-sm\",\n            resolvedTheme === \"light\" ? \"text-zinc-600\" : \"text-zinc-500\",\n          )}\n        >\n          <span className=\"mx-2\">Deep exploration - Efficient research - Agentic workflows</span>\n        </footer>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AAIA;AAEA;AAEA;;;AARA;;;;AAyBO,SAAS,SAAS,KAOT;QAPS,EACvB,SAAS,EACT,UAAU,EACV,QAAQ,EACR,MAAM,EACN,QAAQ,EACR,gBAAgB,EACF,GAPS;;IAQvB,MAAM,EAAE,gBAAgB,MAAM,EAAE,GAAG,CAAA,GAAA,2RAAA,CAAA,WAAQ,AAAD;IAC1C,qBACE,sYAAC;QACC,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,yFACA,kBAAkB,UAAU,eAAe,cAC3C;;0BAIF,sYAAC;gBAAI,WAAU;;kCACb,sYAAC;wBAAI,WAAU;;;;;;kCACf,sYAAC;wBAAI,WAAU;;;;;;;;;;;;0BAGjB,sYAAC;gBAAI,WAAU;;kCAEb,sYAAC;wBAAI,WAAU;;0CACb,sYAAC;gCAAI,WAAU;;kDACb,sYAAC;wCACC,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,2EACA,kBAAkB,UAAU,eAAe;wCAE7C,OAAO;4CAAE,YAAY;wCAAuC;kDAC7D;;;;;;kDAGD,sYAAC;wCACC,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,+EACA,kBAAkB,UAAU,kBAAkB;wCAEhD,OAAO;4CAAE,YAAY;wCAAiB;kDACvC;;;;;;;;;;;;0CAIH,sYAAC;gCACC,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,qFACA,kBAAkB,UAAU,kBAAkB;gCAEhD,OAAO;oCAAE,YAAY;gCAAwB;0CAC9C;;;;;;;;;;;;kCAMH,sYAAC;wBAAI,WAAU;kCACb,cAAA,sYAAC,oJAAA,CAAA,WAAQ;4BACP,WAAU;4BACV,YAAY;4BACZ,UAAU;4BACV,QAAQ;4BACR,UAAU;4BACV,kBAAkB;;;;;;;;;;;kCAKtB,sYAAC;wBACC,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,uGACA,kBAAkB,UAAU,kBAAkB;kCAGhD,cAAA,sYAAC;4BAAK,WAAU;sCAAO;;;;;;;;;;;;;;;;;;;;;;;AAKjC;GAjFgB;;QAQqB,2RAAA,CAAA,WAAQ;;;KAR7B","debugId":null}},
    {"offset": {"line": 4813, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/Craft-Agent/web/src/app/chat/components/web-dev-home.tsx"],"sourcesContent":["\"use client\";\n\nimport React from \"react\";\n\nimport { useTheme } from \"next-themes\";\nimport type { Option, Resource } from \"~/core/messages\";\nimport { cn } from \"~/lib/utils\";\n\nimport { InputBox } from \"./input-box\";\n\nexport interface WebDevHomeProps {\n  className?: string;\n  responding?: boolean;\n  feedback?: { option: Option } | null;\n  onSend?: (\n    message: string,\n    options?: {\n      interruptFeedback?: string;\n      resources?: Array<Resource>;\n    },\n  ) => void | Promise<void>;\n  onCancel?: () => void;\n  onRemoveFeedback?: () => void;\n}\n\nexport function WebDevHome({\n  className,\n  responding,\n  feedback,\n  onSend,\n  onCancel,\n  onRemoveFeedback,\n}: WebDevHomeProps) {\n  const { resolvedTheme = \"dark\" } = useTheme();\n  return (\n    <div\n      className={cn(\n        \"relative flex h-full w-full items-center justify-center overflow-hidden bg-background\",\n        resolvedTheme === \"light\" ? \"text-black\" : \"text-white\",\n        className,\n      )}\n    >\n      {/* background glow */}\n      <div className=\"pointer-events-none absolute inset-0 overflow-hidden\">\n        <div className=\"absolute top-10 left-10 h-64 w-64 rounded-full bg-gradient-to-br from-[#0071e3]/10 to-transparent blur-3xl\" />\n        <div className=\"absolute bottom-10 right-10 h-64 w-64 rounded-full bg-gradient-to-tl from-[#00d4ff]/10 to-transparent blur-3xl\" />\n      </div>\n\n      <div className=\"relative z-10 w-full max-w-3xl px-4 py-8 md:px-0 md:py-10\">\n        {/* title */}\n        <div className=\"apple-animate-in text-center space-y-3 md:space-y-4\">\n          <div className=\"space-y-1\">\n            <h1\n              className={cn(\n                \"mb-2 text-5xl font-black leading-[0.85] tracking-tighter md:text-[5rem]\",\n                resolvedTheme === \"light\" ? \"text-black\" : \"text-white\",\n              )}\n              style={{ fontFamily: \"system-ui, -apple-system, sans-serif\" }}\n            >\n              Craft-Agent\n            </h1>\n            <h2\n              className={cn(\n                \"-mt-2 text-xl font-light italic leading-none tracking-wide md:text-[2.2rem]\",\n                resolvedTheme === \"light\" ? \"text-zinc-700\" : \"text-zinc-300\",\n              )}\n              style={{ fontFamily: \"Georgia, serif\" }}\n            >\n              Website Studio\n            </h2>\n          </div>\n          <p\n            className={cn(\n              \"mx-auto max-w-2xl px-4 pt-3 text-sm font-light leading-relaxed md:px-0 md:text-lg\",\n              resolvedTheme === \"light\" ? \"text-zinc-600\" : \"text-zinc-400\",\n            )}\n            style={{ fontFamily: \"system-ui, sans-serif\" }}\n          >\n             Craft-Agent \n          </p>\n        </div>\n\n        {/* centered chat-style input box */}\n        <div className=\"apple-animate-in apple-animate-delay-1 mt-8 md:mt-10\">\n          <InputBox\n            className=\"mx-auto w-full max-w-3xl\"\n            responding={responding}\n            feedback={feedback}\n            onSend={onSend}\n            onCancel={onCancel}\n            onRemoveFeedback={onRemoveFeedback}\n            showModeToggles={false}\n            placeholder=\"\"\n            enableConfig={false}\n          />\n        </div>\n\n        {/* footer */}\n        <footer\n          className={cn(\n            \"apple-animate-in apple-animate-delay-2 mt-8 py-4 text-center text-xs font-light md:mt-12 md:text-sm\",\n            resolvedTheme === \"light\" ? \"text-zinc-600\" : \"text-zinc-500\",\n          )}\n        >\n          <span className=\"mx-2\">From research to website - Instant generation - Production-ready pages</span>\n        </footer>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AAIA;AAEA;AAEA;;;AARA;;;;AAyBO,SAAS,WAAW,KAOT;QAPS,EACzB,SAAS,EACT,UAAU,EACV,QAAQ,EACR,MAAM,EACN,QAAQ,EACR,gBAAgB,EACA,GAPS;;IAQzB,MAAM,EAAE,gBAAgB,MAAM,EAAE,GAAG,CAAA,GAAA,2RAAA,CAAA,WAAQ,AAAD;IAC1C,qBACE,sYAAC;QACC,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,yFACA,kBAAkB,UAAU,eAAe,cAC3C;;0BAIF,sYAAC;gBAAI,WAAU;;kCACb,sYAAC;wBAAI,WAAU;;;;;;kCACf,sYAAC;wBAAI,WAAU;;;;;;;;;;;;0BAGjB,sYAAC;gBAAI,WAAU;;kCAEb,sYAAC;wBAAI,WAAU;;0CACb,sYAAC;gCAAI,WAAU;;kDACb,sYAAC;wCACC,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,2EACA,kBAAkB,UAAU,eAAe;wCAE7C,OAAO;4CAAE,YAAY;wCAAuC;kDAC7D;;;;;;kDAGD,sYAAC;wCACC,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,+EACA,kBAAkB,UAAU,kBAAkB;wCAEhD,OAAO;4CAAE,YAAY;wCAAiB;kDACvC;;;;;;;;;;;;0CAIH,sYAAC;gCACC,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,qFACA,kBAAkB,UAAU,kBAAkB;gCAEhD,OAAO;oCAAE,YAAY;gCAAwB;0CAC9C;;;;;;;;;;;;kCAMH,sYAAC;wBAAI,WAAU;kCACb,cAAA,sYAAC,oJAAA,CAAA,WAAQ;4BACP,WAAU;4BACV,YAAY;4BACZ,UAAU;4BACV,QAAQ;4BACR,UAAU;4BACV,kBAAkB;4BAClB,iBAAiB;4BACjB,aAAY;4BACZ,cAAc;;;;;;;;;;;kCAKlB,sYAAC;wBACC,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,uGACA,kBAAkB,UAAU,kBAAkB;kCAGhD,cAAA,sYAAC;4BAAK,WAAU;sCAAO;;;;;;;;;;;;;;;;;;;;;;;AAKjC;GApFgB;;QAQqB,2RAAA,CAAA,WAAQ;;;KAR7B","debugId":null}},
    {"offset": {"line": 4977, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/Craft-Agent/web/src/app/chat/components/welcome.tsx"],"sourcesContent":["// Copyright (c) 2025 Bytedance Ltd. and/or its affiliates\n// SPDX-License-Identifier: MIT\n\nimport { motion } from \"framer-motion\";\nimport { useTranslations } from \"next-intl\";\n\nimport { cn } from \"~/lib/utils\";\n\nexport function Welcome({ className }: { className?: string }) {\n  const t = useTranslations(\"chat.welcome\");\n\n  return (\n    <motion.div\n      className={cn(\"flex flex-col\", className)}\n      style={{ transition: \"all 0.2s ease-out\" }}\n      initial={{ opacity: 0, scale: 0.85 }}\n      animate={{ opacity: 1, scale: 1 }}\n    >\n      <h3 className=\"mb-2 text-center text-3xl font-medium\">{t(\"greeting\")}</h3>\n      <div className=\"text-muted-foreground px-4 text-center text-lg\">\n        {t(\"description\")}\n      </div>\n    </motion.div>\n  );\n}\n"],"names":[],"mappings":"AAAA,0DAA0D;AAC1D,+BAA+B;;;;;AAE/B;AACA;AAEA;;;;;;AAEO,SAAS,QAAQ,KAAqC;QAArC,EAAE,SAAS,EAA0B,GAArC;;IACtB,MAAM,IAAI,CAAA,GAAA,8ZAAA,CAAA,kBAAe,AAAD,EAAE;IAE1B,qBACE,sYAAC,wUAAA,CAAA,SAAM,CAAC,GAAG;QACT,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,iBAAiB;QAC/B,OAAO;YAAE,YAAY;QAAoB;QACzC,SAAS;YAAE,SAAS;YAAG,OAAO;QAAK;QACnC,SAAS;YAAE,SAAS;YAAG,OAAO;QAAE;;0BAEhC,sYAAC;gBAAG,WAAU;0BAAyC,EAAE;;;;;;0BACzD,sYAAC;gBAAI,WAAU;0BACZ,EAAE;;;;;;;;;;;;AAIX;GAhBgB;;QACJ,8ZAAA,CAAA,kBAAe;;;KADX","debugId":null}},
    {"offset": {"line": 5049, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/Craft-Agent/web/src/app/chat/components/messages-block.tsx"],"sourcesContent":["// Copyright (c) 2025 Bytedance Ltd. and/or its affiliates\n// SPDX-License-Identifier: MIT\n\nimport { motion } from \"framer-motion\";\nimport { FastForward, Play } from \"lucide-react\";\nimport { useTranslations } from \"next-intl\";\nimport { usePathname } from \"next/navigation\";\nimport { useCallback, useEffect, useRef, useState } from \"react\";\nimport { toast } from \"sonner\";\n\nimport { RainbowText } from \"~/components/deer-flow/rainbow-text\";\nimport { Button } from \"~/components/ui/button\";\nimport {\n  Card,\n  CardDescription,\n  CardHeader,\n  CardTitle,\n} from \"~/components/ui/card\";\nimport { fastForwardReplay } from \"~/core/api\";\nimport { useReplayMetadata } from \"~/core/api/hooks\";\nimport type { Option, Resource } from \"~/core/messages\";\nimport { useReplay } from \"~/core/replay\";\nimport { sendMessage, useMessageIds, useStore } from \"~/core/store\";\nimport { env } from \"~/env\";\nimport { cn } from \"~/lib/utils\";\n\nimport { InputBox } from \"./input-box\";\nimport { MessageListView } from \"./message-list-view\";\nimport { VibeHome } from \"./vibe-home\";\nimport { WebDevHome } from \"./web-dev-home\";\nimport { Welcome } from \"./welcome\";\n\nexport function MessagesBlock({ className }: { className?: string }) {\n  const t = useTranslations(\"chat.messages\");\n  const pathname = usePathname();\n  const isWebDev = pathname?.startsWith(\"/web-dev\");\n  const HomeComponent = isWebDev ? WebDevHome : VibeHome;\n  const messageIds = useMessageIds();\n  const messageCount = messageIds.length;\n  const responding = useStore((state) => state.responding);\n  \n  const webDevProjectId = useStore((state) => state.webDevProjectId);\n  const setWebDevProjectId = useStore((state) => state.setWebDevProjectId);\n\n  useEffect(() => {\n    if (isWebDev && !webDevProjectId) {\n      const newId = Math.floor(100000 + Math.random() * 900000).toString();\n      setWebDevProjectId(newId);\n    }\n  }, [isWebDev, webDevProjectId, setWebDevProjectId]);\n\n  const { isReplay } = useReplay();\n  const { title: replayTitle, hasError: replayHasError } = useReplayMetadata();\n  const [replayStarted, setReplayStarted] = useState(false);\n  const abortControllerRef = useRef<AbortController | null>(null);\n  const [feedback, setFeedback] = useState<{ option: Option } | null>(null);\n  const handleSend = useCallback(\n    async (\n      message: string,\n      options?: {\n        interruptFeedback?: string;\n        resources?: Array<Resource>;\n      },\n    ) => {\n      const abortController = new AbortController();\n      abortControllerRef.current = abortController;\n      try {\n        await sendMessage(\n          message,\n          {\n            interruptFeedback:\n              options?.interruptFeedback ?? feedback?.option.value,\n            resources: options?.resources,\n            extraParams: isWebDev ? { number: webDevProjectId } : undefined,\n          },\n          {\n            abortSignal: abortController.signal,\n          },\n        );\n      } catch (e) {\n        console.error(\"Failed to send message:\", e);\n        toast.error(`: ${e instanceof Error ? e.message : String(e)}`);\n      }\n    },\n    [feedback, isWebDev, webDevProjectId],\n  );\n  const handleCancel = useCallback(() => {\n    abortControllerRef.current?.abort();\n    abortControllerRef.current = null;\n  }, []);\n  const handleFeedback = useCallback(\n    (feedback: { option: Option }) => {\n      setFeedback(feedback);\n    },\n    [setFeedback],\n  );\n  const handleRemoveFeedback = useCallback(() => {\n    setFeedback(null);\n  }, [setFeedback]);\n  const handleStartReplay = useCallback(() => {\n    setReplayStarted(true);\n    void sendMessage();\n  }, [setReplayStarted]);\n  const [fastForwarding, setFastForwarding] = useState(false);\n  const handleFastForwardReplay = useCallback(() => {\n    setFastForwarding(!fastForwarding);\n    fastForwardReplay(!fastForwarding);\n  }, [fastForwarding]);\n  const showLanding = !isReplay && !responding && messageCount === 0;\n  return (\n    <div className={cn(\"relative flex h-full flex-col\", className)}>\n      {showLanding && (\n        <div className=\"pointer-events-auto absolute inset-0 z-10 flex flex-col\">\n          <HomeComponent\n            responding={responding}\n            feedback={feedback}\n            onSend={handleSend}\n            onCancel={handleCancel}\n            onRemoveFeedback={handleRemoveFeedback}\n          />\n        </div>\n      )}\n      <div\n        className={cn(\n          \"flex h-full flex-col transition-opacity duration-300\",\n          showLanding && \"pointer-events-none opacity-0\",\n        )}\n      >\n        <MessageListView\n          className=\"flex flex-grow\"\n          onFeedback={handleFeedback}\n          onSendMessage={handleSend}\n        />\n        {!isReplay ? (\n          <div className=\"relative flex h-42 shrink-0 pb-4\">\n            <InputBox\n              className=\"h-full w-full\"\n              responding={responding}\n              feedback={feedback}\n              onSend={handleSend}\n              onCancel={handleCancel}\n              onRemoveFeedback={handleRemoveFeedback}\n              showModeToggles={!isWebDev}\n              placeholder={\n                isWebDev\n                  ? \"\"\n                  : undefined\n              }\n              enableConfig={!isWebDev}\n            />\n          </div>\n        ) : (\n          <>\n          <div\n            className={cn(\n              \"fixed bottom-[calc(50vh+80px)] left-0 transition-all duration-500 ease-out\",\n              replayStarted && \"pointer-events-none scale-150 opacity-0\",\n            )}\n          >\n            <Welcome />\n          </div>\n          <motion.div\n            className=\"mb-4 h-fit w-full items-center justify-center\"\n            initial={{ opacity: 0, y: \"20vh\" }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ duration: 0.5 }}\n          >\n            <Card\n              className={cn(\n                \"w-full transition-all duration-300\",\n                !replayStarted && \"translate-y-[-40vh]\",\n              )}\n            >\n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex flex-grow items-center\">\n                  {responding && (\n                    <motion.div\n                      className=\"ml-3\"\n                      initial={{ opacity: 0, scale: 0.8 }}\n                      animate={{ opacity: 1, scale: 1 }}\n                      exit={{ opacity: 0, scale: 0.8 }}\n                      transition={{ duration: 0.3 }}\n                    >\n                      <video\n                        // Walking deer animation, designed by @liangzhaojun. Thank you for creating it!\n                        src=\"/images/walking_deer.webm\"\n                        autoPlay\n                        loop\n                        muted\n                        className=\"h-[42px] w-[42px] object-contain\"\n                      />\n                    </motion.div>\n                  )}\n                  <CardHeader className={cn(\"flex-grow\", responding && \"pl-3\")}>\n                    <CardTitle>\n                      <RainbowText animated={responding}>\n                        {responding ? t(\"replaying\") : `${replayTitle}`}\n                      </RainbowText>\n                    </CardTitle>\n                    <CardDescription>\n                      <RainbowText animated={responding}>\n                        {responding\n                          ? t(\"replayDescription\")\n                          : replayStarted\n                            ? t(\"replayHasStopped\")\n                            : t(\"replayModeDescription\")}\n                      </RainbowText>\n                    </CardDescription>\n                  </CardHeader>\n                </div>\n                {!replayHasError && (\n                  <div className=\"pr-4\">\n                    {responding && (\n                      <Button\n                        className={cn(fastForwarding && \"animate-pulse\")}\n                        variant={fastForwarding ? \"default\" : \"outline\"}\n                        onClick={handleFastForwardReplay}\n                      >\n                        <FastForward size={16} />\n                        {t(\"fastForward\")}\n                      </Button>\n                    )}\n                    {!replayStarted && (\n                      <Button className=\"w-24\" onClick={handleStartReplay}>\n                        <Play size={16} />\n                        {t(\"play\")}\n                      </Button>\n                    )}\n                  </div>\n                )}\n              </div>\n            </Card>\n            {!replayStarted && env.NEXT_PUBLIC_STATIC_WEBSITE_ONLY && (\n              <div className=\"text-muted-foreground w-full text-center text-xs\">\n                {t(\"demoNotice\")}{\" \"}\n                <a\n                  className=\"underline\"\n                  href=\"https://github.com/ipvoov/Craft-Agent\"\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                >\n                  {t(\"clickHere\")}\n                </a>{\" \"}\n                {t(\"cloneLocally\")}\n              </div>\n            )}\n          </motion.div>\n        </>\n      )}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 5493, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/Craft-Agent/web/src/app/web-dev/ide.tsx"],"sourcesContent":["// Copyright (c) 2025 Bytedance Ltd. and/or its affiliates\n// SPDX-License-Identifier: MIT\n\n\"use client\";\n\nimport { \n  FileJson, \n  FileCode, \n  Folder, \n  FolderOpen, \n  ChevronRight, \n  ChevronDown,\n  Settings,\n  Download,\n  Share,\n  Maximize2,\n  Minimize2,\n  Eye,\n  Code2,\n  MousePointer2,\n  X,\n  RotateCw\n} from \"lucide-react\";\nimport { useState, useEffect, useRef } from \"react\";\nimport { Panel, PanelGroup, PanelResizeHandle } from \"react-resizable-panels\";\nimport { Prism as SyntaxHighlighter } from \"react-syntax-highlighter\";\nimport { vscDarkPlus } from \"react-syntax-highlighter/dist/esm/styles/prism\";\n\nimport { cn } from \"~/lib/utils\";\nimport { Button } from \"~/components/ui/button\";\nimport { useToolCalls, useStore } from \"~/core/store\";\nimport { env } from \"~/env\";\n\ninterface FileNode {\n  name: string;\n  type: \"file\" | \"directory\";\n  children?: FileNode[];\n  path?: string; // Added manually for easy access\n}\n\ninterface SelectedElementInfo {\n  tagName: string;\n  id: string;\n  className: string;\n  innerText: string;\n  outerHTML: string;\n  path?: string; // Source file path\n}\n\nfunction findFirstFile(nodes: FileNode[], currentPath = \"\"): { node: FileNode, path: string } | null {\n  for (const node of nodes) {\n    const fullPath = currentPath ? `${currentPath}/${node.name}` : node.name;\n    if (node.type === 'file') {\n      return { node, path: fullPath };\n    }\n    if (node.children) {\n      const found = findFirstFile(node.children, fullPath);\n      if (found) return found;\n    }\n  }\n  return null;\n}\n\nconst isImageFile = (name: string) => {\n  return /\\.(jpg|jpeg|png|gif|svg|webp|ico|bmp)$/i.test(name);\n};\n\nconst getLanguageFromFilename = (name: string) => {\n  const ext = name.split('.').pop()?.toLowerCase();\n  switch (ext) {\n    case 'js': return 'javascript';\n    case 'jsx': return 'jsx';\n    case 'ts': return 'typescript';\n    case 'tsx': return 'tsx';\n    case 'html': return 'html';\n    case 'css': return 'css';\n    case 'json': return 'json';\n    case 'md': return 'markdown';\n    case 'py': return 'python';\n    case 'yml':\n    case 'yaml': return 'yaml';\n    default: return 'text';\n  }\n};\n\nconst inspectorScript = `\n(function() {\n  let active = false;\n  let hoveredElement = null;\n\n  function handleMouseOver(e) {\n    if (!active) return;\n    e.stopPropagation();\n    e.preventDefault();\n    \n    if (hoveredElement) {\n      hoveredElement.style.outline = '';\n    }\n    \n    hoveredElement = e.target;\n    hoveredElement.style.outline = '2px solid #3b82f6';\n    hoveredElement.style.cursor = 'crosshair';\n  }\n\n  function handleMouseOut(e) {\n    if (!active) return;\n    e.stopPropagation();\n    e.preventDefault();\n    if (e.target) {\n      e.target.style.outline = '';\n    }\n  }\n\n  function handleClick(e) {\n    if (!active) return;\n    e.stopPropagation();\n    e.preventDefault();\n    \n    if (e.target) {\n      const el = e.target;\n      const info = {\n        tagName: el.tagName.toLowerCase(),\n        id: el.id,\n        className: el.className,\n        innerText: el.innerText.substring(0, 50),\n        outerHTML: el.outerHTML\n      };\n      \n      window.parent.postMessage({ type: 'element-selected', payload: info }, '*');\n      \n      // Optional: Disable inspector after selection\n      // active = false;\n      // if (hoveredElement) hoveredElement.style.outline = '';\n    }\n  }\n\n  window.addEventListener('message', (e) => {\n    if (e.data.type === 'toggle-inspector') {\n      active = e.data.active;\n      if (!active && hoveredElement) {\n        hoveredElement.style.outline = '';\n        hoveredElement = null;\n      }\n    }\n  });\n\n  document.addEventListener('mouseover', handleMouseOver, true);\n  document.addEventListener('mouseout', handleMouseOut, true);\n  document.addEventListener('click', handleClick, true);\n})();\n`;\n\nconst FileTreeItem = ({ \n  node, \n  depth = 0, \n  onFileClick, \n  expandedPaths, \n  toggleExpand,\n  currentPath \n}: { \n  node: FileNode, \n  depth: number, \n  onFileClick: (node: FileNode) => void, \n  expandedPaths: Set<string>, \n  toggleExpand: (path: string) => void,\n  currentPath: string\n}) => {\n  const fullPath = currentPath ? `${currentPath}/${node.name}` : node.name;\n  const isExpanded = expandedPaths.has(fullPath);\n  const paddingLeft = `${depth * 12 + 8}px`;\n\n  if (node.type === \"directory\") {\n    return (\n      <div>\n        <div \n          className=\"flex cursor-pointer items-center gap-1 rounded px-2 py-1 text-sm hover:bg-white/5 text-gray-400 hover:text-white\"\n          style={{ paddingLeft }}\n          onClick={() => toggleExpand(fullPath)}\n        >\n          {isExpanded ? <ChevronDown size={14} /> : <ChevronRight size={14} />}\n          {isExpanded ? <FolderOpen size={14} className=\"text-blue-400\" /> : <Folder size={14} />}\n          <span className=\"truncate\">{node.name}</span>\n        </div>\n        {isExpanded && node.children && (\n          <div>\n            {node.children.map((child) => (\n              <FileTreeItem \n                key={child.name} \n                node={child} \n                depth={depth + 1} \n                onFileClick={onFileClick} \n                expandedPaths={expandedPaths}\n                toggleExpand={toggleExpand}\n                currentPath={fullPath}\n              />\n            ))}\n          </div>\n        )}\n      </div>\n    );\n  }\n\n  return (\n    <div \n      className=\"flex cursor-pointer items-center gap-1 rounded px-2 py-1 text-sm hover:bg-white/5 text-gray-400 hover:text-white\"\n      style={{ paddingLeft }}\n      onClick={() => onFileClick({ ...node, path: fullPath })}\n    >\n      <span className=\"w-[14px]\" />\n      <FileCode size={14} />\n      <span className=\"truncate\">{node.name}</span>\n    </div>\n  );\n};\n\nexport function IdeBlock({ className, projectId }: { className?: string, projectId?: string | null }) {\n  const [projectNum, setProjectNum] = useState<string | null>(projectId || null);\n  const [files, setFiles] = useState<FileNode[]>([]);\n  const [activeFile, setActiveFile] = useState<{name: string, content: string, path: string, isImage?: boolean} | null>(null);\n  const [isMaximized, setIsMaximized] = useState(false);\n  const [viewMode, setViewMode] = useState<'code' | 'preview'>('code');\n  const [expandedPaths, setExpandedPaths] = useState<Set<string>>(new Set());\n  const [previewRefreshKey, setPreviewRefreshKey] = useState(0);\n  \n  // Inspector States\n  const [isInspecting, setIsInspecting] = useState(false);\n  const [selectedElement, setSelectedElement] = useState<SelectedElementInfo | null>(null);\n  const iframeRef = useRef<HTMLIFrameElement>(null);\n  \n  const toolCalls = useToolCalls();\n  const responding = useStore(state => state.responding);\n  const setInputContent = useStore(state => state.setInputContent);\n  const prevResponding = useRef(responding);\n\n  // Helper: Find source file containing the HTML fragment\n  const findSourceFile = async (htmlFragment: string) => {\n    if (!htmlFragment || htmlFragment.length < 10) return null;\n    \n    // Normalize fragment (remove extra spaces/newlines)\n    const normalizedFragment = htmlFragment.replace(/\\s+/g, ' ').trim().substring(0, 100);\n    \n    // Search in HTML files\n    const searchInNode = async (nodes: FileNode[], currentPath = \"\"): Promise<string | null> => {\n      for (const node of nodes) {\n        const fullPath = currentPath ? `${currentPath}/${node.name}` : node.name;\n        if (node.type === 'file' && /\\.(html|js|jsx|tsx)$/.test(node.name)) {\n           try {\n             const baseUrl = env.NEXT_PUBLIC_API_URL || 'http://localhost:8001/api';\n             const res = await fetch(`${baseUrl}/preview/project_${projectNum}/${fullPath}`);\n             const content = await res.text();\n             // Simple inclusion check\n             if (content.replace(/\\s+/g, ' ').includes(normalizedFragment)) {\n               return fullPath;\n             }\n           } catch (e) {}\n        } else if (node.children) {\n           const found = await searchInNode(node.children, fullPath);\n           if (found) return found;\n        }\n      }\n      return null;\n    };\n    \n    return await searchInNode(files);\n  };\n\n  // Effect: Listen for element selection messages\n  useEffect(() => {\n    const handleMessage = async (e: MessageEvent) => {\n      if (e.data.type === 'element-selected') {\n        const info = e.data.payload as SelectedElementInfo;\n        // Try to find source file\n        if (projectNum && files.length > 0) {\n           const path = await findSourceFile(info.outerHTML);\n           if (path) info.path = path;\n        }\n        setSelectedElement(info);\n        setIsInspecting(false); // Auto-exit inspector mode on selection\n        // Notify iframe to stop inspection visual\n        if (iframeRef.current?.contentWindow) {\n           iframeRef.current.contentWindow.postMessage({ type: 'toggle-inspector', active: false }, '*');\n        }\n      }\n    };\n    window.addEventListener('message', handleMessage);\n    return () => window.removeEventListener('message', handleMessage);\n  }, [files, projectNum]);\n\n  // Effect: Fetch and process preview HTML to handle cross-origin script injection\n  const [previewSrcDoc, setPreviewSrcDoc] = useState<string | null>(null);\n  \n  useEffect(() => {\n    if (viewMode === 'preview' && projectNum) {\n       const baseUrl = env.NEXT_PUBLIC_API_URL || 'http://localhost:8001/api';\n       \n       // Determine which file to preview\n       let filePath = 'index.html';\n       if (activeFile && activeFile.name.endsWith('.html')) {\n         filePath = activeFile.path; // activeFile.path is relative to project root e.g. \"articles.html\" or \"sub/page.html\"\n       }\n       \n       const url = `${baseUrl}/preview/project_${projectNum}/${filePath}?t=${Date.now()}`;\n       \n       fetch(url)\n         .then(res => {\n            if (!res.ok) throw new Error(\"Not found\");\n            return res.text();\n         })\n         .then(html => {\n            // Inject base tag for relative assets\n            // Ensure base href ends with / if it's a directory, or is the directory of the file\n            // But here url is full file path. We want the directory.\n            const lastSlash = url.lastIndexOf('/');\n            const baseHref = url.substring(0, lastSlash + 1);\n            \n            const baseTag = `<base href=\"${baseHref}\">`;\n            // Inject inspector script\n            const scriptTag = `<script>${inspectorScript}</script>`;\n            \n            // Insert base tag after head\n            let processedHtml = html;\n            if (processedHtml.includes('<head>')) {\n               processedHtml = processedHtml.replace('<head>', `<head>${baseTag}`);\n            } else {\n               processedHtml = `<head>${baseTag}</head>${processedHtml}`;\n            }\n            \n            // Insert script before body end\n            if (processedHtml.includes('</body>')) {\n               processedHtml = processedHtml.replace('</body>', `${scriptTag}</body>`);\n            } else {\n               processedHtml += scriptTag;\n            }\n            \n            setPreviewSrcDoc(processedHtml);\n         })\n         .catch(() => {\n            setPreviewSrcDoc(null);\n         });\n    } else {\n      setPreviewSrcDoc(null);\n    }\n  }, [viewMode, projectNum, activeFile, previewRefreshKey]);\n\n  const toggleInspector = () => {\n    const newState = !isInspecting;\n    setIsInspecting(newState);\n    if (newState) setSelectedElement(null);\n    if (iframeRef.current?.contentWindow) {\n      iframeRef.current.contentWindow.postMessage({ type: 'toggle-inspector', active: newState }, '*');\n    }\n  };\n\n  const handleAddToChat = () => {\n    if (!selectedElement) return;\n    const msg = `\\`<${selectedElement.tagName} class=\"${selectedElement.className}\">\\`\\n` +\n                (selectedElement.path ? `\\`${selectedElement.path}\\`\\n` : \"\") +\n                `${selectedElement.innerText}\\n` +\n                `...`;\n    setInputContent(msg);\n  };\n\n  // Effect: Detect Project ID from tool calls if not provided\n  useEffect(() => {\n    if (projectId) {\n      setProjectNum(projectId);\n      return;\n    }\n    if (!toolCalls) return;\n    \n    for (const tc of toolCalls) {\n      if (tc.name === 'write_file_tool' && tc.args) {\n        try {\n          const args = typeof tc.args === 'string' ? JSON.parse(tc.args) : tc.args;\n          if (args.project_num) {\n            setProjectNum(args.project_num);\n            break; // Found it\n          }\n        } catch (e) {}\n      }\n    }\n  }, [toolCalls, projectId]);\n\n  // Effect: Poll file tree\n  useEffect(() => {\n    if (!projectNum) return;\n\n    const fetchFiles = async () => {\n      try {\n        const baseUrl = env.NEXT_PUBLIC_API_URL || 'http://localhost:8001/api';\n        const res = await fetch(`${baseUrl}/files/${projectNum}`);\n        const data = await res.json();\n        if (data.tree) {\n          setFiles(data.tree);\n        }\n      } catch (e) {\n        console.error(\"Failed to fetch file tree\", e);\n      }\n    };\n\n    fetchFiles(); // Initial fetch\n    const interval = setInterval(fetchFiles, 2000); // Poll every 2s\n    return () => clearInterval(interval);\n  }, [projectNum]);\n\n  // Effect: Auto-select first file if none selected\n  useEffect(() => {\n    if (files.length > 0 && !activeFile && viewMode === 'code') {\n       const found = findFirstFile(files);\n       if (found) {\n         void handleFileClick({ ...found.node, path: found.path });\n       }\n    }\n  }, [files, activeFile, viewMode]);\n\n  // Effect: Auto-switch to preview only when responding finishes (falling edge)\n  useEffect(() => {\n    if (prevResponding.current && !responding && files.length > 0) {\n        // Only switch if we have files and just finished responding\n        setViewMode('preview');\n        setPreviewRefreshKey((key) => key + 1);\n    }\n    prevResponding.current = responding;\n  }, [responding, files.length]);\n\n  const toggleExpand = (path: string) => {\n    const newSet = new Set(expandedPaths);\n    if (newSet.has(path)) {\n      newSet.delete(path);\n    } else {\n      newSet.add(path);\n    }\n    setExpandedPaths(newSet);\n  };\n\n  const handleFileClick = async (node: FileNode) => {\n    if (!projectNum || !node.path) return;\n    \n    const baseUrl = env.NEXT_PUBLIC_API_URL || 'http://localhost:8001/api';\n\n    if (isImageFile(node.name)) {\n       const imageUrl = `${baseUrl}/preview/project_${projectNum}/${node.path}`;\n       setActiveFile({ name: node.name, content: imageUrl, path: node.path, isImage: true });\n       return;\n    }\n\n    try {\n      // Fetch content from static preview URL\n      const res = await fetch(`${baseUrl}/preview/project_${projectNum}/${node.path}?t=${Date.now()}`);\n      const text = await res.text();\n      setActiveFile({ name: node.name, content: text, path: node.path, isImage: false });\n    } catch (e) {\n      console.error(\"Failed to fetch file content\", e);\n    }\n  };\n  const baseUrl = env.NEXT_PUBLIC_API_URL || 'http://localhost:8001/api';\n  const previewUrl = projectNum ? `${baseUrl}/preview/project_${projectNum}/index.html?t=${previewRefreshKey}` : null;\n\n  const handleDownloadProject = () => {\n    if (!projectNum) return;\n    const url = `${baseUrl}/download/${projectNum}`;\n\n    //  a \n    const link = document.createElement('a');\n    link.href = url;\n    link.download = `project_${projectNum}.zip`;\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  };\n\n  return (\n    <div \n      className={cn(\n        \"flex h-full w-full flex-col bg-[#09090b] text-gray-300 border border-white/10 rounded-lg overflow-hidden transition-all duration-300\", \n        isMaximized && \"fixed inset-0 z-50 rounded-none border-0\",\n        className\n      )}\n    >\n      {/* Header */}\n      <div className=\"flex h-12 shrink-0 items-center justify-between border-b border-white/10 px-4 bg-[#09090b]\">\n        <div className=\"flex items-center gap-2\">\n          {/* View Toggles */}\n          <div className=\"flex items-center rounded-md bg-white/5 p-1 gap-1\">\n             <Button\n               variant=\"ghost\" \n               size=\"sm\"\n               className={cn(\"h-7 px-3 text-xs gap-1.5\", viewMode === 'preview' && \"bg-white/10 text-white\")}\n               onClick={() => setViewMode('preview')}\n             >\n               <Eye size={14} />\n               Preview\n             </Button>\n             <Button\n               variant=\"ghost\"\n               size=\"sm\" \n               className={cn(\"h-7 px-3 text-xs gap-1.5\", viewMode === 'code' && \"bg-white/10 text-white\")}\n               onClick={() => setViewMode('code')}\n             >\n               <Code2 size={14} />\n               Code\n             </Button>\n             {viewMode === 'preview' && (\n               <>\n                 <Button\n                   variant=\"ghost\"\n                   size=\"icon\"\n                   className={cn(\"h-7 w-7\", isInspecting && \"bg-blue-500/20 text-blue-400\")}\n                   onClick={toggleInspector}\n                   title=\"Inspect Element\"\n                 >\n                   <MousePointer2 size={14} />\n                 </Button>\n                 <Button\n                   variant=\"ghost\"\n                   size=\"icon\"\n                   className=\"h-7 w-7 text-white/60 hover:text-white\"\n                   onClick={() => setPreviewRefreshKey((key) => key + 1)}\n                   title=\"Refresh Preview\"\n                 >\n                   <RotateCw size={14} />\n                 </Button>\n               </>\n             )}\n          </div>\n          <span className=\"ml-4 font-medium text-sm text-white/70\">\n            {activeFile ? activeFile.name : (projectNum ? `Project #${projectNum}` : \"No Project\")}\n          </span>\n        </div>\n        <div className=\"flex items-center gap-2\">\n           <Button \n             variant=\"ghost\" \n             size=\"icon\" \n             className=\"h-8 w-8 hover:bg-white/5 text-gray-400 hover:text-white\"\n             onClick={() => setIsMaximized(!isMaximized)}\n           >\n             {isMaximized ? <Minimize2 size={16} /> : <Maximize2 size={16} />}\n           </Button>\n           <div className=\"h-4 w-[1px] bg-white/10 mx-1\" />\n           <button\n             className=\"p-2 hover:bg-white/5 rounded text-gray-400 hover:text-white disabled:opacity-40 disabled:hover:bg-transparent\"\n             onClick={handleDownloadProject}\n             disabled={!projectNum}\n             title={projectNum ? `Download project_${projectNum}` : 'No project to download'}\n           >\n             <Download size={16} />\n           </button>\n        </div>\n      </div>\n\n      {/* Main Content */}\n      <div className=\"flex-grow overflow-hidden relative\">\n        {viewMode === 'preview' ? (\n          <div className=\"h-full w-full bg-white relative\">\n            {selectedElement && (\n              <div className=\"absolute top-4 left-1/2 -translate-x-1/2 z-50 flex items-center gap-3 rounded-lg bg-black/80 p-3 text-white backdrop-blur-md shadow-xl border border-white/10 max-w-[90%]\">\n                <div className=\"flex flex-col gap-0.5 text-xs max-w-[300px]\">\n                  <div className=\"font-mono font-bold text-blue-400 flex items-center gap-2\">\n                    &lt;{selectedElement.tagName}&gt;\n                    <span className=\"text-gray-400 font-normal opacity-70\">#{selectedElement.id || '-'}</span>\n                  </div>\n                  <div className=\"truncate opacity-70\">\n                    {selectedElement.className ? `.${selectedElement.className.split(' ').join('.')}` : 'No class'}\n                  </div>\n                  {selectedElement.path && (\n                    <div className=\"text-green-400 truncate mt-1\" title={selectedElement.path}>\n                      File: {selectedElement.path}\n                    </div>\n                  )}\n                </div>\n                <div className=\"h-8 w-[1px] bg-white/20\" />\n                <Button \n                  size=\"sm\" \n                  variant=\"secondary\" \n                  className=\"h-8 text-xs\"\n                  onClick={handleAddToChat}\n                >\n                  Add to Chat\n                </Button>\n                <Button \n                  size=\"icon\" \n                  variant=\"ghost\" \n                  className=\"h-6 w-6 text-white/50 hover:text-white\"\n                  onClick={() => setSelectedElement(null)}\n                >\n                  <X size={14} />\n                </Button>\n              </div>\n            )}\n            {previewSrcDoc || previewUrl ? (\n              <iframe \n                ref={iframeRef}\n                src={previewSrcDoc ? undefined : previewUrl || undefined}\n                srcDoc={previewSrcDoc || undefined}\n                className=\"h-full w-full border-0\" \n                title=\"Project Preview\" \n              />\n            ) : (\n              <div className=\"flex h-full items-center justify-center text-gray-500\">\n                Preview not available\n              </div>\n            )}\n          </div>\n        ) : (\n          <PanelGroup direction=\"horizontal\">\n            {/* File Tree */}\n            <Panel defaultSize={20} minSize={15} maxSize={30} className=\"flex flex-col border-r border-white/10 bg-[#0c0c0e]\">\n              <div className=\"p-2 overflow-auto h-full\">\n                <div className=\"mb-2 px-2 text-xs font-bold text-gray-500 uppercase tracking-wider\">Explorer</div>\n                {files.length === 0 && (\n                  <div className=\"px-4 py-8 text-center text-xs text-gray-600\">\n                    No files generated yet.\n                    <br />\n                    Start a conversation to generate code.\n                  </div>\n                )}\n                {files.map((item) => (\n                  <FileTreeItem \n                    key={item.name} \n                    node={item} \n                    depth={0} \n                    onFileClick={handleFileClick}\n                    expandedPaths={expandedPaths}\n                    toggleExpand={toggleExpand}\n                    currentPath=\"\"\n                  />\n                ))}\n              </div>\n            </Panel>\n\n            <PanelResizeHandle className=\"w-1 bg-black hover:bg-blue-500/50 transition-colors\" />\n\n            {/* Code Editor */}\n            <Panel defaultSize={80}>\n               <div className=\"h-full w-full overflow-auto bg-[#1e1e1e]\">\n                 {activeFile ? (\n                   activeFile.isImage ? (\n                     <div className=\"flex h-full items-center justify-center p-4 bg-[#1e1e1e]\">\n                        <img \n                          src={activeFile.content} \n                          alt={activeFile.name} \n                          className=\"max-w-full max-h-full object-contain\" \n                        />\n                     </div>\n                   ) : (\n                   <SyntaxHighlighter\n                     language={getLanguageFromFilename(activeFile.name)}\n                     style={vscDarkPlus}\n                     customStyle={{ margin: 0, padding: '1.5rem', background: 'transparent', fontSize: '14px', lineHeight: '1.5' }}\n                     showLineNumbers={true}\n                   >\n                     {activeFile.content}\n                   </SyntaxHighlighter>\n                   )\n                 ) : (\n                   <div className=\"flex h-full items-center justify-center text-gray-600 text-sm\">\n                     Select a file to view code\n                   </div>\n                 )}\n               </div>\n            </Panel>\n          </PanelGroup>\n        )}\n      </div>\n      \n      {/* Status Bar */}\n      <div className=\"flex h-6 shrink-0 items-center justify-between border-t border-white/10 bg-[#007acc] px-3 text-xs text-white\">\n         <div className=\"flex items-center gap-3\">\n           <div className=\"flex items-center gap-1\"><Settings size={12} /> main*</div>\n           <div>0 errors</div>\n         </div>\n         <div className=\"flex items-center gap-3\">\n           <div>Ln 1, Col 1</div>\n           <div>UTF-8</div>\n         </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 6517, "column": 0}, "map": {"version":3,"sources":["file:///Users/ouyangsihao/code/python/Craft-Agent/web/src/app/web-dev/main.tsx"],"sourcesContent":["// Copyright (c) 2025 Bytedance Ltd. and/or its affiliates\n// SPDX-License-Identifier: MIT\n\n\"use client\";\n\nimport { Panel, PanelGroup, PanelResizeHandle } from \"react-resizable-panels\";\n\nimport { MessagesBlock } from \"../chat/components/messages-block\";\nimport { IdeBlock } from \"./ide\";\n\nexport default function Main() {\n  return (\n    <div className=\"h-full w-full px-4 pt-16 pb-4\">\n      <PanelGroup direction=\"horizontal\" className=\"h-full w-full gap-4\">\n        {/* Left Panel: Chat Area */}\n        <Panel defaultSize={40} minSize={20} maxSize={50} className=\"flex flex-col\">\n          <div className=\"h-full w-full overflow-hidden rounded-2xl border bg-card shadow-sm\">\n            <MessagesBlock className=\"h-full w-full\" />\n          </div>\n        </Panel>\n        \n        <PanelResizeHandle className=\"w-1.5 rounded-full bg-border/30 hover:bg-primary/50 transition-colors cursor-col-resize flex flex-col justify-center items-center\">\n            <div className=\"h-8 w-1 rounded-full bg-border/50\" />\n        </PanelResizeHandle>\n        \n        {/* Right Panel: IDE Area */}\n        <Panel defaultSize={60} minSize={30} className=\"flex flex-col\">\n           <IdeBlock className=\"h-full w-full shadow-sm\" />\n        </Panel>\n      </PanelGroup>\n    </div>\n  );\n}\n"],"names":[],"mappings":"AAAA,0DAA0D;AAC1D,+BAA+B;;;;;AAI/B;AAEA;AACA;AALA;;;;;AAOe,SAAS;IACtB,qBACE,sYAAC;QAAI,WAAU;kBACb,cAAA,sYAAC,8WAAA,CAAA,aAAU;YAAC,WAAU;YAAa,WAAU;;8BAE3C,sYAAC,8WAAA,CAAA,QAAK;oBAAC,aAAa;oBAAI,SAAS;oBAAI,SAAS;oBAAI,WAAU;8BAC1D,cAAA,sYAAC;wBAAI,WAAU;kCACb,cAAA,sYAAC,yJAAA,CAAA,gBAAa;4BAAC,WAAU;;;;;;;;;;;;;;;;8BAI7B,sYAAC,8WAAA,CAAA,oBAAiB;oBAAC,WAAU;8BACzB,cAAA,sYAAC;wBAAI,WAAU;;;;;;;;;;;8BAInB,sYAAC,8WAAA,CAAA,QAAK;oBAAC,aAAa;oBAAI,SAAS;oBAAI,WAAU;8BAC5C,cAAA,sYAAC,mIAAA,CAAA,WAAQ;wBAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;AAK/B;KAtBwB","debugId":null}}]
}